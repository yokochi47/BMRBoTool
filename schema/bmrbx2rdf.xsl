<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:owl="http://www.w3.org/2002/07/owl#"
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:dcterms="http://purl.org/dc/terms/"
  xmlns:skos="http://www.w3.org/2004/02/skos/core#"
  xmlns:BMRBx="http://bmrbpub.pdbj.org/schema/mmcif_nmr-star.xsd"
  xmlns:BMRBo="http://bmrbpub.pdbj.org/schema/mmcif_nmr-star.owl#"
  xmlns:ext="http://exslt.org/common" exclude-result-prefixes="BMRBx ext">
    
  <xsl:include href="url-encode.xsl"/>

  <xsl:param name="primitive_type_mapping" select="'https://raw.githubusercontent.com/yokochi47/BMRBoTool/master/schema/bmrbx_primitive_type_mapping.xml'" required="no"/>
  <xsl:param name="type_mapping" select="document($primitive_type_mapping)"/>

  <xsl:output method="xml" encoding="UTF-8" indent="yes"/>
  <xsl:strip-space elements="*"/>
  <xsl:variable name="bmrb_id"><xsl:value-of select="/BMRBx:datablock/BMRBx:entryCategory/BMRBx:entry/@id"/></xsl:variable>
  <xsl:variable name="BMRB_ID"><xsl:value-of select="translate($bmrb_id,'abcdefghijklmnopqrstuvwxyz','ABCDEFGHIJKLMNOPQRSTUVWXYZ')"/></xsl:variable>
  <xsl:variable name="idorg">http://identifiers.org/</xsl:variable>
  <xsl:variable name="doi">http://doi.org/</xsl:variable>
  <xsl:variable name="orcid">http://orcid.org/</xsl:variable>
  <xsl:variable name="pubmed">http://rdf.ncbi.nlm.nih.gov/pubmed/</xsl:variable>
  <xsl:variable name="issn">http://portal.issn.org/resource/ISSN/</xsl:variable>
  <xsl:variable name="isbn">http://www.worldcat.org/isbn/</xsl:variable>
  <xsl:variable name="taxonomy">http://purl.uniprot.org/taxonomy/</xsl:variable>
  <xsl:variable name="enzyme">http://purl.uniprot.org/enzyme/</xsl:variable>
  <xsl:variable name="uniprot">http://purl.uniprot.org/uniprot/</xsl:variable>
  <xsl:variable name="ddbj">http://www.ncbi.nlm.nih.gov/protein/</xsl:variable>
  <xsl:variable name="embl">http://www.ncbi.nlm.nih.gov/protein/</xsl:variable>
  <xsl:variable name="genbank">http://www.ncbi.nlm.nih.gov/protein/</xsl:variable>
  <xsl:variable name="pir">http://www.ncbi.nlm.nih.gov/protein/</xsl:variable>
  <xsl:variable name="prf">http://www.ncbi.nlm.nih.gov/protein/?term=prf+</xsl:variable>
  <xsl:variable name="refseq">http://www.ncbi.nlm.nih.gov/protein/</xsl:variable>
  <xsl:variable name="scop">http://scop.berkeley.edu/sunid=</xsl:variable>
  <xsl:variable name="pdb">http://rdf.wwpdb.org/pdb/</xsl:variable>
  <xsl:variable name="pdb-ccd">http://rdf.wwpdb.org/cc/</xsl:variable>
  <xsl:variable name="pdb.ligand">http://ligand-expo.rcsb.org/pyapps/ldHandler.py?formid=cc-index-search&amp;operation=ccid&amp;target=</xsl:variable>
  <xsl:variable name="pubchem.substance">http://rdf.ncbi.nlm.nih.gov/pubchem/substance/SID</xsl:variable>
  <xsl:variable name="pubchem.compound">http://rdf.ncbi.nlm.nih.gov/pubchem/compound/CID</xsl:variable>

  <xsl:variable name="base">
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">http://bmrbpub.pdbj.org/rdf/<xsl:value-of select="$bmrb_id"/></xsl:when>
      <xsl:otherwise>http://bmrbpub.pdbj.org/rdf/bmr<xsl:value-of select="$bmrb_id"/></xsl:otherwise>
    </xsl:choose>
  </xsl:variable>

  <xsl:variable name="bmrb_doi">
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">10.13018/<xsl:value-of select="$BMRB_ID"/></xsl:when>
      <xsl:otherwise>10.13018/BMR<xsl:value-of select="$bmrb_id"/></xsl:otherwise>
    </xsl:choose>
  </xsl:variable>

  <xsl:variable name="bmrb">
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bmse')">http://bmrb.io/ftp/pub/bmrb/metabolomics/NMR_STAR_experimental_entries/</xsl:when>
      <xsl:when test="starts-with($bmrb_id, 'bmst')">http://bmrb.io/ftp/pub/bmrb/metabolomics/NMR_STAR_theoretical_entries/</xsl:when>
      <xsl:otherwise>http://bmrb.io/ftp/pub/bmrb/entry_lists/nmr-star3.1/bmr</xsl:otherwise>
    </xsl:choose>
  </xsl:variable>

  <xsl:variable name="bmrbj_mirror">
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bmse')">http://bmrb.pdbj.org/ftp/pub/bmrb/metabolomics/NMR_STAR_experimental_entries/</xsl:when>
      <xsl:when test="starts-with($bmrb_id, 'bmst')">http://bmrb.pdbj.org/ftp/pub/bmrb/metabolomics/NMR_STAR_theoretical_entries/</xsl:when>
      <xsl:otherwise>http://bmrb.pdbj.org/ftp/pub/bmrb/entry_lists/nmr-star3.1/bmr</xsl:otherwise>
    </xsl:choose>
  </xsl:variable>

  <xsl:variable name="bmrbx">
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">http://bmrbpub.pdbj.org/xml/bms/</xsl:when>
      <xsl:otherwise>http://bmrbpub.pdbj.org/xml/bmr/bmr</xsl:otherwise>
    </xsl:choose>
  </xsl:variable>

  <xsl:variable name="bmrb_urn">
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">info:bmrb.metabolomics/</xsl:when>
      <xsl:otherwise>info:bmrb/</xsl:otherwise>
    </xsl:choose>
  </xsl:variable>

  <xsl:variable name="bmrb_url">
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">http://bmrbpub.pdbj.org/rdf/</xsl:when>
      <xsl:otherwise>http://bmrbpub.pdbj.org/rdf/bmr</xsl:otherwise>
    </xsl:choose>
  </xsl:variable>

  <xsl:variable name="bmrbj_portal">
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">http://bmrbj.pdbj.org/bms/</xsl:when>
      <xsl:otherwise>http://bmrbj.pdbj.org/bmr/bmr</xsl:otherwise>
    </xsl:choose>
  </xsl:variable>

  <xsl:template match="/">
    <rdf:RDF>
      <xsl:apply-templates/>
    </rdf:RDF>
  </xsl:template>

  <!-- level 1 -->
  <xsl:template match="/BMRBx:datablock">
    <BMRBo:datablock rdf:about="{$base}" rdfs:label="{$bmrb_urn}{$bmrb_id}">
      <dcterms:references rdf:resource="{$doi}{$bmrb_doi}" rdfs:label="doi:{$bmrb_doi}"/>
      <dcterms:identifier><xsl:value-of select="$bmrb_id"/></dcterms:identifier>
      <xsl:if test="not(starts-with($bmrb_id, 'bms'))">
	<skos:altLabel><xsl:value-of select="concat('bmr',$bmrb_id)"/></skos:altLabel>
      </xsl:if>
      <dc:title><xsl:value-of select="BMRBx:entryCategory/BMRBx:entry/BMRBx:title/text()"/></dc:title>
      <rdfs:seeAlso rdf:resource="{$bmrbx}{$bmrb_id}-noatom.xml"/>
      <rdfs:seeAlso rdf:resource="{$bmrbj_portal}{$bmrb_id}"/>
      <rdfs:seeAlso rdf:resource="{$bmrbj_mirror}{$bmrb_id}.str"/>
      <rdfs:seeAlso rdf:resource="{$bmrb}{$bmrb_id}.str"/>

      <BMRBo:datablockName><xsl:value-of select="@datablockName"/></BMRBo:datablockName>
      <xsl:apply-templates select="./*"/>
    </BMRBo:datablock>
  </xsl:template>

  <!-- level 2 -->
  <xsl:template match="/BMRBx:datablock/*">
    <xsl:element name="BMRBo:has_{local-name(.)}">
      <xsl:element name="BMRBo:{local-name(.)}">
	<xsl:attribute name="rdf:about">
	  <xsl:value-of select="concat($base,'/',local-name(.))"/>
	</xsl:attribute>
    <xsl:apply-templates>
      <xsl:with-param name="base" select="$base"/>
    </xsl:apply-templates>
      </xsl:element>
    </xsl:element>
  </xsl:template>

  <!-- level 4 (element) -->
  <xsl:template match="/BMRBx:datablock/*/*/*[not(xsi:nil) and text()!='']">
    <xsl:variable name="category_item"><xsl:value-of select="local-name(parent::node())"/></xsl:variable>
    <xsl:variable name="data_item"><xsl:value-of select="local-name()"/></xsl:variable>
    <xsl:variable name="tag_name"><xsl:value-of select="concat($category_item,'.',$data_item)"/></xsl:variable>
    <xsl:variable name="data_type"><xsl:value-of select="$type_mapping/primitive_type_mapping/category_item[@name=$category_item]/data_item[@name=$data_item]/@type"/></xsl:variable>
    <xsl:element name="BMRBo:{$tag_name}">
      <xsl:if test="$data_type!=''">
	<xsl:attribute name="rdf:datatype"><xsl:value-of select="$data_type"/></xsl:attribute>
      </xsl:if>
      <xsl:choose>
	<xsl:when test="contains(local-name(),'one_letter_code')">
	  <xsl:choose>
	    <xsl:when test=".='?' or .='.'"/>
	    <xsl:otherwise>
	      <xsl:value-of select="translate(normalize-space(.),'
','')"/>
	    </xsl:otherwise>
	  </xsl:choose>
	</xsl:when>
	<xsl:otherwise>
	  <xsl:value-of select="."/>
	</xsl:otherwise>
      </xsl:choose>
    </xsl:element>
  </xsl:template>

  <!-- level 4 (attribute) -->
  <xsl:template match="/BMRBx:datablock/*/*/@*">
    <xsl:variable name="category_item"><xsl:value-of select="local-name(parent::node())"/></xsl:variable>
    <xsl:variable name="data_item"><xsl:value-of select="translate(name(),'@','')"/></xsl:variable>
    <xsl:variable name="tag_name"><xsl:value-of select="concat($category_item,'.',$data_item)"/></xsl:variable>
    <xsl:variable name="data_type"><xsl:value-of select="$type_mapping/primitive_type_mapping/category_item[@name=$category_item]/data_item[@name=$data_item]/@type"/></xsl:variable>
    <xsl:element name="BMRBo:{$tag_name}">
      <xsl:if test="$data_type!=''">
	<xsl:attribute name="rdf:datatype"><xsl:value-of select="$data_type"/></xsl:attribute>
      </xsl:if>
      <xsl:value-of select="."/>
    </xsl:element>
  </xsl:template>

  <!-- level 4 (linked data) -->
  <xsl:template match="BMRBx:entry_author/BMRBx:orcid[text() != '' and text() != 'na']" mode="linked">
    <rdfs:seeAlso rdf:resource="{$orcid}{text()}" rdfs:label="info:orcid/{text()}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}orcid/{text()}" rdfs:label="orcid:{text()}"/>
  </xsl:template>

  <xsl:template match="BMRBx:citation_author/BMRBx:orcid[text() != '' and text() != 'na']" mode="linked">
    <rdfs:seeAlso rdf:resource="{$orcid}{text()}" rdfs:label="info:orcid/{text()}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}orcid/{text()}" rdfs:label="orcid:{text()}"/>
  </xsl:template>

  <xsl:template match="BMRBx:entry/BMRBx:doi[text() != '' and text() != 'na']" mode="linked">
    <xsl:variable name="escaped_url">
      <xsl:call-template name="replace-string">
	<xsl:with-param name="str">
	  <xsl:call-template name="replace-string">
	    <xsl:with-param name="str" select="text()"/>
	    <xsl:with-param name="replace">&lt;</xsl:with-param>
	    <xsl:with-param name="with">&amp;lt;</xsl:with-param>
	  </xsl:call-template>
	</xsl:with-param>
	<xsl:with-param name="replace">&gt;</xsl:with-param>
	<xsl:with-param name="with">&amp;gt;</xsl:with-param>
      </xsl:call-template>
    </xsl:variable>
    <rdfs:seeAlso rdf:resource="{$doi}{$escaped_url}" rdfs:label="info:doi/{text()}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}doi/{escaped_url}" rdfs:label="doi:{text()}"/>
  </xsl:template>

  <xsl:template match="BMRBx:auxiliary_files/BMRBx:doi[text() != '' and text() != 'na']" mode="linked">
    <xsl:variable name="escaped_url">
      <xsl:call-template name="replace-string">
	<xsl:with-param name="str">
	  <xsl:call-template name="replace-string">
	    <xsl:with-param name="str" select="text()"/>
	    <xsl:with-param name="replace">&lt;</xsl:with-param>
	    <xsl:with-param name="with">&amp;lt;</xsl:with-param>
	  </xsl:call-template>
	</xsl:with-param>
	<xsl:with-param name="replace">&gt;</xsl:with-param>
	<xsl:with-param name="with">&amp;gt;</xsl:with-param>
      </xsl:call-template>
    </xsl:variable>
    <rdfs:seeAlso rdf:resource="{$doi}{$escaped_url}" rdfs:label="info:doi/{text()}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}doi/{$escaped_url}" rdfs:label="doi:{text()}"/>
  </xsl:template>

  <xsl:template match="BMRBx:citation/BMRBx:doi[text() != '' and text() != 'na']" mode="linked">
    <xsl:variable name="escaped_url">
      <xsl:call-template name="replace-string">
	<xsl:with-param name="str">
	  <xsl:call-template name="replace-string">
	    <xsl:with-param name="str" select="text()"/>
	    <xsl:with-param name="replace">&lt;</xsl:with-param>
	    <xsl:with-param name="with">&amp;lt;</xsl:with-param>
	  </xsl:call-template>
	</xsl:with-param>
	<xsl:with-param name="replace">&gt;</xsl:with-param>
	<xsl:with-param name="with">&amp;gt;</xsl:with-param>
      </xsl:call-template>
    </xsl:variable>
    <rdfs:seeAlso rdf:resource="{$doi}{$escaped_url}" rdfs:label="info:doi/{text()}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}doi/{$escaped_url}" rdfs:label="doi:{text()}"/>
  </xsl:template>

  <xsl:template match="BMRBx:citation/BMRBx:pubmed_id[text() != '' and text() != 'na']" mode="linked">
    <rdfs:seeAlso rdf:resource="{$pubmed}{text()}" rdfs:label="info:pmid/{text()}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}pubmed/{text()}" rdfs:label="pubmed:{text()}"/>
  </xsl:template>

  <xsl:template match="BMRBx:citation/BMRBx:journal_issn[text() != '' and text() != 'na']" mode="linked">
    <rdfs:seeAlso rdf:resource="{$issn}{text()}" rdfs:label="urn:ISSN:{text()}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}issn/{text()}" rdfs:label="issn:{text()}"/>
  </xsl:template>

  <xsl:template match="BMRBx:citation/BMRBx:book_isbn[text() != '' and text() != 'na']" mode="linked">
    <rdfs:seeAlso rdf:resource="{$isbn}{text()}" rdfs:label="urn:ISBN:{text()}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}isbn/{text()}" rdfs:label="isbn:{text()}"/>
  </xsl:template>

  <xsl:template match="BMRBx:citation/BMRBx:www_url[text() != '' and text() != 'na']" mode="linked">
    <rdfs:seeAlso rdf:resource="{text()}"/>
  </xsl:template>

  <xsl:template match="BMRBx:entity_natural_src/BMRBx:ncbi_taxonomy_id[text() != '' and text() != 'na' and text() != 'n/a']" mode="linked">
    <xsl:variable name="tax_list">
      <xsl:call-template name="tokenize">
	<xsl:with-param name="str" select="text()"/>
	<xsl:with-param name="substr">,</xsl:with-param>
      </xsl:call-template>
    </xsl:variable>
    <xsl:for-each select="ext:node-set($tax_list)/token">
      <xsl:variable name="tax"><xsl:value-of select="translate(text(),' ','')"/></xsl:variable>
      <xsl:if test="string-length($tax)!=0">
	<rdfs:seeAlso rdf:resource="{$taxonomy}{$tax}" rdfs:label="info:taxonomy/{$tax}"/>
	<rdfs:seeAlso rdf:resource="{$idorg}taxonomy/{$tax}" rdfs:label="taxonomy:{$tax}"/>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>

  <xsl:template match="BMRBx:entity_experimental_src/BMRBx:host_org_ncbi_taxonomy_id[text() != '' and text() != 'na' and text() != 'n/a']" mode="linked">
    <xsl:variable name="tax_list">
      <xsl:call-template name="tokenize">
	<xsl:with-param name="str" select="text()"/>
	<xsl:with-param name="substr">,</xsl:with-param>
      </xsl:call-template>
    </xsl:variable>
    <xsl:for-each select="ext:node-set($tax_list)/token">
      <xsl:variable name="tax"><xsl:value-of select="translate(text(),' ','')"/></xsl:variable>
      <xsl:if test="string-length($tax)!=0">
	<rdfs:seeAlso rdf:resource="{$taxonomy}{$tax}" rdfs:label="info:taxonomy/{$tax}"/>
	<rdfs:seeAlso rdf:resource="{$idorg}taxonomy/{$tax}" rdfs:label="taxonomy:{$tax}"/>
      </xsl:if>
    </xsl:for-each>
  </xsl:template>

  <xsl:template match="BMRBx:assembly/BMRBx:enzyme_commission_number[text() != '' and text() != 'na' and text() != 'n/a']" mode="linked">
    <xsl:variable name="ec_norm"><xsl:value-of select="normalize-space(text())"/></xsl:variable>
    <xsl:if test="$ec_norm!=''">
     <xsl:variable name="ec_list">
	<xsl:call-template name="tokenize">
	  <xsl:with-param name="str" select="$ec_norm"/>
	  <xsl:with-param name="substr">,</xsl:with-param>
	</xsl:call-template>
      </xsl:variable>
      <xsl:for-each select="ext:node-set($ec_list)/token">
	<xsl:variable name="ec"><xsl:value-of select="translate(text(),' ','')"/></xsl:variable>
	<xsl:if test="string-length($ec)!=0">
	  <rdfs:seeAlso rdf:resource="{$enzyme}{$ec}" rdfs:label="info:ec-code/{$ec}"/>
	  <rdfs:seeAlso rdf:resource="{$idorg}ec-code/{$ec}" rdfs:label="ec-code:{$ec}"/>
	</xsl:if>
      </xsl:for-each>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:assembly_subsystem/BMRBx:enzyme_commission_number[text() != '' and text() != 'na' and text() != 'n/a']" mode="linked">
    <xsl:variable name="ec_norm"><xsl:value-of select="normalize-space(text())"/></xsl:variable>
    <xsl:if test="$ec_norm!=''">
     <xsl:variable name="ec_list">
	<xsl:call-template name="tokenize">
	  <xsl:with-param name="str" select="$ec_norm"/>
	  <xsl:with-param name="substr">,</xsl:with-param>
	</xsl:call-template>
      </xsl:variable>
      <xsl:for-each select="ext:node-set($ec_list)/token">
	<xsl:variable name="ec"><xsl:value-of select="translate(text(),' ','')"/></xsl:variable>
	<xsl:if test="string-length($ec)!=0">
	  <rdfs:seeAlso rdf:resource="{$enzyme}{$ec}" rdfs:label="info:ec-code/{$ec}"/>
	  <rdfs:seeAlso rdf:resource="{$idorg}ec-code/{$ec}" rdfs:label="ec-code:{$ec}"/>
	</xsl:if>
      </xsl:for-each>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:entity/BMRBx:ec_number[text() != '' and text() != 'na' and text() != 'n/a']" mode="linked">
    <xsl:variable name="ec_norm"><xsl:value-of select="normalize-space(text())"/></xsl:variable>
    <xsl:if test="$ec_norm!=''">
     <xsl:variable name="ec_list">
	<xsl:call-template name="tokenize">
	  <xsl:with-param name="str" select="$ec_norm"/>
	  <xsl:with-param name="substr">,</xsl:with-param>
	</xsl:call-template>
      </xsl:variable>
      <xsl:for-each select="ext:node-set($ec_list)/token">
	<xsl:variable name="ec"><xsl:value-of select="translate(text(),' ','')"/></xsl:variable>
	<xsl:if test="string-length($ec)!=0">
	  <rdfs:seeAlso rdf:resource="{$enzyme}{$ec}" rdfs:label="info:ec-code/{$ec}"/>
	  <rdfs:seeAlso rdf:resource="{$idorg}ec-code/{$ec}" rdfs:label="ec-code:{$ec}"/>
	</xsl:if>
      </xsl:for-each>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:assembly_db_link[@database_code='SP']/@accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$uniprot}{.}" rdfs:label="info:uniprot/{.}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}uniprot/{.}" rdfs:label="uniprot:{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:entity_db_link[@database_code='SP']/@accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$uniprot}{.}" rdfs:label="info:uniprot/{.}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}uniprot/{.}" rdfs:label="uniprot:{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:related_entries[@database_name='SP']/@database_accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$uniprot}{.}" rdfs:label="info:uniprot/{.}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}uniprot/{.}" rdfs:label="uniprot:{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:matched_entries[@database_name='SP']/@database_accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$uniprot}{.}" rdfs:label="info:uniprot/{.}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}uniprot/{.}" rdfs:label="uniprot:{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:assembly_db_link[@database_code='DBJ']/@accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$ddbj}{.}" rdfs:label="info:ddbj-embl-genbank/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}ncbiprotein/{.}" rdfs:label="ncbiprotein:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:entity_db_link[@database_code='DBJ']/@accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$ddbj}{.}" rdfs:label="info:ddbj-embl-genbank/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}ncbiprotein/{.}" rdfs:label="ncbiprotein:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:related_entries[@database_name='DBJ']/@database_accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$ddbj}{.}" rdfs:label="info:ddbj-embl-genbank/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}ncbiprotein/{.}" rdfs:label="ncbiprotein:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:matched_entries[@database_name='DBJ']/@database_accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$ddbj}{.}" rdfs:label="info:ddbj-embl-genbank/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}ncbiprotein/{.}" rdfs:label="ncbiprotein:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:assembly_db_link[@database_code='EMBL']/@accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$embl}{.}" rdfs:label="info:ddbj-embl-genbank/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}ncbiprotein/{.}" rdfs:label="ncbiprotein:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:entity_db_link[@database_code='EMBL']/@accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$embl}{.}" rdfs:label="info:ddbj-embl-genbank/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}ncbiprotein/{.}" rdfs:label="ncbiprotein:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:related_entries[@database_name='EMBL']/@database_accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$embl}{.}" rdfs:label="info:ddbj-embl-genbank/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}ncbiprotein/{.}" rdfs:label="ncbiprotein:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:matched_entries[@database_name='EMBL']/@database_accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$embl}{.}" rdfs:label="info:ddbj-embl-genbank/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}ncbiprotein/{.}" rdfs:label="ncbiprotein:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:assembly_db_link[@database_code='GB']/@accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$genbank}{.}" rdfs:label="info:ddbj-embl-genbank/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}ncbiprotein/{.}" rdfs:label="ncbiprotein:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:entity_db_link[@database_code='GB']/@accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$genbank}{.}" rdfs:label="info:ddbj-embl-genbank/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}ncbiprotein/{.}" rdfs:label="ncbiprotein:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:related_entries[@database_name='GB']/@database_accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$genbank}{.}" rdfs:label="info:ddbj-embl-genbank/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}ncbiprotein/{.}" rdfs:label="ncbiprotein:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:matched_entries[@database_name='GB']/@database_accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$genbank}{.}" rdfs:label="info:ddbj-embl-genbank/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}ncbiprotein/{.}" rdfs:label="ncbiprotein:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:assembly_db_link[@database_code='PIR']/@accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$pir}{.}" rdfs:label="info:pir/{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:entity_db_link[@database_code='PIR']/@accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$pir}{.}" rdfs:label="info:pir/{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:related_entries[@database_name='PIR']/@database_accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$pir}{.}" rdfs:label="info:pir/{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:matched_entries[@database_name='PIR']/@database_accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$pir}{.}" rdfs:label="info:pir/{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:assembly_db_link[@database_code='PRF']/@accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$prf}{.}" rdfs:label="info:prf/{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:entity_db_link[@database_code='PRF']/@accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$prf}{.}" rdfs:label="info:prf/{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:related_entries[@database_name='PRF']/@database_accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$prf}{.}" rdfs:label="info:prf/{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:matched_entries[@database_name='PRF']/@database_accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$prf}{.}" rdfs:label="info:prf/{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:assembly_db_link[@database_code='REF']/@accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$refseq}{.}" rdfs:label="info:refseq/{.}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}refseq/{.}" rdfs:label="refseq:{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:entity_db_link[@database_code='REF']/@accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$refseq}{.}" rdfs:label="info:refseq/{.}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}refseq/{.}" rdfs:label="refseq:{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:related_entries[@database_name='REF']/@database_accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$refseq}{.}" rdfs:label="info:refseq/{.}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}refseq/{.}" rdfs:label="refseq:{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:matched_entries[@database_name='REF']/@database_accession_code" mode="linked">
    <rdfs:seeAlso rdf:resource="{$refseq}{.}" rdfs:label="info:refseq/{.}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}refseq/{.}" rdfs:label="refseq:{.}"/>
  </xsl:template>

  <xsl:template match="BMRBx:struct_classification/BMRBx:sunid[text() != '' and text() != 'na']" mode="linked">
    <xsl:variable name="acc"><xsl:value-of select="translate(text(),' ','')"/></xsl:variable>
    <rdfs:seeAlso rdf:resource="{$scop}{$acc}" rdfs:label="info:scop/{$acc}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}scop/{$acc}" rdfs:label="scop:{$acc}"/>
  </xsl:template>

  <xsl:template match="BMRBx:entry/BMRBx:assigned_pdb_id[text() != '']" mode="linked">
    <xsl:variable name="acc"><xsl:value-of select="translate(text(),' ','')"/></xsl:variable>
    <rdfs:seeAlso rdf:resource="{$pdb}{$acc}" rdfs:label="info:pdb/{$acc}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}pdb/{$acc}" rdfs:label="pdb:{$acc}"/>
  </xsl:template>

  <xsl:template match="BMRBx:conformer_family_coord_set/BMRBx:pdb_accession_code[text() != '']" mode="linked">
    <xsl:variable name="acc"><xsl:value-of select="translate(text(),' ','')"/></xsl:variable>
    <rdfs:seeAlso rdf:resource="{$pdb}{$acc}" rdfs:label="info:pdb/{$acc}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}pdb/{$acc}" rdfs:label="pdb:{$acc}"/>
  </xsl:template>

  <xsl:template match="BMRBx:representative_conformer/BMRBx:pdb_accession_code[text() != '']" mode="linked">
    <xsl:variable name="acc"><xsl:value-of select="translate(text(),' ','')"/></xsl:variable>
    <rdfs:seeAlso rdf:resource="{$pdb}{$acc}" rdfs:label="info:pdb/{$acc}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}pdb/{$acc}" rdfs:label="pdb:{$acc}"/>
  </xsl:template>

  <xsl:template match="BMRBx:structure_annotation/BMRBx:pdb_id[text() != '']" mode="linked">
    <xsl:variable name="acc"><xsl:value-of select="translate(text(),' ','')"/></xsl:variable>
    <rdfs:seeAlso rdf:resource="{$pdb}{$acc}" rdfs:label="info:pdb/{$acc}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}pdb/{$acc}" rdfs:label="pdb:{$acc}"/>
  </xsl:template>

  <xsl:template match="BMRBx:pb_list/BMRBx:pdb_id[text() != '']" mode="linked">
    <xsl:variable name="acc"><xsl:value-of select="translate(text(),' ','')"/></xsl:variable>
    <rdfs:seeAlso rdf:resource="{$pdb}{$acc}" rdfs:label="info:pdb/{$acc}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}pdb/{$acc}" rdfs:label="pdb:{$acc}"/>
  </xsl:template>

  <xsl:template match="BMRBx:assembly_db_link[@database_code='PDB']/@accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$pdb}{.}" rdfs:label="info:pdb/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}pdb/{.}" rdfs:label="pdb:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:entity_db_link[@database_code='PDB']/@accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$pdb}{.}" rdfs:label="info:pdb/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}pdb/{.}" rdfs:label="pdb:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:related_entries[@database_name='PDB']/@database_accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$pdb}{.}" rdfs:label="info:pdb/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}pdb/{.}" rdfs:label="pdb:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:matched_entries[@database_name='PDB']/@database_accession_code" mode="linked">
    <xsl:if test="not(contains(., ' '))">
      <rdfs:seeAlso rdf:resource="{$pdb}{.}" rdfs:label="info:pdb/{.}"/>
      <rdfs:seeAlso rdf:resource="{$idorg}pdb/{.}" rdfs:label="pdb:{.}"/>
    </xsl:if>
  </xsl:template>

  <xsl:template match="BMRBx:assembly_db_link[@database_code='BMRB']/@accession_code" mode="linked">
    <xsl:variable name="bmrb_id" select="."/>
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb.metabolomics/{$bmrb_id}"/>
      </xsl:when>
      <xsl:otherwise>
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb/{$bmrb_id}"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="BMRBx:entity_db_link[@database_code='BMRB']/@accession_code" mode="linked">
    <xsl:variable name="bmrb_id" select="."/>
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb.metabolomics/{$bmrb_id}"/>
      </xsl:when>
      <xsl:otherwise>
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb/{$bmrb_id}"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="BMRBx:related_entries[@database_name='BMRB']/@database_accession_code" mode="linked">
    <xsl:variable name="bmrb_id" select="."/>
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb.metabolomics/{$bmrb_id}"/>
      </xsl:when>
      <xsl:otherwise>
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb/{$bmrb_id}"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="BMRBx:matched_entries[@database_name='BMRB']/@database_accession_code" mode="linked">
    <xsl:variable name="bmrb_id" select="."/>
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb.metabolomics/{$bmrb_id}"/>
      </xsl:when>
      <xsl:otherwise>
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb/{$bmrb_id}"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="BMRBx:assembly_db_link[@database_code='BMRB(withdrawn)']/@accession_code" mode="linked">
    <xsl:variable name="bmrb_id" select="."/>
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb.metabolomics/{$bmrb_id}"/>
      </xsl:when>
      <xsl:otherwise>
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb/{$bmrb_id}"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="BMRBx:entity_db_link[@database_code='BMRB(withdrawn)']/@accession_code" mode="linked">
    <xsl:variable name="bmrb_id" select="."/>
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb.metabolomics/{$bmrb_id}"/>
      </xsl:when>
      <xsl:otherwise>
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb/{$bmrb_id}"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="BMRBx:related_entries[@database_name='BMRB(withdrawn)']/@database_accession_code" mode="linked">
    <xsl:variable name="bmrb_id" select="."/>
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb.metabolomics/{$bmrb_id}"/>
      </xsl:when>
      <xsl:otherwise>
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb/{$bmrb_id}"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="BMRBx:matched_entries[@database_name='BMRB(withdrawn)']/@database_accession_code" mode="linked">
    <xsl:variable name="bmrb_id" select="."/>
    <xsl:choose>
      <xsl:when test="starts-with($bmrb_id, 'bms')">
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb.metabolomics/{$bmrb_id}"/>
      </xsl:when>
      <xsl:otherwise>
	<rdfs:seeAlso rdf:resource="{$bmrb_url}{$bmrb_id}" rdfs:label="info:bmrb/{$bmrb_id}"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="BMRBx:chem_comp/BMRBx:pdb_code[text() != '' and text() != 'na']" mode="linked">
    <xsl:choose>
      <xsl:when test="starts-with(text(), 'pdb/')">
	<xsl:variable name="pdb_code" select="substring-after(text(),'pdb/')"/>
	<xsl:variable name="cc_code" select="substring-after(text(),'chem_comp/')"/>
	<rdfs:seeAlso rdf:resource="{$pdb}{translate($pdb_code,' []@#%+&amp;','_()a....')}" rdfs:label="info:pdb/{$pdb_code}"/>
	<rdfs:seeAlso rdf:resource="{$idorg}pdb/{translate($pdb_code,' []@#%+&amp;','_()a....')}" rdfs:label="pdb:{$pdb_code}"/>
	<rdfs:seeAlso rdf:resource="{$pdb.ligand}{translate($cc_code,' []@#%+&amp;','_()a....')}" rdfs:label="info:pdb.ligand/{$cc_code}"/>
	<rdfs:seeAlso rdf:resource="{$idorg}pdb.ligand/{translate($cc_code,' []@#%+&amp;','_()a....')}" rdfs:label="pdb.ligand:{$cc_code}"/>
      </xsl:when>
      <xsl:when test="starts-with(text(), 'bmrb_ligand_expo/')"/>
      <xsl:when test="starts-with(text(), 'no_records/')"/>
      <xsl:otherwise>
	<rdfs:seeAlso rdf:resource="{$pdb-ccd}{translate(text(),' []@#%+&amp;','_()a....')}" rdfs:label="info:pdb-ccd/{text()}"/>
	<rdfs:seeAlso rdf:resource="{$idorg}pdb-ccd/{translate(text(),' []@#%+&amp;','_()a....')}" rdfs:label="pdb-ccd:{text()}"/>
	<rdfs:seeAlso rdf:resource="{$pdb.ligand}{translate(text(),' []@#%+&amp;','_()a....')}" rdfs:label="info:pdb.ligand/{text()}"/>
	<rdfs:seeAlso rdf:resource="{$idorg}pdb.ligand/{translate(text(),' []@#%+&amp;','_()a....')}" rdfs:label="pdb.ligand:{text()}"/>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>

  <xsl:template match="BMRBx:chem_comp/BMRBx:pubchem_code[text() != '' and text() != 'na']" mode="linked">
    <xsl:variable name="acc"><xsl:value-of select="translate(text(),' ','')"/></xsl:variable>
    <rdfs:seeAlso rdf:resource="{$pubchem.substance}{$acc}" rdfs:label="info:pubchem.substance/{$acc}"/>
    <rdfs:seeAlso rdf:resource="{$idorg}pubchem.substance/{$acc}" rdfs:label="pubchem.substance:{$acc}"/>
  </xsl:template>

  <xsl:template match="BMRBx:chem_comp_db_link[@database_code='PubChem' and @accession_code != '' and @accession_code != 'na']/BMRBx:accession_code_type" mode="linked">
    <xsl:variable name="pubchem_id" select="../@accession_code"/>
    <xsl:if test="text()='sid'">
       <rdfs:seeAlso rdf:resource="{$pubchem.substance}{$pubchem_id}" rdfs:label="info:pubchem.substance/{$pubchem_id}"/>
       <rdfs:seeAlso rdf:resource="{$idorg}pubchem.substance/{$pubchem_id}" rdfs:label="pubchem.substance:{$pubchem_id}"/>
    </xsl:if>
    <xsl:if test="text()='cid'">
       <rdfs:seeAlso rdf:resource="{$pubchem.compound}{$pubchem_id}" rdfs:label="info:pubchem.compound/{$pubchem_id}"/>
       <rdfs:seeAlso rdf:resource="{idorg}pubchem.compound/{$pubchem_id}" rdfs:label="pubchem.compound:{$pubchem_id}"/>
    </xsl:if>
  </xsl:template>

  <!-- level 3 (templates follow) -->
    
  <xsl:template match="BMRBx:datablock/BMRBx:ambiguous_atom_chem_shiftCategory/BMRBx:ambiguous_atom_chem_shift">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="atom_chem_shift_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_chem_shift_id)&lt;64"><xsl:value-of select="@atom_chem_shift_id"/></xsl:when><xsl:when test="contains(@atom_chem_shift_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_chem_shift_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_chem_shift_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_chem_shift_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_chem_shift_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ambiguous_atom_chem_shift>
      <BMRBo:ambiguous_atom_chem_shift rdf:about="{$base}/ambiguous_atom_chem_shift/{$assigned_chem_shift_list_id_encoded},{$atom_chem_shift_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ambiguous_atom_chem_shift>
      </BMRBo:has_ambiguous_atom_chem_shift>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ambiguous_atom_chem_shiftCategory/BMRBx:ambiguous_atom_chem_shift">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="atom_chem_shift_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_chem_shift_id)&lt;64"><xsl:value-of select="@atom_chem_shift_id"/></xsl:when><xsl:when test="contains(@atom_chem_shift_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_chem_shift_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_chem_shift_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_chem_shift_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_chem_shift_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ambiguous_atom_chem_shift>
      <BMRBo:ambiguous_atom_chem_shift rdf:about="{$base}/ambiguous_atom_chem_shift/{$assigned_chem_shift_list_id_encoded},{$atom_chem_shift_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ambiguous_atom_chem_shift>
      </BMRBo:has_ambiguous_atom_chem_shift>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:angleCategory/BMRBx:angle">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_angle>
      <BMRBo:angle rdf:about="{$base}/angle/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:angle>
      </BMRBo:has_angle>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:angleCategory/BMRBx:angle">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_angle>
      <BMRBo:angle rdf:about="{$base}/angle/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:angle>
      </BMRBo:has_angle>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:angular_order_paramCategory/BMRBx:angular_order_param">
      <xsl:variable name="angular_order_parameter_list_id_truncated"><xsl:choose><xsl:when test="string-length(@angular_order_parameter_list_id)&lt;64"><xsl:value-of select="@angular_order_parameter_list_id"/></xsl:when><xsl:when test="contains(@angular_order_parameter_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@angular_order_parameter_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@angular_order_parameter_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="angular_order_parameter_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($angular_order_parameter_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_angular_order_param>
      <BMRBo:angular_order_param rdf:about="{$base}/angular_order_param/{$angular_order_parameter_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_angular_order_param rdf:resource="{$base}/angular_order_param/{$angular_order_parameter_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_0_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:angular_order_param>
      </BMRBo:has_angular_order_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:angular_order_paramCategory/BMRBx:angular_order_param">
      <xsl:variable name="angular_order_parameter_list_id_truncated"><xsl:choose><xsl:when test="string-length(@angular_order_parameter_list_id)&lt;64"><xsl:value-of select="@angular_order_parameter_list_id"/></xsl:when><xsl:when test="contains(@angular_order_parameter_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@angular_order_parameter_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@angular_order_parameter_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="angular_order_parameter_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($angular_order_parameter_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_angular_order_param>
      <BMRBo:angular_order_param rdf:about="{$base}/angular_order_param/{$angular_order_parameter_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_angular_order_param rdf:resource="{$base}/angular_order_param/{$angular_order_parameter_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_0_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:angular_order_param>
      </BMRBo:has_angular_order_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:angular_order_parameter_listCategory/BMRBx:angular_order_parameter_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_angular_order_parameter_list>
      <BMRBo:angular_order_parameter_list rdf:about="{$base}/angular_order_parameter_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_angular_order_parameter_list rdf:resource="{$base}/angular_order_parameter_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_1_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:angular_order_parameter_list>
      </BMRBo:has_angular_order_parameter_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:angular_order_parameter_listCategory/BMRBx:angular_order_parameter_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_angular_order_parameter_list>
      <BMRBo:angular_order_parameter_list rdf:about="{$base}/angular_order_parameter_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_angular_order_parameter_list rdf:resource="{$base}/angular_order_parameter_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_1_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:angular_order_parameter_list>
      </BMRBo:has_angular_order_parameter_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assemblyCategory/BMRBx:assembly">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly>
      <BMRBo:assembly rdf:about="{$base}/assembly/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_assembly rdf:resource="{$base}/assembly/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_2_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly>
      </BMRBo:has_assembly>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assemblyCategory/BMRBx:assembly">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly>
      <BMRBo:assembly rdf:about="{$base}/assembly/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_assembly rdf:resource="{$base}/assembly/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_2_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly>
      </BMRBo:has_assembly>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_annotation_listCategory/BMRBx:assembly_annotation_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_annotation_list>
      <BMRBo:assembly_annotation_list rdf:about="{$base}/assembly_annotation_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_assembly_annotation_list rdf:resource="{$base}/assembly_annotation_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_3_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_annotation_list>
      </BMRBo:has_assembly_annotation_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_annotation_listCategory/BMRBx:assembly_annotation_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_annotation_list>
      <BMRBo:assembly_annotation_list rdf:about="{$base}/assembly_annotation_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_assembly_annotation_list rdf:resource="{$base}/assembly_annotation_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_3_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_annotation_list>
      </BMRBo:has_assembly_annotation_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_bio_functionCategory/BMRBx:assembly_bio_function">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="biological_function_truncated"><xsl:choose><xsl:when test="string-length(@biological_function)&lt;64"><xsl:value-of select="@biological_function"/></xsl:when><xsl:when test="contains(@biological_function,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@biological_function,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@biological_function,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="biological_function_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($biological_function_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_bio_function>
      <BMRBo:assembly_bio_function rdf:about="{$base}/assembly_bio_function/{$assembly_id_encoded},{$biological_function_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_bio_function>
      </BMRBo:has_assembly_bio_function>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_bio_functionCategory/BMRBx:assembly_bio_function">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="biological_function_truncated"><xsl:choose><xsl:when test="string-length(@biological_function)&lt;64"><xsl:value-of select="@biological_function"/></xsl:when><xsl:when test="contains(@biological_function,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@biological_function,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@biological_function,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="biological_function_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($biological_function_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_bio_function>
      <BMRBo:assembly_bio_function rdf:about="{$base}/assembly_bio_function/{$assembly_id_encoded},{$biological_function_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_bio_function>
      </BMRBo:has_assembly_bio_function>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_citationCategory/BMRBx:assembly_citation">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_citation>
      <BMRBo:assembly_citation rdf:about="{$base}/assembly_citation/{$assembly_id_encoded},{$citation_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_citation>
      </BMRBo:has_assembly_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_citationCategory/BMRBx:assembly_citation">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_citation>
      <BMRBo:assembly_citation rdf:about="{$base}/assembly_citation/{$assembly_id_encoded},{$citation_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_citation>
      </BMRBo:has_assembly_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_common_nameCategory/BMRBx:assembly_common_name">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_common_name>
      <BMRBo:assembly_common_name rdf:about="{$base}/assembly_common_name/{$assembly_id_encoded},{$entry_id_encoded},{$name_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_common_name>
      </BMRBo:has_assembly_common_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_common_nameCategory/BMRBx:assembly_common_name">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_common_name>
      <BMRBo:assembly_common_name rdf:about="{$base}/assembly_common_name/{$assembly_id_encoded},{$entry_id_encoded},{$name_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_common_name>
      </BMRBo:has_assembly_common_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_db_linkCategory/BMRBx:assembly_db_link">
      <xsl:variable name="accession_code_truncated"><xsl:choose><xsl:when test="string-length(@accession_code)&lt;64"><xsl:value-of select="@accession_code"/></xsl:when><xsl:when test="contains(@accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="database_code_truncated"><xsl:choose><xsl:when test="string-length(@database_code)&lt;64"><xsl:value-of select="@database_code"/></xsl:when><xsl:when test="contains(@database_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_db_link>
      <BMRBo:assembly_db_link rdf:about="{$base}/assembly_db_link/{$accession_code_encoded},{$assembly_id_encoded},{$database_code_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_db_link>
      </BMRBo:has_assembly_db_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_db_linkCategory/BMRBx:assembly_db_link">
      <xsl:variable name="accession_code_truncated"><xsl:choose><xsl:when test="string-length(@accession_code)&lt;64"><xsl:value-of select="@accession_code"/></xsl:when><xsl:when test="contains(@accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="database_code_truncated"><xsl:choose><xsl:when test="string-length(@database_code)&lt;64"><xsl:value-of select="@database_code"/></xsl:when><xsl:when test="contains(@database_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_db_link>
      <BMRBo:assembly_db_link rdf:about="{$base}/assembly_db_link/{$accession_code_encoded},{$assembly_id_encoded},{$database_code_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_db_link>
      </BMRBo:has_assembly_db_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_interactionCategory/BMRBx:assembly_interaction">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_interaction>
      <BMRBo:assembly_interaction rdf:about="{$base}/assembly_interaction/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_interaction>
      </BMRBo:has_assembly_interaction>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_interactionCategory/BMRBx:assembly_interaction">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_interaction>
      <BMRBo:assembly_interaction rdf:about="{$base}/assembly_interaction/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_interaction>
      </BMRBo:has_assembly_interaction>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_keywordCategory/BMRBx:assembly_keyword">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keyword_truncated"><xsl:choose><xsl:when test="string-length(@keyword)&lt;64"><xsl:value-of select="@keyword"/></xsl:when><xsl:when test="contains(@keyword,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keyword,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keyword,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keyword_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keyword_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_keyword>
      <BMRBo:assembly_keyword rdf:about="{$base}/assembly_keyword/{$assembly_id_encoded},{$entry_id_encoded},{$keyword_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_keyword>
      </BMRBo:has_assembly_keyword>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_keywordCategory/BMRBx:assembly_keyword">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keyword_truncated"><xsl:choose><xsl:when test="string-length(@keyword)&lt;64"><xsl:value-of select="@keyword"/></xsl:when><xsl:when test="contains(@keyword,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keyword,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keyword,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keyword_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keyword_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_keyword>
      <BMRBo:assembly_keyword rdf:about="{$base}/assembly_keyword/{$assembly_id_encoded},{$entry_id_encoded},{$keyword_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_keyword>
      </BMRBo:has_assembly_keyword>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_segmentCategory/BMRBx:assembly_segment">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_segment>
      <BMRBo:assembly_segment rdf:about="{$base}/assembly_segment/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_segment>
      </BMRBo:has_assembly_segment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_segmentCategory/BMRBx:assembly_segment">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_segment>
      <BMRBo:assembly_segment rdf:about="{$base}/assembly_segment/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_segment>
      </BMRBo:has_assembly_segment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_segment_descriptionCategory/BMRBx:assembly_segment_description">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="assembly_segment_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_segment_id)&lt;64"><xsl:value-of select="@assembly_segment_id"/></xsl:when><xsl:when test="contains(@assembly_segment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_segment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_segment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_segment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_segment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_segment_description>
      <BMRBo:assembly_segment_description rdf:about="{$base}/assembly_segment_description/{$assembly_id_encoded},{$assembly_segment_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_segment_description>
      </BMRBo:has_assembly_segment_description>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_segment_descriptionCategory/BMRBx:assembly_segment_description">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="assembly_segment_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_segment_id)&lt;64"><xsl:value-of select="@assembly_segment_id"/></xsl:when><xsl:when test="contains(@assembly_segment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_segment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_segment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_segment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_segment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_segment_description>
      <BMRBo:assembly_segment_description rdf:about="{$base}/assembly_segment_description/{$assembly_id_encoded},{$assembly_segment_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_segment_description>
      </BMRBo:has_assembly_segment_description>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_subsystemCategory/BMRBx:assembly_subsystem">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_subsystem>
      <BMRBo:assembly_subsystem rdf:about="{$base}/assembly_subsystem/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_assembly_subsystem rdf:resource="{$base}/assembly_subsystem/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_4_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_subsystem>
      </BMRBo:has_assembly_subsystem>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_subsystemCategory/BMRBx:assembly_subsystem">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_subsystem>
      <BMRBo:assembly_subsystem rdf:about="{$base}/assembly_subsystem/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_assembly_subsystem rdf:resource="{$base}/assembly_subsystem/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_4_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_subsystem>
      </BMRBo:has_assembly_subsystem>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_systematic_nameCategory/BMRBx:assembly_systematic_name">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="naming_system_truncated"><xsl:choose><xsl:when test="string-length(@naming_system)&lt;64"><xsl:value-of select="@naming_system"/></xsl:when><xsl:when test="contains(@naming_system,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@naming_system,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@naming_system,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="naming_system_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($naming_system_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_systematic_name>
      <BMRBo:assembly_systematic_name rdf:about="{$base}/assembly_systematic_name/{$assembly_id_encoded},{$entry_id_encoded},{$naming_system_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_systematic_name>
      </BMRBo:has_assembly_systematic_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_systematic_nameCategory/BMRBx:assembly_systematic_name">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="naming_system_truncated"><xsl:choose><xsl:when test="string-length(@naming_system)&lt;64"><xsl:value-of select="@naming_system"/></xsl:when><xsl:when test="contains(@naming_system,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@naming_system,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@naming_system,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="naming_system_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($naming_system_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_systematic_name>
      <BMRBo:assembly_systematic_name rdf:about="{$base}/assembly_systematic_name/{$assembly_id_encoded},{$entry_id_encoded},{$naming_system_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_systematic_name>
      </BMRBo:has_assembly_systematic_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_typeCategory/BMRBx:assembly_type">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_type>
      <BMRBo:assembly_type rdf:about="{$base}/assembly_type/{$assembly_id_encoded},{$entry_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_type>
      </BMRBo:has_assembly_type>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assembly_typeCategory/BMRBx:assembly_type">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assembly_type>
      <BMRBo:assembly_type rdf:about="{$base}/assembly_type/{$assembly_id_encoded},{$entry_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assembly_type>
      </BMRBo:has_assembly_type>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assigned_chem_shift_listCategory/BMRBx:assigned_chem_shift_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assigned_chem_shift_list>
      <BMRBo:assigned_chem_shift_list rdf:about="{$base}/assigned_chem_shift_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_assigned_chem_shift_list rdf:resource="{$base}/assigned_chem_shift_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_5_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assigned_chem_shift_list>
      </BMRBo:has_assigned_chem_shift_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assigned_chem_shift_listCategory/BMRBx:assigned_chem_shift_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assigned_chem_shift_list>
      <BMRBo:assigned_chem_shift_list rdf:about="{$base}/assigned_chem_shift_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_assigned_chem_shift_list rdf:resource="{$base}/assigned_chem_shift_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_5_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assigned_chem_shift_list>
      </BMRBo:has_assigned_chem_shift_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assigned_peak_chem_shiftCategory/BMRBx:assigned_peak_chem_shift">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="peak_id_truncated"><xsl:choose><xsl:when test="string-length(@peak_id)&lt;64"><xsl:value-of select="@peak_id"/></xsl:when><xsl:when test="contains(@peak_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@peak_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@peak_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="peak_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($peak_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_dim_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_dim_id)&lt;64"><xsl:value-of select="@spectral_dim_id"/></xsl:when><xsl:when test="contains(@spectral_dim_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_dim_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_dim_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_dim_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_dim_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assigned_peak_chem_shift>
      <BMRBo:assigned_peak_chem_shift rdf:about="{$base}/assigned_peak_chem_shift/{$entry_id_encoded},{$peak_id_encoded},{$spectral_dim_id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assigned_peak_chem_shift>
      </BMRBo:has_assigned_peak_chem_shift>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assigned_peak_chem_shiftCategory/BMRBx:assigned_peak_chem_shift">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="peak_id_truncated"><xsl:choose><xsl:when test="string-length(@peak_id)&lt;64"><xsl:value-of select="@peak_id"/></xsl:when><xsl:when test="contains(@peak_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@peak_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@peak_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="peak_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($peak_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_dim_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_dim_id)&lt;64"><xsl:value-of select="@spectral_dim_id"/></xsl:when><xsl:when test="contains(@spectral_dim_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_dim_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_dim_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_dim_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_dim_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assigned_peak_chem_shift>
      <BMRBo:assigned_peak_chem_shift rdf:about="{$base}/assigned_peak_chem_shift/{$entry_id_encoded},{$peak_id_encoded},{$spectral_dim_id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assigned_peak_chem_shift>
      </BMRBo:has_assigned_peak_chem_shift>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assigned_spectral_transitionCategory/BMRBx:assigned_spectral_transition">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_dim_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_dim_id)&lt;64"><xsl:value-of select="@spectral_dim_id"/></xsl:when><xsl:when test="contains(@spectral_dim_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_dim_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_dim_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_dim_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_dim_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_transition_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_transition_id)&lt;64"><xsl:value-of select="@spectral_transition_id"/></xsl:when><xsl:when test="contains(@spectral_transition_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_transition_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_transition_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_transition_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_transition_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assigned_spectral_transition>
      <BMRBo:assigned_spectral_transition rdf:about="{$base}/assigned_spectral_transition/{$entry_id_encoded},{$spectral_dim_id_encoded},{$spectral_peak_list_id_encoded},{$spectral_transition_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assigned_spectral_transition>
      </BMRBo:has_assigned_spectral_transition>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:assigned_spectral_transitionCategory/BMRBx:assigned_spectral_transition">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_dim_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_dim_id)&lt;64"><xsl:value-of select="@spectral_dim_id"/></xsl:when><xsl:when test="contains(@spectral_dim_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_dim_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_dim_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_dim_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_dim_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_transition_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_transition_id)&lt;64"><xsl:value-of select="@spectral_transition_id"/></xsl:when><xsl:when test="contains(@spectral_transition_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_transition_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_transition_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_transition_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_transition_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_assigned_spectral_transition>
      <BMRBo:assigned_spectral_transition rdf:about="{$base}/assigned_spectral_transition/{$entry_id_encoded},{$spectral_dim_id_encoded},{$spectral_peak_list_id_encoded},{$spectral_transition_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:assigned_spectral_transition>
      </BMRBo:has_assigned_spectral_transition>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:atomCategory/BMRBx:atom">
      <xsl:variable name="assembly_atom_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_atom_id)&lt;64"><xsl:value-of select="@assembly_atom_id"/></xsl:when><xsl:when test="contains(@assembly_atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_atom>
      <BMRBo:atom rdf:about="{$base}/atom/{$assembly_atom_id_encoded},{$assembly_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:atom>
      </BMRBo:has_atom>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:atomCategory/BMRBx:atom">
      <xsl:variable name="assembly_atom_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_atom_id)&lt;64"><xsl:value-of select="@assembly_atom_id"/></xsl:when><xsl:when test="contains(@assembly_atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_atom>
      <BMRBo:atom rdf:about="{$base}/atom/{$assembly_atom_id_encoded},{$assembly_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:atom>
      </BMRBo:has_atom>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:atom_chem_shiftCategory/BMRBx:atom_chem_shift">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_atom_chem_shift>
      <BMRBo:atom_chem_shift rdf:about="{$base}/atom_chem_shift/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:atom_chem_shift>
      </BMRBo:has_atom_chem_shift>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:atom_chem_shiftCategory/BMRBx:atom_chem_shift">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_atom_chem_shift>
      <BMRBo:atom_chem_shift rdf:about="{$base}/atom_chem_shift/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:atom_chem_shift>
      </BMRBo:has_atom_chem_shift>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:atom_nomenclatureCategory/BMRBx:atom_nomenclature">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_atom_nomenclature>
      <BMRBo:atom_nomenclature rdf:about="{$base}/atom_nomenclature/{$atom_id_encoded},{$comp_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:atom_nomenclature>
      </BMRBo:has_atom_nomenclature>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:atom_nomenclatureCategory/BMRBx:atom_nomenclature">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_atom_nomenclature>
      <BMRBo:atom_nomenclature rdf:about="{$base}/atom_nomenclature/{$atom_id_encoded},{$comp_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:atom_nomenclature>
      </BMRBo:has_atom_nomenclature>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:atom_siteCategory/BMRBx:atom_site">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_atom_site>
      <BMRBo:atom_site rdf:about="{$base}/atom_site/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_atom_site rdf:resource="{$base}/atom_site/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_6_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:atom_site>
      </BMRBo:has_atom_site>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:atom_sites_footnoteCategory/BMRBx:atom_sites_footnote">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="footnote_id_truncated"><xsl:choose><xsl:when test="string-length(@footnote_id)&lt;64"><xsl:value-of select="@footnote_id"/></xsl:when><xsl:when test="contains(@footnote_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@footnote_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@footnote_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="footnote_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($footnote_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_atom_sites_footnote>
      <BMRBo:atom_sites_footnote rdf:about="{$base}/atom_sites_footnote/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$footnote_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_atom_sites_footnote rdf:resource="{$base}/atom_sites_footnote/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$footnote_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_7_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:atom_sites_footnote>
      </BMRBo:has_atom_sites_footnote>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:atom_sites_footnoteCategory/BMRBx:atom_sites_footnote">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="footnote_id_truncated"><xsl:choose><xsl:when test="string-length(@footnote_id)&lt;64"><xsl:value-of select="@footnote_id"/></xsl:when><xsl:when test="contains(@footnote_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@footnote_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@footnote_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="footnote_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($footnote_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_atom_sites_footnote>
      <BMRBo:atom_sites_footnote rdf:about="{$base}/atom_sites_footnote/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$footnote_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_atom_sites_footnote rdf:resource="{$base}/atom_sites_footnote/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$footnote_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_7_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:atom_sites_footnote>
      </BMRBo:has_atom_sites_footnote>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:atom_typeCategory/BMRBx:atom_type">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_atom_type>
      <BMRBo:atom_type rdf:about="{$base}/atom_type/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:atom_type>
      </BMRBo:has_atom_type>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:atom_typeCategory/BMRBx:atom_type">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_atom_type>
      <BMRBo:atom_type rdf:about="{$base}/atom_type/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:atom_type>
      </BMRBo:has_atom_type>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:author_annotationCategory/BMRBx:author_annotation">
      <xsl:variable name="assembly_annotation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_annotation_list_id)&lt;64"><xsl:value-of select="@assembly_annotation_list_id"/></xsl:when><xsl:when test="contains(@assembly_annotation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_annotation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_annotation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_annotation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_annotation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_author_annotation>
      <BMRBo:author_annotation rdf:about="{$base}/author_annotation/{$assembly_annotation_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:author_annotation>
      </BMRBo:has_author_annotation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:author_annotationCategory/BMRBx:author_annotation">
      <xsl:variable name="assembly_annotation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_annotation_list_id)&lt;64"><xsl:value-of select="@assembly_annotation_list_id"/></xsl:when><xsl:when test="contains(@assembly_annotation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_annotation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_annotation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_annotation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_annotation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_author_annotation>
      <BMRBo:author_annotation rdf:about="{$base}/author_annotation/{$assembly_annotation_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:author_annotation>
      </BMRBo:has_author_annotation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:auto_relaxationCategory/BMRBx:auto_relaxation">
      <xsl:variable name="auto_relaxation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@auto_relaxation_list_id)&lt;64"><xsl:value-of select="@auto_relaxation_list_id"/></xsl:when><xsl:when test="contains(@auto_relaxation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@auto_relaxation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@auto_relaxation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="auto_relaxation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($auto_relaxation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_auto_relaxation>
      <BMRBo:auto_relaxation rdf:about="{$base}/auto_relaxation/{$auto_relaxation_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_auto_relaxation rdf:resource="{$base}/auto_relaxation/{$auto_relaxation_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_8_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:auto_relaxation>
      </BMRBo:has_auto_relaxation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:auto_relaxationCategory/BMRBx:auto_relaxation">
      <xsl:variable name="auto_relaxation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@auto_relaxation_list_id)&lt;64"><xsl:value-of select="@auto_relaxation_list_id"/></xsl:when><xsl:when test="contains(@auto_relaxation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@auto_relaxation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@auto_relaxation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="auto_relaxation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($auto_relaxation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_auto_relaxation>
      <BMRBo:auto_relaxation rdf:about="{$base}/auto_relaxation/{$auto_relaxation_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_auto_relaxation rdf:resource="{$base}/auto_relaxation/{$auto_relaxation_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_8_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:auto_relaxation>
      </BMRBo:has_auto_relaxation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:auto_relaxation_experimentCategory/BMRBx:auto_relaxation_experiment">
      <xsl:variable name="auto_relaxation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@auto_relaxation_list_id)&lt;64"><xsl:value-of select="@auto_relaxation_list_id"/></xsl:when><xsl:when test="contains(@auto_relaxation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@auto_relaxation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@auto_relaxation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="auto_relaxation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($auto_relaxation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_auto_relaxation_experiment>
      <BMRBo:auto_relaxation_experiment rdf:about="{$base}/auto_relaxation_experiment/{$auto_relaxation_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_auto_relaxation_experiment rdf:resource="{$base}/auto_relaxation_experiment/{$auto_relaxation_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_9_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:auto_relaxation_experiment>
      </BMRBo:has_auto_relaxation_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:auto_relaxation_experimentCategory/BMRBx:auto_relaxation_experiment">
      <xsl:variable name="auto_relaxation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@auto_relaxation_list_id)&lt;64"><xsl:value-of select="@auto_relaxation_list_id"/></xsl:when><xsl:when test="contains(@auto_relaxation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@auto_relaxation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@auto_relaxation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="auto_relaxation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($auto_relaxation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_auto_relaxation_experiment>
      <BMRBo:auto_relaxation_experiment rdf:about="{$base}/auto_relaxation_experiment/{$auto_relaxation_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_auto_relaxation_experiment rdf:resource="{$base}/auto_relaxation_experiment/{$auto_relaxation_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_9_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:auto_relaxation_experiment>
      </BMRBo:has_auto_relaxation_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:auto_relaxation_listCategory/BMRBx:auto_relaxation_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_auto_relaxation_list>
      <BMRBo:auto_relaxation_list rdf:about="{$base}/auto_relaxation_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_auto_relaxation_list rdf:resource="{$base}/auto_relaxation_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_10_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:auto_relaxation_list>
      </BMRBo:has_auto_relaxation_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:auto_relaxation_listCategory/BMRBx:auto_relaxation_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_auto_relaxation_list>
      <BMRBo:auto_relaxation_list rdf:about="{$base}/auto_relaxation_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_auto_relaxation_list rdf:resource="{$base}/auto_relaxation_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_10_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:auto_relaxation_list>
      </BMRBo:has_auto_relaxation_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:auto_relaxation_softwareCategory/BMRBx:auto_relaxation_software">
      <xsl:variable name="auto_relaxation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@auto_relaxation_list_id)&lt;64"><xsl:value-of select="@auto_relaxation_list_id"/></xsl:when><xsl:when test="contains(@auto_relaxation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@auto_relaxation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@auto_relaxation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="auto_relaxation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($auto_relaxation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_auto_relaxation_software>
      <BMRBo:auto_relaxation_software rdf:about="{$base}/auto_relaxation_software/{$auto_relaxation_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_auto_relaxation_software rdf:resource="{$base}/auto_relaxation_software/{$auto_relaxation_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_11_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:auto_relaxation_software>
      </BMRBo:has_auto_relaxation_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:auto_relaxation_softwareCategory/BMRBx:auto_relaxation_software">
      <xsl:variable name="auto_relaxation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@auto_relaxation_list_id)&lt;64"><xsl:value-of select="@auto_relaxation_list_id"/></xsl:when><xsl:when test="contains(@auto_relaxation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@auto_relaxation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@auto_relaxation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="auto_relaxation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($auto_relaxation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_auto_relaxation_software>
      <BMRBo:auto_relaxation_software rdf:about="{$base}/auto_relaxation_software/{$auto_relaxation_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_auto_relaxation_software rdf:resource="{$base}/auto_relaxation_software/{$auto_relaxation_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_11_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:auto_relaxation_software>
      </BMRBo:has_auto_relaxation_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:auxiliary_filesCategory/BMRBx:auxiliary_files">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_auxiliary_files>
      <BMRBo:auxiliary_files rdf:about="{$base}/auxiliary_files/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_auxiliary_files rdf:resource="{$base}/auxiliary_files/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_12_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:auxiliary_files>
      </BMRBo:has_auxiliary_files>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:auxiliary_filesCategory/BMRBx:auxiliary_files">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_auxiliary_files>
      <BMRBo:auxiliary_files rdf:about="{$base}/auxiliary_files/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_auxiliary_files rdf:resource="{$base}/auxiliary_files/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_12_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:auxiliary_files>
      </BMRBo:has_auxiliary_files>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_experimentCategory/BMRBx:binding_experiment">
      <xsl:variable name="binding_value_list_id_truncated"><xsl:choose><xsl:when test="string-length(@binding_value_list_id)&lt;64"><xsl:value-of select="@binding_value_list_id"/></xsl:when><xsl:when test="contains(@binding_value_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@binding_value_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@binding_value_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="binding_value_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($binding_value_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_experiment>
      <BMRBo:binding_experiment rdf:about="{$base}/binding_experiment/{$binding_value_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_experiment rdf:resource="{$base}/binding_experiment/{$binding_value_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_13_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_experiment>
      </BMRBo:has_binding_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_experimentCategory/BMRBx:binding_experiment">
      <xsl:variable name="binding_value_list_id_truncated"><xsl:choose><xsl:when test="string-length(@binding_value_list_id)&lt;64"><xsl:value-of select="@binding_value_list_id"/></xsl:when><xsl:when test="contains(@binding_value_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@binding_value_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@binding_value_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="binding_value_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($binding_value_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_experiment>
      <BMRBo:binding_experiment rdf:about="{$base}/binding_experiment/{$binding_value_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_experiment rdf:resource="{$base}/binding_experiment/{$binding_value_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_13_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_experiment>
      </BMRBo:has_binding_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_paramCategory/BMRBx:binding_param">
      <xsl:variable name="binding_param_list_id_truncated"><xsl:choose><xsl:when test="string-length(@binding_param_list_id)&lt;64"><xsl:value-of select="@binding_param_list_id"/></xsl:when><xsl:when test="contains(@binding_param_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@binding_param_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@binding_param_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="binding_param_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($binding_param_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_param>
      <BMRBo:binding_param rdf:about="{$base}/binding_param/{$binding_param_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_param rdf:resource="{$base}/binding_param/{$binding_param_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_14_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_param>
      </BMRBo:has_binding_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_paramCategory/BMRBx:binding_param">
      <xsl:variable name="binding_param_list_id_truncated"><xsl:choose><xsl:when test="string-length(@binding_param_list_id)&lt;64"><xsl:value-of select="@binding_param_list_id"/></xsl:when><xsl:when test="contains(@binding_param_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@binding_param_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@binding_param_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="binding_param_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($binding_param_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_param>
      <BMRBo:binding_param rdf:about="{$base}/binding_param/{$binding_param_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_param rdf:resource="{$base}/binding_param/{$binding_param_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_14_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_param>
      </BMRBo:has_binding_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_param_listCategory/BMRBx:binding_param_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_param_list>
      <BMRBo:binding_param_list rdf:about="{$base}/binding_param_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_param_list rdf:resource="{$base}/binding_param_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_15_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_param_list>
      </BMRBo:has_binding_param_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_param_listCategory/BMRBx:binding_param_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_param_list>
      <BMRBo:binding_param_list rdf:about="{$base}/binding_param_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_param_list rdf:resource="{$base}/binding_param_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_15_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_param_list>
      </BMRBo:has_binding_param_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_partnersCategory/BMRBx:binding_partners">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="binding_value_list_id_truncated"><xsl:choose><xsl:when test="string-length(@binding_value_list_id)&lt;64"><xsl:value-of select="@binding_value_list_id"/></xsl:when><xsl:when test="contains(@binding_value_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@binding_value_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@binding_value_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="binding_value_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($binding_value_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_partners>
      <BMRBo:binding_partners rdf:about="{$base}/binding_partners/{$assembly_id_encoded},{$binding_value_list_id_encoded},{$entity_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_partners rdf:resource="{$base}/binding_partners/{$assembly_id_encoded},{$binding_value_list_id_encoded},{$entity_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_16_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_partners>
      </BMRBo:has_binding_partners>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_partnersCategory/BMRBx:binding_partners">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="binding_value_list_id_truncated"><xsl:choose><xsl:when test="string-length(@binding_value_list_id)&lt;64"><xsl:value-of select="@binding_value_list_id"/></xsl:when><xsl:when test="contains(@binding_value_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@binding_value_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@binding_value_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="binding_value_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($binding_value_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_partners>
      <BMRBo:binding_partners rdf:about="{$base}/binding_partners/{$assembly_id_encoded},{$binding_value_list_id_encoded},{$entity_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_partners rdf:resource="{$base}/binding_partners/{$assembly_id_encoded},{$binding_value_list_id_encoded},{$entity_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_16_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_partners>
      </BMRBo:has_binding_partners>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_resultCategory/BMRBx:binding_result">
      <xsl:variable name="binding_value_list_id_truncated"><xsl:choose><xsl:when test="string-length(@binding_value_list_id)&lt;64"><xsl:value-of select="@binding_value_list_id"/></xsl:when><xsl:when test="contains(@binding_value_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@binding_value_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@binding_value_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="binding_value_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($binding_value_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_result>
      <BMRBo:binding_result rdf:about="{$base}/binding_result/{$binding_value_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_result rdf:resource="{$base}/binding_result/{$binding_value_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_17_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_result>
      </BMRBo:has_binding_result>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_resultCategory/BMRBx:binding_result">
      <xsl:variable name="binding_value_list_id_truncated"><xsl:choose><xsl:when test="string-length(@binding_value_list_id)&lt;64"><xsl:value-of select="@binding_value_list_id"/></xsl:when><xsl:when test="contains(@binding_value_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@binding_value_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@binding_value_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="binding_value_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($binding_value_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_result>
      <BMRBo:binding_result rdf:about="{$base}/binding_result/{$binding_value_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_result rdf:resource="{$base}/binding_result/{$binding_value_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_17_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_result>
      </BMRBo:has_binding_result>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_softwareCategory/BMRBx:binding_software">
      <xsl:variable name="binding_value_list_id_truncated"><xsl:choose><xsl:when test="string-length(@binding_value_list_id)&lt;64"><xsl:value-of select="@binding_value_list_id"/></xsl:when><xsl:when test="contains(@binding_value_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@binding_value_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@binding_value_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="binding_value_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($binding_value_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_software>
      <BMRBo:binding_software rdf:about="{$base}/binding_software/{$binding_value_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_software rdf:resource="{$base}/binding_software/{$binding_value_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_18_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_software>
      </BMRBo:has_binding_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_softwareCategory/BMRBx:binding_software">
      <xsl:variable name="binding_value_list_id_truncated"><xsl:choose><xsl:when test="string-length(@binding_value_list_id)&lt;64"><xsl:value-of select="@binding_value_list_id"/></xsl:when><xsl:when test="contains(@binding_value_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@binding_value_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@binding_value_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="binding_value_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($binding_value_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_software>
      <BMRBo:binding_software rdf:about="{$base}/binding_software/{$binding_value_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_software rdf:resource="{$base}/binding_software/{$binding_value_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_18_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_software>
      </BMRBo:has_binding_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_value_listCategory/BMRBx:binding_value_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_value_list>
      <BMRBo:binding_value_list rdf:about="{$base}/binding_value_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_value_list rdf:resource="{$base}/binding_value_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_19_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_value_list>
      </BMRBo:has_binding_value_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:binding_value_listCategory/BMRBx:binding_value_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_binding_value_list>
      <BMRBo:binding_value_list rdf:about="{$base}/binding_value_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_binding_value_list rdf:resource="{$base}/binding_value_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_19_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:binding_value_list>
      </BMRBo:has_binding_value_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:bondCategory/BMRBx:bond">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_bond>
      <BMRBo:bond rdf:about="{$base}/bond/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:bond>
      </BMRBo:has_bond>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:bondCategory/BMRBx:bond">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_bond>
      <BMRBo:bond rdf:about="{$base}/bond/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:bond>
      </BMRBo:has_bond>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:bond_annotationCategory/BMRBx:bond_annotation">
      <xsl:variable name="bond_annotation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@bond_annotation_list_id)&lt;64"><xsl:value-of select="@bond_annotation_list_id"/></xsl:when><xsl:when test="contains(@bond_annotation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@bond_annotation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@bond_annotation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="bond_annotation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($bond_annotation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_bond_annotation>
      <BMRBo:bond_annotation rdf:about="{$base}/bond_annotation/{$bond_annotation_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_bond_annotation rdf:resource="{$base}/bond_annotation/{$bond_annotation_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_20_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:bond_annotation>
      </BMRBo:has_bond_annotation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:bond_annotationCategory/BMRBx:bond_annotation">
      <xsl:variable name="bond_annotation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@bond_annotation_list_id)&lt;64"><xsl:value-of select="@bond_annotation_list_id"/></xsl:when><xsl:when test="contains(@bond_annotation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@bond_annotation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@bond_annotation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="bond_annotation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($bond_annotation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_bond_annotation>
      <BMRBo:bond_annotation rdf:about="{$base}/bond_annotation/{$bond_annotation_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_bond_annotation rdf:resource="{$base}/bond_annotation/{$bond_annotation_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_20_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:bond_annotation>
      </BMRBo:has_bond_annotation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:bond_annotation_listCategory/BMRBx:bond_annotation_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_bond_annotation_list>
      <BMRBo:bond_annotation_list rdf:about="{$base}/bond_annotation_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_bond_annotation_list rdf:resource="{$base}/bond_annotation_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_21_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:bond_annotation_list>
      </BMRBo:has_bond_annotation_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:bond_annotation_listCategory/BMRBx:bond_annotation_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_bond_annotation_list>
      <BMRBo:bond_annotation_list rdf:about="{$base}/bond_annotation_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_bond_annotation_list rdf:resource="{$base}/bond_annotation_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_21_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:bond_annotation_list>
      </BMRBo:has_bond_annotation_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:bond_observed_conformerCategory/BMRBx:bond_observed_conformer">
      <xsl:variable name="atom_site_model_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_site_model_id)&lt;64"><xsl:value-of select="@atom_site_model_id"/></xsl:when><xsl:when test="contains(@atom_site_model_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_site_model_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_site_model_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_site_model_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_site_model_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="bond_annotation_id_truncated"><xsl:choose><xsl:when test="string-length(@bond_annotation_id)&lt;64"><xsl:value-of select="@bond_annotation_id"/></xsl:when><xsl:when test="contains(@bond_annotation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@bond_annotation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@bond_annotation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="bond_annotation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($bond_annotation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="bond_annotation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@bond_annotation_list_id)&lt;64"><xsl:value-of select="@bond_annotation_list_id"/></xsl:when><xsl:when test="contains(@bond_annotation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@bond_annotation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@bond_annotation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="bond_annotation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($bond_annotation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_bond_observed_conformer>
      <BMRBo:bond_observed_conformer rdf:about="{$base}/bond_observed_conformer/{$atom_site_model_id_encoded},{$bond_annotation_id_encoded},{$bond_annotation_list_id_encoded},{$conformer_family_coord_set_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_bond_observed_conformer rdf:resource="{$base}/bond_observed_conformer/{$atom_site_model_id_encoded},{$bond_annotation_id_encoded},{$bond_annotation_list_id_encoded},{$conformer_family_coord_set_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_22_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:bond_observed_conformer>
      </BMRBo:has_bond_observed_conformer>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:bond_observed_conformerCategory/BMRBx:bond_observed_conformer">
      <xsl:variable name="atom_site_model_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_site_model_id)&lt;64"><xsl:value-of select="@atom_site_model_id"/></xsl:when><xsl:when test="contains(@atom_site_model_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_site_model_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_site_model_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_site_model_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_site_model_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="bond_annotation_id_truncated"><xsl:choose><xsl:when test="string-length(@bond_annotation_id)&lt;64"><xsl:value-of select="@bond_annotation_id"/></xsl:when><xsl:when test="contains(@bond_annotation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@bond_annotation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@bond_annotation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="bond_annotation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($bond_annotation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="bond_annotation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@bond_annotation_list_id)&lt;64"><xsl:value-of select="@bond_annotation_list_id"/></xsl:when><xsl:when test="contains(@bond_annotation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@bond_annotation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@bond_annotation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="bond_annotation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($bond_annotation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_bond_observed_conformer>
      <BMRBo:bond_observed_conformer rdf:about="{$base}/bond_observed_conformer/{$atom_site_model_id_encoded},{$bond_annotation_id_encoded},{$bond_annotation_list_id_encoded},{$conformer_family_coord_set_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_bond_observed_conformer rdf:resource="{$base}/bond_observed_conformer/{$atom_site_model_id_encoded},{$bond_annotation_id_encoded},{$bond_annotation_list_id_encoded},{$conformer_family_coord_set_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_22_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:bond_observed_conformer>
      </BMRBo:has_bond_observed_conformer>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ca_cb_constraintCategory/BMRBx:ca_cb_constraint">
      <xsl:variable name="ca_cb_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ca_cb_constraint_list_id)&lt;64"><xsl:value-of select="@ca_cb_constraint_list_id"/></xsl:when><xsl:when test="contains(@ca_cb_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ca_cb_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ca_cb_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ca_cb_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ca_cb_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ca_cb_constraint>
      <BMRBo:ca_cb_constraint rdf:about="{$base}/ca_cb_constraint/{$ca_cb_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ca_cb_constraint rdf:resource="{$base}/ca_cb_constraint/{$ca_cb_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_23_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ca_cb_constraint>
      </BMRBo:has_ca_cb_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ca_cb_constraintCategory/BMRBx:ca_cb_constraint">
      <xsl:variable name="ca_cb_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ca_cb_constraint_list_id)&lt;64"><xsl:value-of select="@ca_cb_constraint_list_id"/></xsl:when><xsl:when test="contains(@ca_cb_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ca_cb_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ca_cb_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ca_cb_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ca_cb_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ca_cb_constraint>
      <BMRBo:ca_cb_constraint rdf:about="{$base}/ca_cb_constraint/{$ca_cb_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ca_cb_constraint rdf:resource="{$base}/ca_cb_constraint/{$ca_cb_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_23_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ca_cb_constraint>
      </BMRBo:has_ca_cb_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ca_cb_constraint_exptCategory/BMRBx:ca_cb_constraint_expt">
      <xsl:variable name="ca_cb_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ca_cb_constraint_list_id)&lt;64"><xsl:value-of select="@ca_cb_constraint_list_id"/></xsl:when><xsl:when test="contains(@ca_cb_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ca_cb_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ca_cb_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ca_cb_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ca_cb_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ca_cb_constraint_expt>
      <BMRBo:ca_cb_constraint_expt rdf:about="{$base}/ca_cb_constraint_expt/{$ca_cb_constraint_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ca_cb_constraint_expt rdf:resource="{$base}/ca_cb_constraint_expt/{$ca_cb_constraint_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_24_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ca_cb_constraint_expt>
      </BMRBo:has_ca_cb_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ca_cb_constraint_exptCategory/BMRBx:ca_cb_constraint_expt">
      <xsl:variable name="ca_cb_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ca_cb_constraint_list_id)&lt;64"><xsl:value-of select="@ca_cb_constraint_list_id"/></xsl:when><xsl:when test="contains(@ca_cb_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ca_cb_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ca_cb_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ca_cb_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ca_cb_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ca_cb_constraint_expt>
      <BMRBo:ca_cb_constraint_expt rdf:about="{$base}/ca_cb_constraint_expt/{$ca_cb_constraint_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ca_cb_constraint_expt rdf:resource="{$base}/ca_cb_constraint_expt/{$ca_cb_constraint_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_24_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ca_cb_constraint_expt>
      </BMRBo:has_ca_cb_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ca_cb_constraint_listCategory/BMRBx:ca_cb_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ca_cb_constraint_list>
      <BMRBo:ca_cb_constraint_list rdf:about="{$base}/ca_cb_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ca_cb_constraint_list rdf:resource="{$base}/ca_cb_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_25_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ca_cb_constraint_list>
      </BMRBo:has_ca_cb_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ca_cb_constraint_listCategory/BMRBx:ca_cb_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ca_cb_constraint_list>
      <BMRBo:ca_cb_constraint_list rdf:about="{$base}/ca_cb_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ca_cb_constraint_list rdf:resource="{$base}/ca_cb_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_25_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ca_cb_constraint_list>
      </BMRBo:has_ca_cb_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ca_cb_constraint_softwareCategory/BMRBx:ca_cb_constraint_software">
      <xsl:variable name="ca_cb_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ca_cb_constraint_list_id)&lt;64"><xsl:value-of select="@ca_cb_constraint_list_id"/></xsl:when><xsl:when test="contains(@ca_cb_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ca_cb_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ca_cb_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ca_cb_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ca_cb_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ca_cb_constraint_software>
      <BMRBo:ca_cb_constraint_software rdf:about="{$base}/ca_cb_constraint_software/{$ca_cb_constraint_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ca_cb_constraint_software rdf:resource="{$base}/ca_cb_constraint_software/{$ca_cb_constraint_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_26_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ca_cb_constraint_software>
      </BMRBo:has_ca_cb_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ca_cb_constraint_softwareCategory/BMRBx:ca_cb_constraint_software">
      <xsl:variable name="ca_cb_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ca_cb_constraint_list_id)&lt;64"><xsl:value-of select="@ca_cb_constraint_list_id"/></xsl:when><xsl:when test="contains(@ca_cb_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ca_cb_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ca_cb_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ca_cb_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ca_cb_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ca_cb_constraint_software>
      <BMRBo:ca_cb_constraint_software rdf:about="{$base}/ca_cb_constraint_software/{$ca_cb_constraint_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ca_cb_constraint_software rdf:resource="{$base}/ca_cb_constraint_software/{$ca_cb_constraint_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_26_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ca_cb_constraint_software>
      </BMRBo:has_ca_cb_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:characteristicCategory/BMRBx:characteristic">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_characteristic>
      <BMRBo:characteristic rdf:about="{$base}/characteristic/{$comp_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:characteristic>
      </BMRBo:has_characteristic>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:characteristicCategory/BMRBx:characteristic">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_characteristic>
      <BMRBo:characteristic rdf:about="{$base}/characteristic/{$comp_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:characteristic>
      </BMRBo:has_characteristic>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_compCategory/BMRBx:chem_comp">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp>
      <BMRBo:chem_comp rdf:about="{$base}/chem_comp/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_comp rdf:resource="{$base}/chem_comp/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_27_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp>
      </BMRBo:has_chem_comp>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_compCategory/BMRBx:chem_comp">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp>
      <BMRBo:chem_comp rdf:about="{$base}/chem_comp/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_comp rdf:resource="{$base}/chem_comp/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_27_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp>
      </BMRBo:has_chem_comp>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_angleCategory/BMRBx:chem_comp_angle">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_angle>
      <BMRBo:chem_comp_angle rdf:about="{$base}/chem_comp_angle/{$comp_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_angle>
      </BMRBo:has_chem_comp_angle>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_angleCategory/BMRBx:chem_comp_angle">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_angle>
      <BMRBo:chem_comp_angle rdf:about="{$base}/chem_comp_angle/{$comp_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_angle>
      </BMRBo:has_chem_comp_angle>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_assemblyCategory/BMRBx:chem_comp_assembly">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_assembly>
      <BMRBo:chem_comp_assembly rdf:about="{$base}/chem_comp_assembly/{$assembly_id_encoded},{$comp_index_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_assembly>
      </BMRBo:has_chem_comp_assembly>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_assemblyCategory/BMRBx:chem_comp_assembly">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_assembly>
      <BMRBo:chem_comp_assembly rdf:about="{$base}/chem_comp_assembly/{$assembly_id_encoded},{$comp_index_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_assembly>
      </BMRBo:has_chem_comp_assembly>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_atomCategory/BMRBx:chem_comp_atom">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_atom>
      <BMRBo:chem_comp_atom rdf:about="{$base}/chem_comp_atom/{$atom_id_encoded},{$comp_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_comp_atom rdf:resource="{$base}/chem_comp_atom/{$atom_id_encoded},{$comp_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_28_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_atom>
      </BMRBo:has_chem_comp_atom>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_atomCategory/BMRBx:chem_comp_atom">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_atom>
      <BMRBo:chem_comp_atom rdf:about="{$base}/chem_comp_atom/{$atom_id_encoded},{$comp_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_comp_atom rdf:resource="{$base}/chem_comp_atom/{$atom_id_encoded},{$comp_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_28_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_atom>
      </BMRBo:has_chem_comp_atom>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_bio_functionCategory/BMRBx:chem_comp_bio_function">
      <xsl:variable name="biological_function_truncated"><xsl:choose><xsl:when test="string-length(@biological_function)&lt;64"><xsl:value-of select="@biological_function"/></xsl:when><xsl:when test="contains(@biological_function,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@biological_function,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@biological_function,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="biological_function_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($biological_function_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_bio_function>
      <BMRBo:chem_comp_bio_function rdf:about="{$base}/chem_comp_bio_function/{$biological_function_encoded},{$comp_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_bio_function>
      </BMRBo:has_chem_comp_bio_function>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_bio_functionCategory/BMRBx:chem_comp_bio_function">
      <xsl:variable name="biological_function_truncated"><xsl:choose><xsl:when test="string-length(@biological_function)&lt;64"><xsl:value-of select="@biological_function"/></xsl:when><xsl:when test="contains(@biological_function,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@biological_function,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@biological_function,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="biological_function_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($biological_function_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_bio_function>
      <BMRBo:chem_comp_bio_function rdf:about="{$base}/chem_comp_bio_function/{$biological_function_encoded},{$comp_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_bio_function>
      </BMRBo:has_chem_comp_bio_function>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_bondCategory/BMRBx:chem_comp_bond">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_bond>
      <BMRBo:chem_comp_bond rdf:about="{$base}/chem_comp_bond/{$comp_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_bond>
      </BMRBo:has_chem_comp_bond>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_bondCategory/BMRBx:chem_comp_bond">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_bond>
      <BMRBo:chem_comp_bond rdf:about="{$base}/chem_comp_bond/{$comp_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_bond>
      </BMRBo:has_chem_comp_bond>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_citationCategory/BMRBx:chem_comp_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_citation>
      <BMRBo:chem_comp_citation rdf:about="{$base}/chem_comp_citation/{$citation_id_encoded},{$comp_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_citation>
      </BMRBo:has_chem_comp_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_citationCategory/BMRBx:chem_comp_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_citation>
      <BMRBo:chem_comp_citation rdf:about="{$base}/chem_comp_citation/{$citation_id_encoded},{$comp_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_citation>
      </BMRBo:has_chem_comp_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_common_nameCategory/BMRBx:chem_comp_common_name">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_common_name>
      <BMRBo:chem_comp_common_name rdf:about="{$base}/chem_comp_common_name/{$comp_id_encoded},{$entry_id_encoded},{$name_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_common_name>
      </BMRBo:has_chem_comp_common_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_common_nameCategory/BMRBx:chem_comp_common_name">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_common_name>
      <BMRBo:chem_comp_common_name rdf:about="{$base}/chem_comp_common_name/{$comp_id_encoded},{$entry_id_encoded},{$name_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_common_name>
      </BMRBo:has_chem_comp_common_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_db_linkCategory/BMRBx:chem_comp_db_link">
      <xsl:variable name="accession_code_truncated"><xsl:choose><xsl:when test="string-length(@accession_code)&lt;64"><xsl:value-of select="@accession_code"/></xsl:when><xsl:when test="contains(@accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="database_code_truncated"><xsl:choose><xsl:when test="string-length(@database_code)&lt;64"><xsl:value-of select="@database_code"/></xsl:when><xsl:when test="contains(@database_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_db_link>
      <BMRBo:chem_comp_db_link rdf:about="{$base}/chem_comp_db_link/{$accession_code_encoded},{$comp_id_encoded},{$database_code_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_db_link>
      </BMRBo:has_chem_comp_db_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_db_linkCategory/BMRBx:chem_comp_db_link">
      <xsl:variable name="accession_code_truncated"><xsl:choose><xsl:when test="string-length(@accession_code)&lt;64"><xsl:value-of select="@accession_code"/></xsl:when><xsl:when test="contains(@accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="database_code_truncated"><xsl:choose><xsl:when test="string-length(@database_code)&lt;64"><xsl:value-of select="@database_code"/></xsl:when><xsl:when test="contains(@database_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_db_link>
      <BMRBo:chem_comp_db_link rdf:about="{$base}/chem_comp_db_link/{$accession_code_encoded},{$comp_id_encoded},{$database_code_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_db_link>
      </BMRBo:has_chem_comp_db_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_descriptorCategory/BMRBx:chem_comp_descriptor">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="descriptor_truncated"><xsl:choose><xsl:when test="string-length(@descriptor)&lt;64"><xsl:value-of select="@descriptor"/></xsl:when><xsl:when test="contains(@descriptor,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@descriptor,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@descriptor,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="descriptor_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($descriptor_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="program_truncated"><xsl:choose><xsl:when test="string-length(@program)&lt;64"><xsl:value-of select="@program"/></xsl:when><xsl:when test="contains(@program,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@program,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@program,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="program_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($program_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="program_version_truncated"><xsl:choose><xsl:when test="string-length(@program_version)&lt;64"><xsl:value-of select="@program_version"/></xsl:when><xsl:when test="contains(@program_version,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@program_version,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@program_version,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="program_version_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($program_version_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_descriptor>
      <BMRBo:chem_comp_descriptor rdf:about="{$base}/chem_comp_descriptor/{$comp_id_encoded},{$descriptor_encoded},{$entry_id_encoded},{$program_encoded},{$program_version_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_descriptor>
      </BMRBo:has_chem_comp_descriptor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_descriptorCategory/BMRBx:chem_comp_descriptor">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="descriptor_truncated"><xsl:choose><xsl:when test="string-length(@descriptor)&lt;64"><xsl:value-of select="@descriptor"/></xsl:when><xsl:when test="contains(@descriptor,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@descriptor,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@descriptor,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="descriptor_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($descriptor_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="program_truncated"><xsl:choose><xsl:when test="string-length(@program)&lt;64"><xsl:value-of select="@program"/></xsl:when><xsl:when test="contains(@program,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@program,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@program,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="program_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($program_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="program_version_truncated"><xsl:choose><xsl:when test="string-length(@program_version)&lt;64"><xsl:value-of select="@program_version"/></xsl:when><xsl:when test="contains(@program_version,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@program_version,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@program_version,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="program_version_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($program_version_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_descriptor>
      <BMRBo:chem_comp_descriptor rdf:about="{$base}/chem_comp_descriptor/{$comp_id_encoded},{$descriptor_encoded},{$entry_id_encoded},{$program_encoded},{$program_version_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_descriptor>
      </BMRBo:has_chem_comp_descriptor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_identifierCategory/BMRBx:chem_comp_identifier">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="identifier_truncated"><xsl:choose><xsl:when test="string-length(@identifier)&lt;64"><xsl:value-of select="@identifier"/></xsl:when><xsl:when test="contains(@identifier,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@identifier,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@identifier,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="identifier_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($identifier_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="program_truncated"><xsl:choose><xsl:when test="string-length(@program)&lt;64"><xsl:value-of select="@program"/></xsl:when><xsl:when test="contains(@program,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@program,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@program,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="program_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($program_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="program_version_truncated"><xsl:choose><xsl:when test="string-length(@program_version)&lt;64"><xsl:value-of select="@program_version"/></xsl:when><xsl:when test="contains(@program_version,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@program_version,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@program_version,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="program_version_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($program_version_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_identifier>
      <BMRBo:chem_comp_identifier rdf:about="{$base}/chem_comp_identifier/{$comp_id_encoded},{$entry_id_encoded},{$identifier_encoded},{$program_encoded},{$program_version_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_identifier>
      </BMRBo:has_chem_comp_identifier>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_identifierCategory/BMRBx:chem_comp_identifier">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="identifier_truncated"><xsl:choose><xsl:when test="string-length(@identifier)&lt;64"><xsl:value-of select="@identifier"/></xsl:when><xsl:when test="contains(@identifier,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@identifier,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@identifier,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="identifier_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($identifier_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="program_truncated"><xsl:choose><xsl:when test="string-length(@program)&lt;64"><xsl:value-of select="@program"/></xsl:when><xsl:when test="contains(@program,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@program,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@program,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="program_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($program_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="program_version_truncated"><xsl:choose><xsl:when test="string-length(@program_version)&lt;64"><xsl:value-of select="@program_version"/></xsl:when><xsl:when test="contains(@program_version,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@program_version,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@program_version,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="program_version_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($program_version_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_identifier>
      <BMRBo:chem_comp_identifier rdf:about="{$base}/chem_comp_identifier/{$comp_id_encoded},{$entry_id_encoded},{$identifier_encoded},{$program_encoded},{$program_version_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_identifier>
      </BMRBo:has_chem_comp_identifier>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_keywordCategory/BMRBx:chem_comp_keyword">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keyword_truncated"><xsl:choose><xsl:when test="string-length(@keyword)&lt;64"><xsl:value-of select="@keyword"/></xsl:when><xsl:when test="contains(@keyword,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keyword,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keyword,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keyword_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keyword_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_keyword>
      <BMRBo:chem_comp_keyword rdf:about="{$base}/chem_comp_keyword/{$comp_id_encoded},{$entry_id_encoded},{$keyword_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_keyword>
      </BMRBo:has_chem_comp_keyword>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_keywordCategory/BMRBx:chem_comp_keyword">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keyword_truncated"><xsl:choose><xsl:when test="string-length(@keyword)&lt;64"><xsl:value-of select="@keyword"/></xsl:when><xsl:when test="contains(@keyword,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keyword,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keyword,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keyword_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keyword_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_keyword>
      <BMRBo:chem_comp_keyword rdf:about="{$base}/chem_comp_keyword/{$comp_id_encoded},{$entry_id_encoded},{$keyword_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_keyword>
      </BMRBo:has_chem_comp_keyword>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_smilesCategory/BMRBx:chem_comp_smiles">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="string_truncated"><xsl:choose><xsl:when test="string-length(@string)&lt;64"><xsl:value-of select="@string"/></xsl:when><xsl:when test="contains(@string,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@string,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@string,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="string_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($string_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_smiles>
      <BMRBo:chem_comp_smiles rdf:about="{$base}/chem_comp_smiles/{$comp_id_encoded},{$entry_id_encoded},{$string_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_smiles>
      </BMRBo:has_chem_comp_smiles>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_smilesCategory/BMRBx:chem_comp_smiles">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="string_truncated"><xsl:choose><xsl:when test="string-length(@string)&lt;64"><xsl:value-of select="@string"/></xsl:when><xsl:when test="contains(@string,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@string,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@string,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="string_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($string_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_smiles>
      <BMRBo:chem_comp_smiles rdf:about="{$base}/chem_comp_smiles/{$comp_id_encoded},{$entry_id_encoded},{$string_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_smiles>
      </BMRBo:has_chem_comp_smiles>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_systematic_nameCategory/BMRBx:chem_comp_systematic_name">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="naming_system_truncated"><xsl:choose><xsl:when test="string-length(@naming_system)&lt;64"><xsl:value-of select="@naming_system"/></xsl:when><xsl:when test="contains(@naming_system,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@naming_system,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@naming_system,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="naming_system_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($naming_system_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_systematic_name>
      <BMRBo:chem_comp_systematic_name rdf:about="{$base}/chem_comp_systematic_name/{$comp_id_encoded},{$entry_id_encoded},{$naming_system_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_systematic_name>
      </BMRBo:has_chem_comp_systematic_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_systematic_nameCategory/BMRBx:chem_comp_systematic_name">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="naming_system_truncated"><xsl:choose><xsl:when test="string-length(@naming_system)&lt;64"><xsl:value-of select="@naming_system"/></xsl:when><xsl:when test="contains(@naming_system,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@naming_system,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@naming_system,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="naming_system_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($naming_system_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_systematic_name>
      <BMRBo:chem_comp_systematic_name rdf:about="{$base}/chem_comp_systematic_name/{$comp_id_encoded},{$entry_id_encoded},{$naming_system_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_systematic_name>
      </BMRBo:has_chem_comp_systematic_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_torCategory/BMRBx:chem_comp_tor">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_tor>
      <BMRBo:chem_comp_tor rdf:about="{$base}/chem_comp_tor/{$comp_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_tor>
      </BMRBo:has_chem_comp_tor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_comp_torCategory/BMRBx:chem_comp_tor">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_comp_tor>
      <BMRBo:chem_comp_tor rdf:about="{$base}/chem_comp_tor/{$comp_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_comp_tor>
      </BMRBo:has_chem_comp_tor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_anisotropyCategory/BMRBx:chem_shift_anisotropy">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_anisotropy>
      <BMRBo:chem_shift_anisotropy rdf:about="{$base}/chem_shift_anisotropy/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shift_anisotropy rdf:resource="{$base}/chem_shift_anisotropy/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_29_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_anisotropy>
      </BMRBo:has_chem_shift_anisotropy>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_anisotropyCategory/BMRBx:chem_shift_anisotropy">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_anisotropy>
      <BMRBo:chem_shift_anisotropy rdf:about="{$base}/chem_shift_anisotropy/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shift_anisotropy rdf:resource="{$base}/chem_shift_anisotropy/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_29_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_anisotropy>
      </BMRBo:has_chem_shift_anisotropy>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_completeness_charCategory/BMRBx:chem_shift_completeness_char">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_completeness_char>
      <BMRBo:chem_shift_completeness_char rdf:about="{$base}/chem_shift_completeness_char/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shift_completeness_char rdf:resource="{$base}/chem_shift_completeness_char/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_30_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_completeness_char>
      </BMRBo:has_chem_shift_completeness_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_completeness_charCategory/BMRBx:chem_shift_completeness_char">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_completeness_char>
      <BMRBo:chem_shift_completeness_char rdf:about="{$base}/chem_shift_completeness_char/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shift_completeness_char rdf:resource="{$base}/chem_shift_completeness_char/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_30_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_completeness_char>
      </BMRBo:has_chem_shift_completeness_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_completeness_listCategory/BMRBx:chem_shift_completeness_list">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_completeness_list>
      <BMRBo:chem_shift_completeness_list rdf:about="{$base}/chem_shift_completeness_list/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shift_completeness_list rdf:resource="{$base}/chem_shift_completeness_list/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_31_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_completeness_list>
      </BMRBo:has_chem_shift_completeness_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_completeness_listCategory/BMRBx:chem_shift_completeness_list">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_completeness_list>
      <BMRBo:chem_shift_completeness_list rdf:about="{$base}/chem_shift_completeness_list/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shift_completeness_list rdf:resource="{$base}/chem_shift_completeness_list/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_31_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_completeness_list>
      </BMRBo:has_chem_shift_completeness_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_experimentCategory/BMRBx:chem_shift_experiment">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_experiment>
      <BMRBo:chem_shift_experiment rdf:about="{$base}/chem_shift_experiment/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_experiment>
      </BMRBo:has_chem_shift_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_experimentCategory/BMRBx:chem_shift_experiment">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_experiment>
      <BMRBo:chem_shift_experiment rdf:about="{$base}/chem_shift_experiment/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_experiment>
      </BMRBo:has_chem_shift_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_isotope_effect_listCategory/BMRBx:chem_shift_isotope_effect_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_isotope_effect_list>
      <BMRBo:chem_shift_isotope_effect_list rdf:about="{$base}/chem_shift_isotope_effect_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shift_isotope_effect_list rdf:resource="{$base}/chem_shift_isotope_effect_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_32_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_isotope_effect_list>
      </BMRBo:has_chem_shift_isotope_effect_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_isotope_effect_listCategory/BMRBx:chem_shift_isotope_effect_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_isotope_effect_list>
      <BMRBo:chem_shift_isotope_effect_list rdf:about="{$base}/chem_shift_isotope_effect_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shift_isotope_effect_list rdf:resource="{$base}/chem_shift_isotope_effect_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_32_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_isotope_effect_list>
      </BMRBo:has_chem_shift_isotope_effect_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_perturbationCategory/BMRBx:chem_shift_perturbation">
      <xsl:variable name="chem_shift_perturbation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_perturbation_list_id)&lt;64"><xsl:value-of select="@chem_shift_perturbation_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_perturbation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_perturbation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_perturbation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_perturbation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_perturbation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_perturbation>
      <BMRBo:chem_shift_perturbation rdf:about="{$base}/chem_shift_perturbation/{$chem_shift_perturbation_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_perturbation>
      </BMRBo:has_chem_shift_perturbation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_perturbationCategory/BMRBx:chem_shift_perturbation">
      <xsl:variable name="chem_shift_perturbation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_perturbation_list_id)&lt;64"><xsl:value-of select="@chem_shift_perturbation_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_perturbation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_perturbation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_perturbation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_perturbation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_perturbation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_perturbation>
      <BMRBo:chem_shift_perturbation rdf:about="{$base}/chem_shift_perturbation/{$chem_shift_perturbation_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_perturbation>
      </BMRBo:has_chem_shift_perturbation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_perturbation_experimentCategory/BMRBx:chem_shift_perturbation_experiment">
      <xsl:variable name="chem_shift_perturbation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_perturbation_list_id)&lt;64"><xsl:value-of select="@chem_shift_perturbation_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_perturbation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_perturbation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_perturbation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_perturbation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_perturbation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_perturbation_experiment>
      <BMRBo:chem_shift_perturbation_experiment rdf:about="{$base}/chem_shift_perturbation_experiment/{$chem_shift_perturbation_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_perturbation_experiment>
      </BMRBo:has_chem_shift_perturbation_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_perturbation_experimentCategory/BMRBx:chem_shift_perturbation_experiment">
      <xsl:variable name="chem_shift_perturbation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_perturbation_list_id)&lt;64"><xsl:value-of select="@chem_shift_perturbation_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_perturbation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_perturbation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_perturbation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_perturbation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_perturbation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_perturbation_experiment>
      <BMRBo:chem_shift_perturbation_experiment rdf:about="{$base}/chem_shift_perturbation_experiment/{$chem_shift_perturbation_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_perturbation_experiment>
      </BMRBo:has_chem_shift_perturbation_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_perturbation_listCategory/BMRBx:chem_shift_perturbation_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_perturbation_list>
      <BMRBo:chem_shift_perturbation_list rdf:about="{$base}/chem_shift_perturbation_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shift_perturbation_list rdf:resource="{$base}/chem_shift_perturbation_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_33_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_perturbation_list>
      </BMRBo:has_chem_shift_perturbation_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_perturbation_listCategory/BMRBx:chem_shift_perturbation_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_perturbation_list>
      <BMRBo:chem_shift_perturbation_list rdf:about="{$base}/chem_shift_perturbation_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shift_perturbation_list rdf:resource="{$base}/chem_shift_perturbation_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_33_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_perturbation_list>
      </BMRBo:has_chem_shift_perturbation_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_perturbation_softwareCategory/BMRBx:chem_shift_perturbation_software">
      <xsl:variable name="chem_shift_perturbation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_perturbation_list_id)&lt;64"><xsl:value-of select="@chem_shift_perturbation_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_perturbation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_perturbation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_perturbation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_perturbation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_perturbation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_perturbation_software>
      <BMRBo:chem_shift_perturbation_software rdf:about="{$base}/chem_shift_perturbation_software/{$chem_shift_perturbation_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_perturbation_software>
      </BMRBo:has_chem_shift_perturbation_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_perturbation_softwareCategory/BMRBx:chem_shift_perturbation_software">
      <xsl:variable name="chem_shift_perturbation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_perturbation_list_id)&lt;64"><xsl:value-of select="@chem_shift_perturbation_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_perturbation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_perturbation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_perturbation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_perturbation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_perturbation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_perturbation_software>
      <BMRBo:chem_shift_perturbation_software rdf:about="{$base}/chem_shift_perturbation_software/{$chem_shift_perturbation_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_perturbation_software>
      </BMRBo:has_chem_shift_perturbation_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_refCategory/BMRBx:chem_shift_ref">
      <xsl:variable name="atom_isotope_number_truncated"><xsl:choose><xsl:when test="string-length(@atom_isotope_number)&lt;64"><xsl:value-of select="@atom_isotope_number"/></xsl:when><xsl:when test="contains(@atom_isotope_number,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_isotope_number,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_isotope_number,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_isotope_number_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_isotope_number_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="atom_type_truncated"><xsl:choose><xsl:when test="string-length(@atom_type)&lt;64"><xsl:value-of select="@atom_type"/></xsl:when><xsl:when test="contains(@atom_type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="chem_shift_reference_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_reference_id)&lt;64"><xsl:value-of select="@chem_shift_reference_id"/></xsl:when><xsl:when test="contains(@chem_shift_reference_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_reference_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_reference_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_reference_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_reference_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mol_common_name_truncated"><xsl:choose><xsl:when test="string-length(@mol_common_name)&lt;64"><xsl:value-of select="@mol_common_name"/></xsl:when><xsl:when test="contains(@mol_common_name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mol_common_name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mol_common_name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mol_common_name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mol_common_name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_ref>
      <BMRBo:chem_shift_ref rdf:about="{$base}/chem_shift_ref/{$atom_isotope_number_encoded},{$atom_type_encoded},{$chem_shift_reference_id_encoded},{$entry_id_encoded},{$mol_common_name_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_ref>
      </BMRBo:has_chem_shift_ref>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_refCategory/BMRBx:chem_shift_ref">
      <xsl:variable name="atom_isotope_number_truncated"><xsl:choose><xsl:when test="string-length(@atom_isotope_number)&lt;64"><xsl:value-of select="@atom_isotope_number"/></xsl:when><xsl:when test="contains(@atom_isotope_number,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_isotope_number,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_isotope_number,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_isotope_number_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_isotope_number_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="atom_type_truncated"><xsl:choose><xsl:when test="string-length(@atom_type)&lt;64"><xsl:value-of select="@atom_type"/></xsl:when><xsl:when test="contains(@atom_type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="chem_shift_reference_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_reference_id)&lt;64"><xsl:value-of select="@chem_shift_reference_id"/></xsl:when><xsl:when test="contains(@chem_shift_reference_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_reference_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_reference_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_reference_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_reference_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mol_common_name_truncated"><xsl:choose><xsl:when test="string-length(@mol_common_name)&lt;64"><xsl:value-of select="@mol_common_name"/></xsl:when><xsl:when test="contains(@mol_common_name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mol_common_name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mol_common_name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mol_common_name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mol_common_name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_ref>
      <BMRBo:chem_shift_ref rdf:about="{$base}/chem_shift_ref/{$atom_isotope_number_encoded},{$atom_type_encoded},{$chem_shift_reference_id_encoded},{$entry_id_encoded},{$mol_common_name_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_ref>
      </BMRBo:has_chem_shift_ref>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_referenceCategory/BMRBx:chem_shift_reference">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_reference>
      <BMRBo:chem_shift_reference rdf:about="{$base}/chem_shift_reference/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shift_reference rdf:resource="{$base}/chem_shift_reference/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_34_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_reference>
      </BMRBo:has_chem_shift_reference>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_referenceCategory/BMRBx:chem_shift_reference">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_reference>
      <BMRBo:chem_shift_reference rdf:about="{$base}/chem_shift_reference/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shift_reference rdf:resource="{$base}/chem_shift_reference/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_34_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_reference>
      </BMRBo:has_chem_shift_reference>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_softwareCategory/BMRBx:chem_shift_software">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_software>
      <BMRBo:chem_shift_software rdf:about="{$base}/chem_shift_software/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_software>
      </BMRBo:has_chem_shift_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shift_softwareCategory/BMRBx:chem_shift_software">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shift_software>
      <BMRBo:chem_shift_software rdf:about="{$base}/chem_shift_software/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shift_software>
      </BMRBo:has_chem_shift_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shifts_calc_softwareCategory/BMRBx:chem_shifts_calc_software">
      <xsl:variable name="chem_shifts_calc_type_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shifts_calc_type_id)&lt;64"><xsl:value-of select="@chem_shifts_calc_type_id"/></xsl:when><xsl:when test="contains(@chem_shifts_calc_type_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shifts_calc_type_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shifts_calc_type_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shifts_calc_type_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shifts_calc_type_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shifts_calc_software>
      <BMRBo:chem_shifts_calc_software rdf:about="{$base}/chem_shifts_calc_software/{$chem_shifts_calc_type_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shifts_calc_software>
      </BMRBo:has_chem_shifts_calc_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shifts_calc_softwareCategory/BMRBx:chem_shifts_calc_software">
      <xsl:variable name="chem_shifts_calc_type_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shifts_calc_type_id)&lt;64"><xsl:value-of select="@chem_shifts_calc_type_id"/></xsl:when><xsl:when test="contains(@chem_shifts_calc_type_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shifts_calc_type_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shifts_calc_type_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shifts_calc_type_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shifts_calc_type_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shifts_calc_software>
      <BMRBo:chem_shifts_calc_software rdf:about="{$base}/chem_shifts_calc_software/{$chem_shifts_calc_type_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shifts_calc_software>
      </BMRBo:has_chem_shifts_calc_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shifts_calc_typeCategory/BMRBx:chem_shifts_calc_type">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shifts_calc_type>
      <BMRBo:chem_shifts_calc_type rdf:about="{$base}/chem_shifts_calc_type/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shifts_calc_type rdf:resource="{$base}/chem_shifts_calc_type/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_35_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shifts_calc_type>
      </BMRBo:has_chem_shifts_calc_type>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_shifts_calc_typeCategory/BMRBx:chem_shifts_calc_type">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_shifts_calc_type>
      <BMRBo:chem_shifts_calc_type rdf:about="{$base}/chem_shifts_calc_type/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chem_shifts_calc_type rdf:resource="{$base}/chem_shifts_calc_type/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_35_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_shifts_calc_type>
      </BMRBo:has_chem_shifts_calc_type>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_struct_descriptorCategory/BMRBx:chem_struct_descriptor">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_struct_descriptor>
      <BMRBo:chem_struct_descriptor rdf:about="{$base}/chem_struct_descriptor/{$comp_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_struct_descriptor>
      </BMRBo:has_chem_struct_descriptor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chem_struct_descriptorCategory/BMRBx:chem_struct_descriptor">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chem_struct_descriptor>
      <BMRBo:chem_struct_descriptor rdf:about="{$base}/chem_struct_descriptor/{$comp_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chem_struct_descriptor>
      </BMRBo:has_chem_struct_descriptor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chemical_rateCategory/BMRBx:chemical_rate">
      <xsl:variable name="chemical_rate_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chemical_rate_list_id)&lt;64"><xsl:value-of select="@chemical_rate_list_id"/></xsl:when><xsl:when test="contains(@chemical_rate_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chemical_rate_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chemical_rate_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chemical_rate_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chemical_rate_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chemical_rate>
      <BMRBo:chemical_rate rdf:about="{$base}/chemical_rate/{$chemical_rate_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chemical_rate rdf:resource="{$base}/chemical_rate/{$chemical_rate_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_36_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chemical_rate>
      </BMRBo:has_chemical_rate>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chemical_rateCategory/BMRBx:chemical_rate">
      <xsl:variable name="chemical_rate_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chemical_rate_list_id)&lt;64"><xsl:value-of select="@chemical_rate_list_id"/></xsl:when><xsl:when test="contains(@chemical_rate_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chemical_rate_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chemical_rate_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chemical_rate_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chemical_rate_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chemical_rate>
      <BMRBo:chemical_rate rdf:about="{$base}/chemical_rate/{$chemical_rate_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chemical_rate rdf:resource="{$base}/chemical_rate/{$chemical_rate_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_36_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chemical_rate>
      </BMRBo:has_chemical_rate>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chemical_rate_experimentCategory/BMRBx:chemical_rate_experiment">
      <xsl:variable name="chemical_rate_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chemical_rate_list_id)&lt;64"><xsl:value-of select="@chemical_rate_list_id"/></xsl:when><xsl:when test="contains(@chemical_rate_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chemical_rate_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chemical_rate_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chemical_rate_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chemical_rate_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chemical_rate_experiment>
      <BMRBo:chemical_rate_experiment rdf:about="{$base}/chemical_rate_experiment/{$chemical_rate_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chemical_rate_experiment rdf:resource="{$base}/chemical_rate_experiment/{$chemical_rate_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_37_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chemical_rate_experiment>
      </BMRBo:has_chemical_rate_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chemical_rate_experimentCategory/BMRBx:chemical_rate_experiment">
      <xsl:variable name="chemical_rate_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chemical_rate_list_id)&lt;64"><xsl:value-of select="@chemical_rate_list_id"/></xsl:when><xsl:when test="contains(@chemical_rate_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chemical_rate_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chemical_rate_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chemical_rate_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chemical_rate_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chemical_rate_experiment>
      <BMRBo:chemical_rate_experiment rdf:about="{$base}/chemical_rate_experiment/{$chemical_rate_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chemical_rate_experiment rdf:resource="{$base}/chemical_rate_experiment/{$chemical_rate_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_37_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chemical_rate_experiment>
      </BMRBo:has_chemical_rate_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chemical_rate_listCategory/BMRBx:chemical_rate_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chemical_rate_list>
      <BMRBo:chemical_rate_list rdf:about="{$base}/chemical_rate_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chemical_rate_list rdf:resource="{$base}/chemical_rate_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_38_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chemical_rate_list>
      </BMRBo:has_chemical_rate_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chemical_rate_listCategory/BMRBx:chemical_rate_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chemical_rate_list>
      <BMRBo:chemical_rate_list rdf:about="{$base}/chemical_rate_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chemical_rate_list rdf:resource="{$base}/chemical_rate_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_38_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chemical_rate_list>
      </BMRBo:has_chemical_rate_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chemical_rate_softwareCategory/BMRBx:chemical_rate_software">
      <xsl:variable name="chemical_rate_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chemical_rate_list_id)&lt;64"><xsl:value-of select="@chemical_rate_list_id"/></xsl:when><xsl:when test="contains(@chemical_rate_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chemical_rate_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chemical_rate_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chemical_rate_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chemical_rate_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chemical_rate_software>
      <BMRBo:chemical_rate_software rdf:about="{$base}/chemical_rate_software/{$chemical_rate_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chemical_rate_software rdf:resource="{$base}/chemical_rate_software/{$chemical_rate_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_39_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chemical_rate_software>
      </BMRBo:has_chemical_rate_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chemical_rate_softwareCategory/BMRBx:chemical_rate_software">
      <xsl:variable name="chemical_rate_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chemical_rate_list_id)&lt;64"><xsl:value-of select="@chemical_rate_list_id"/></xsl:when><xsl:when test="contains(@chemical_rate_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chemical_rate_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chemical_rate_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chemical_rate_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chemical_rate_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chemical_rate_software>
      <BMRBo:chemical_rate_software rdf:about="{$base}/chemical_rate_software/{$chemical_rate_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chemical_rate_software rdf:resource="{$base}/chemical_rate_software/{$chemical_rate_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_39_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chemical_rate_software>
      </BMRBo:has_chemical_rate_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chromatographic_columnCategory/BMRBx:chromatographic_column">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chromatographic_column>
      <BMRBo:chromatographic_column rdf:about="{$base}/chromatographic_column/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chromatographic_column rdf:resource="{$base}/chromatographic_column/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_40_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chromatographic_column>
      </BMRBo:has_chromatographic_column>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chromatographic_columnCategory/BMRBx:chromatographic_column">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chromatographic_column>
      <BMRBo:chromatographic_column rdf:about="{$base}/chromatographic_column/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chromatographic_column rdf:resource="{$base}/chromatographic_column/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_40_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chromatographic_column>
      </BMRBo:has_chromatographic_column>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chromatographic_systemCategory/BMRBx:chromatographic_system">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chromatographic_system>
      <BMRBo:chromatographic_system rdf:about="{$base}/chromatographic_system/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chromatographic_system rdf:resource="{$base}/chromatographic_system/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_41_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chromatographic_system>
      </BMRBo:has_chromatographic_system>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:chromatographic_systemCategory/BMRBx:chromatographic_system">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_chromatographic_system>
      <BMRBo:chromatographic_system rdf:about="{$base}/chromatographic_system/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_chromatographic_system rdf:resource="{$base}/chromatographic_system/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_41_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:chromatographic_system>
      </BMRBo:has_chromatographic_system>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:citationCategory/BMRBx:citation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_citation>
      <BMRBo:citation rdf:about="{$base}/citation/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_citation rdf:resource="{$base}/citation/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_42_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:citation>
      </BMRBo:has_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:citationCategory/BMRBx:citation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_citation>
      <BMRBo:citation rdf:about="{$base}/citation/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_citation rdf:resource="{$base}/citation/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_42_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:citation>
      </BMRBo:has_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:citation_authorCategory/BMRBx:citation_author">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ordinal_truncated"><xsl:choose><xsl:when test="string-length(@ordinal)&lt;64"><xsl:value-of select="@ordinal"/></xsl:when><xsl:when test="contains(@ordinal,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ordinal,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ordinal,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ordinal_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ordinal_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_citation_author>
      <BMRBo:citation_author rdf:about="{$base}/citation_author/{$citation_id_encoded},{$entry_id_encoded},{$ordinal_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:citation_author>
      </BMRBo:has_citation_author>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:citation_authorCategory/BMRBx:citation_author">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ordinal_truncated"><xsl:choose><xsl:when test="string-length(@ordinal)&lt;64"><xsl:value-of select="@ordinal"/></xsl:when><xsl:when test="contains(@ordinal,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ordinal,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ordinal,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ordinal_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ordinal_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_citation_author>
      <BMRBo:citation_author rdf:about="{$base}/citation_author/{$citation_id_encoded},{$entry_id_encoded},{$ordinal_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:citation_author>
      </BMRBo:has_citation_author>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:citation_editorCategory/BMRBx:citation_editor">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ordinal_truncated"><xsl:choose><xsl:when test="string-length(@ordinal)&lt;64"><xsl:value-of select="@ordinal"/></xsl:when><xsl:when test="contains(@ordinal,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ordinal,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ordinal,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ordinal_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ordinal_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_citation_editor>
      <BMRBo:citation_editor rdf:about="{$base}/citation_editor/{$citation_id_encoded},{$entry_id_encoded},{$ordinal_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:citation_editor>
      </BMRBo:has_citation_editor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:citation_editorCategory/BMRBx:citation_editor">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ordinal_truncated"><xsl:choose><xsl:when test="string-length(@ordinal)&lt;64"><xsl:value-of select="@ordinal"/></xsl:when><xsl:when test="contains(@ordinal,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ordinal,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ordinal,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ordinal_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ordinal_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_citation_editor>
      <BMRBo:citation_editor rdf:about="{$base}/citation_editor/{$citation_id_encoded},{$entry_id_encoded},{$ordinal_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:citation_editor>
      </BMRBo:has_citation_editor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:citation_keywordCategory/BMRBx:citation_keyword">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keyword_truncated"><xsl:choose><xsl:when test="string-length(@keyword)&lt;64"><xsl:value-of select="@keyword"/></xsl:when><xsl:when test="contains(@keyword,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keyword,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keyword,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keyword_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keyword_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_citation_keyword>
      <BMRBo:citation_keyword rdf:about="{$base}/citation_keyword/{$citation_id_encoded},{$entry_id_encoded},{$keyword_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:citation_keyword>
      </BMRBo:has_citation_keyword>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:citation_keywordCategory/BMRBx:citation_keyword">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keyword_truncated"><xsl:choose><xsl:when test="string-length(@keyword)&lt;64"><xsl:value-of select="@keyword"/></xsl:when><xsl:when test="contains(@keyword,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keyword,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keyword,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keyword_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keyword_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_citation_keyword>
      <BMRBo:citation_keyword rdf:about="{$base}/citation_keyword/{$citation_id_encoded},{$entry_id_encoded},{$keyword_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:citation_keyword>
      </BMRBo:has_citation_keyword>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:computerCategory/BMRBx:computer">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_computer>
      <BMRBo:computer rdf:about="{$base}/computer/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_computer rdf:resource="{$base}/computer/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_43_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:computer>
      </BMRBo:has_computer>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:computerCategory/BMRBx:computer">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_computer>
      <BMRBo:computer rdf:about="{$base}/computer/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_computer rdf:resource="{$base}/computer/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_43_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:computer>
      </BMRBo:has_computer>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:computer_citationCategory/BMRBx:computer_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="computer_id_truncated"><xsl:choose><xsl:when test="string-length(@computer_id)&lt;64"><xsl:value-of select="@computer_id"/></xsl:when><xsl:when test="contains(@computer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@computer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@computer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="computer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($computer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_computer_citation>
      <BMRBo:computer_citation rdf:about="{$base}/computer_citation/{$citation_id_encoded},{$computer_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:computer_citation>
      </BMRBo:has_computer_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:computer_citationCategory/BMRBx:computer_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="computer_id_truncated"><xsl:choose><xsl:when test="string-length(@computer_id)&lt;64"><xsl:value-of select="@computer_id"/></xsl:when><xsl:when test="contains(@computer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@computer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@computer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="computer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($computer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_computer_citation>
      <BMRBo:computer_citation rdf:about="{$base}/computer_citation/{$citation_id_encoded},{$computer_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:computer_citation>
      </BMRBo:has_computer_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conf_family_coord_set_constr_listCategory/BMRBx:conf_family_coord_set_constr_list">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_list_category_truncated"><xsl:choose><xsl:when test="string-length(@constraint_list_category)&lt;64"><xsl:value-of select="@constraint_list_category"/></xsl:when><xsl:when test="contains(@constraint_list_category,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_list_category,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_list_category,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_list_category_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_list_category_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_list_id)&lt;64"><xsl:value-of select="@constraint_list_id"/></xsl:when><xsl:when test="contains(@constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conf_family_coord_set_constr_list>
      <BMRBo:conf_family_coord_set_constr_list rdf:about="{$base}/conf_family_coord_set_constr_list/{$conformer_family_coord_set_id_encoded},{$constraint_list_category_encoded},{$constraint_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conf_family_coord_set_constr_list rdf:resource="{$base}/conf_family_coord_set_constr_list/{$conformer_family_coord_set_id_encoded},{$constraint_list_category_encoded},{$constraint_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_44_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conf_family_coord_set_constr_list>
      </BMRBo:has_conf_family_coord_set_constr_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conf_family_coord_set_constr_listCategory/BMRBx:conf_family_coord_set_constr_list">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_list_category_truncated"><xsl:choose><xsl:when test="string-length(@constraint_list_category)&lt;64"><xsl:value-of select="@constraint_list_category"/></xsl:when><xsl:when test="contains(@constraint_list_category,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_list_category,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_list_category,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_list_category_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_list_category_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_list_id)&lt;64"><xsl:value-of select="@constraint_list_id"/></xsl:when><xsl:when test="contains(@constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conf_family_coord_set_constr_list>
      <BMRBo:conf_family_coord_set_constr_list rdf:about="{$base}/conf_family_coord_set_constr_list/{$conformer_family_coord_set_id_encoded},{$constraint_list_category_encoded},{$constraint_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conf_family_coord_set_constr_list rdf:resource="{$base}/conf_family_coord_set_constr_list/{$conformer_family_coord_set_id_encoded},{$constraint_list_category_encoded},{$constraint_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_44_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conf_family_coord_set_constr_list>
      </BMRBo:has_conf_family_coord_set_constr_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conf_stats_softwareCategory/BMRBx:conf_stats_software">
      <xsl:variable name="conformer_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_stat_list_id)&lt;64"><xsl:value-of select="@conformer_stat_list_id"/></xsl:when><xsl:when test="contains(@conformer_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conf_stats_software>
      <BMRBo:conf_stats_software rdf:about="{$base}/conf_stats_software/{$conformer_stat_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conf_stats_software rdf:resource="{$base}/conf_stats_software/{$conformer_stat_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_45_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conf_stats_software>
      </BMRBo:has_conf_stats_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conf_stats_softwareCategory/BMRBx:conf_stats_software">
      <xsl:variable name="conformer_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_stat_list_id)&lt;64"><xsl:value-of select="@conformer_stat_list_id"/></xsl:when><xsl:when test="contains(@conformer_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conf_stats_software>
      <BMRBo:conf_stats_software rdf:about="{$base}/conf_stats_software/{$conformer_stat_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conf_stats_software rdf:resource="{$base}/conf_stats_software/{$conformer_stat_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_45_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conf_stats_software>
      </BMRBo:has_conf_stats_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_family_coord_setCategory/BMRBx:conformer_family_coord_set">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_family_coord_set>
      <BMRBo:conformer_family_coord_set rdf:about="{$base}/conformer_family_coord_set/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_family_coord_set rdf:resource="{$base}/conformer_family_coord_set/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_46_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_family_coord_set>
      </BMRBo:has_conformer_family_coord_set>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_family_coord_setCategory/BMRBx:conformer_family_coord_set">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_family_coord_set>
      <BMRBo:conformer_family_coord_set rdf:about="{$base}/conformer_family_coord_set/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_family_coord_set rdf:resource="{$base}/conformer_family_coord_set/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_46_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_family_coord_set>
      </BMRBo:has_conformer_family_coord_set>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_family_coord_set_exptCategory/BMRBx:conformer_family_coord_set_expt">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_family_coord_set_expt>
      <BMRBo:conformer_family_coord_set_expt rdf:about="{$base}/conformer_family_coord_set_expt/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_family_coord_set_expt rdf:resource="{$base}/conformer_family_coord_set_expt/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_47_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_family_coord_set_expt>
      </BMRBo:has_conformer_family_coord_set_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_family_coord_set_exptCategory/BMRBx:conformer_family_coord_set_expt">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_family_coord_set_expt>
      <BMRBo:conformer_family_coord_set_expt rdf:about="{$base}/conformer_family_coord_set_expt/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_family_coord_set_expt rdf:resource="{$base}/conformer_family_coord_set_expt/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_47_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_family_coord_set_expt>
      </BMRBo:has_conformer_family_coord_set_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_family_refinementCategory/BMRBx:conformer_family_refinement">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="refine_method_truncated"><xsl:choose><xsl:when test="string-length(@refine_method)&lt;64"><xsl:value-of select="@refine_method"/></xsl:when><xsl:when test="contains(@refine_method,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@refine_method,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@refine_method,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="refine_method_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($refine_method_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_family_refinement>
      <BMRBo:conformer_family_refinement rdf:about="{$base}/conformer_family_refinement/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$refine_method_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_family_refinement rdf:resource="{$base}/conformer_family_refinement/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$refine_method_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_48_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_family_refinement>
      </BMRBo:has_conformer_family_refinement>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_family_refinementCategory/BMRBx:conformer_family_refinement">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="refine_method_truncated"><xsl:choose><xsl:when test="string-length(@refine_method)&lt;64"><xsl:value-of select="@refine_method"/></xsl:when><xsl:when test="contains(@refine_method,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@refine_method,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@refine_method,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="refine_method_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($refine_method_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_family_refinement>
      <BMRBo:conformer_family_refinement rdf:about="{$base}/conformer_family_refinement/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$refine_method_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_family_refinement rdf:resource="{$base}/conformer_family_refinement/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$refine_method_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_48_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_family_refinement>
      </BMRBo:has_conformer_family_refinement>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_family_softwareCategory/BMRBx:conformer_family_software">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_family_software>
      <BMRBo:conformer_family_software rdf:about="{$base}/conformer_family_software/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_family_software rdf:resource="{$base}/conformer_family_software/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_49_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_family_software>
      </BMRBo:has_conformer_family_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_family_softwareCategory/BMRBx:conformer_family_software">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_family_software>
      <BMRBo:conformer_family_software rdf:about="{$base}/conformer_family_software/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_family_software rdf:resource="{$base}/conformer_family_software/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_49_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_family_software>
      </BMRBo:has_conformer_family_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_stat_listCategory/BMRBx:conformer_stat_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_stat_list>
      <BMRBo:conformer_stat_list rdf:about="{$base}/conformer_stat_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_stat_list rdf:resource="{$base}/conformer_stat_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_50_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_stat_list>
      </BMRBo:has_conformer_stat_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_stat_listCategory/BMRBx:conformer_stat_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_stat_list>
      <BMRBo:conformer_stat_list rdf:about="{$base}/conformer_stat_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_stat_list rdf:resource="{$base}/conformer_stat_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_50_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_stat_list>
      </BMRBo:has_conformer_stat_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_stat_list_ensCategory/BMRBx:conformer_stat_list_ens">
      <xsl:variable name="conformer_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_stat_list_id)&lt;64"><xsl:value-of select="@conformer_stat_list_id"/></xsl:when><xsl:when test="contains(@conformer_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_stat_list_ens>
      <BMRBo:conformer_stat_list_ens rdf:about="{$base}/conformer_stat_list_ens/{$conformer_stat_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_stat_list_ens rdf:resource="{$base}/conformer_stat_list_ens/{$conformer_stat_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_51_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_stat_list_ens>
      </BMRBo:has_conformer_stat_list_ens>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_stat_list_ensCategory/BMRBx:conformer_stat_list_ens">
      <xsl:variable name="conformer_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_stat_list_id)&lt;64"><xsl:value-of select="@conformer_stat_list_id"/></xsl:when><xsl:when test="contains(@conformer_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_stat_list_ens>
      <BMRBo:conformer_stat_list_ens rdf:about="{$base}/conformer_stat_list_ens/{$conformer_stat_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_stat_list_ens rdf:resource="{$base}/conformer_stat_list_ens/{$conformer_stat_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_51_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_stat_list_ens>
      </BMRBo:has_conformer_stat_list_ens>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_stat_list_repCategory/BMRBx:conformer_stat_list_rep">
      <xsl:variable name="conformer_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_stat_list_id)&lt;64"><xsl:value-of select="@conformer_stat_list_id"/></xsl:when><xsl:when test="contains(@conformer_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_stat_list_rep>
      <BMRBo:conformer_stat_list_rep rdf:about="{$base}/conformer_stat_list_rep/{$conformer_stat_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_stat_list_rep rdf:resource="{$base}/conformer_stat_list_rep/{$conformer_stat_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_52_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_stat_list_rep>
      </BMRBo:has_conformer_stat_list_rep>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:conformer_stat_list_repCategory/BMRBx:conformer_stat_list_rep">
      <xsl:variable name="conformer_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_stat_list_id)&lt;64"><xsl:value-of select="@conformer_stat_list_id"/></xsl:when><xsl:when test="contains(@conformer_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_conformer_stat_list_rep>
      <BMRBo:conformer_stat_list_rep rdf:about="{$base}/conformer_stat_list_rep/{$conformer_stat_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_conformer_stat_list_rep rdf:resource="{$base}/conformer_stat_list_rep/{$conformer_stat_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_52_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:conformer_stat_list_rep>
      </BMRBo:has_conformer_stat_list_rep>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:constraint_fileCategory/BMRBx:constraint_file">
      <xsl:variable name="constraint_filename_truncated"><xsl:choose><xsl:when test="string-length(@constraint_filename)&lt;64"><xsl:value-of select="@constraint_filename"/></xsl:when><xsl:when test="contains(@constraint_filename,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_filename,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_filename,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_filename_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_filename_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_stat_list_id)&lt;64"><xsl:value-of select="@constraint_stat_list_id"/></xsl:when><xsl:when test="contains(@constraint_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_subtype_truncated"><xsl:choose><xsl:when test="string-length(@constraint_subtype)&lt;64"><xsl:value-of select="@constraint_subtype"/></xsl:when><xsl:when test="contains(@constraint_subtype,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_subtype,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_subtype,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_subtype_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_subtype_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_type_truncated"><xsl:choose><xsl:when test="string-length(@constraint_type)&lt;64"><xsl:value-of select="@constraint_type"/></xsl:when><xsl:when test="contains(@constraint_type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_constraint_file>
      <BMRBo:constraint_file rdf:about="{$base}/constraint_file/{$constraint_filename_encoded},{$constraint_stat_list_id_encoded},{$constraint_subtype_encoded},{$constraint_type_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_constraint_file rdf:resource="{$base}/constraint_file/{$constraint_filename_encoded},{$constraint_stat_list_id_encoded},{$constraint_subtype_encoded},{$constraint_type_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_53_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:constraint_file>
      </BMRBo:has_constraint_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:constraint_fileCategory/BMRBx:constraint_file">
      <xsl:variable name="constraint_filename_truncated"><xsl:choose><xsl:when test="string-length(@constraint_filename)&lt;64"><xsl:value-of select="@constraint_filename"/></xsl:when><xsl:when test="contains(@constraint_filename,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_filename,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_filename,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_filename_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_filename_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_stat_list_id)&lt;64"><xsl:value-of select="@constraint_stat_list_id"/></xsl:when><xsl:when test="contains(@constraint_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_subtype_truncated"><xsl:choose><xsl:when test="string-length(@constraint_subtype)&lt;64"><xsl:value-of select="@constraint_subtype"/></xsl:when><xsl:when test="contains(@constraint_subtype,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_subtype,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_subtype,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_subtype_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_subtype_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_type_truncated"><xsl:choose><xsl:when test="string-length(@constraint_type)&lt;64"><xsl:value-of select="@constraint_type"/></xsl:when><xsl:when test="contains(@constraint_type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_constraint_file>
      <BMRBo:constraint_file rdf:about="{$base}/constraint_file/{$constraint_filename_encoded},{$constraint_stat_list_id_encoded},{$constraint_subtype_encoded},{$constraint_type_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_constraint_file rdf:resource="{$base}/constraint_file/{$constraint_filename_encoded},{$constraint_stat_list_id_encoded},{$constraint_subtype_encoded},{$constraint_type_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_53_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:constraint_file>
      </BMRBo:has_constraint_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:constraint_stat_listCategory/BMRBx:constraint_stat_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_constraint_stat_list>
      <BMRBo:constraint_stat_list rdf:about="{$base}/constraint_stat_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_constraint_stat_list rdf:resource="{$base}/constraint_stat_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_54_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:constraint_stat_list>
      </BMRBo:has_constraint_stat_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:constraint_stat_listCategory/BMRBx:constraint_stat_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_constraint_stat_list>
      <BMRBo:constraint_stat_list rdf:about="{$base}/constraint_stat_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_constraint_stat_list rdf:resource="{$base}/constraint_stat_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_54_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:constraint_stat_list>
      </BMRBo:has_constraint_stat_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:constraint_stat_list_ensCategory/BMRBx:constraint_stat_list_ens">
      <xsl:variable name="constraint_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_stat_list_id)&lt;64"><xsl:value-of select="@constraint_stat_list_id"/></xsl:when><xsl:when test="contains(@constraint_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_constraint_stat_list_ens>
      <BMRBo:constraint_stat_list_ens rdf:about="{$base}/constraint_stat_list_ens/{$constraint_stat_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_constraint_stat_list_ens rdf:resource="{$base}/constraint_stat_list_ens/{$constraint_stat_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_55_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:constraint_stat_list_ens>
      </BMRBo:has_constraint_stat_list_ens>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:constraint_stat_list_ensCategory/BMRBx:constraint_stat_list_ens">
      <xsl:variable name="constraint_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_stat_list_id)&lt;64"><xsl:value-of select="@constraint_stat_list_id"/></xsl:when><xsl:when test="contains(@constraint_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_constraint_stat_list_ens>
      <BMRBo:constraint_stat_list_ens rdf:about="{$base}/constraint_stat_list_ens/{$constraint_stat_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_constraint_stat_list_ens rdf:resource="{$base}/constraint_stat_list_ens/{$constraint_stat_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_55_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:constraint_stat_list_ens>
      </BMRBo:has_constraint_stat_list_ens>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:constraint_stat_list_repCategory/BMRBx:constraint_stat_list_rep">
      <xsl:variable name="constraint_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_stat_list_id)&lt;64"><xsl:value-of select="@constraint_stat_list_id"/></xsl:when><xsl:when test="contains(@constraint_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_constraint_stat_list_rep>
      <BMRBo:constraint_stat_list_rep rdf:about="{$base}/constraint_stat_list_rep/{$constraint_stat_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_constraint_stat_list_rep rdf:resource="{$base}/constraint_stat_list_rep/{$constraint_stat_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_56_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:constraint_stat_list_rep>
      </BMRBo:has_constraint_stat_list_rep>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:constraint_stat_list_repCategory/BMRBx:constraint_stat_list_rep">
      <xsl:variable name="constraint_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_stat_list_id)&lt;64"><xsl:value-of select="@constraint_stat_list_id"/></xsl:when><xsl:when test="contains(@constraint_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_constraint_stat_list_rep>
      <BMRBo:constraint_stat_list_rep rdf:about="{$base}/constraint_stat_list_rep/{$constraint_stat_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_constraint_stat_list_rep rdf:resource="{$base}/constraint_stat_list_rep/{$constraint_stat_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_56_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:constraint_stat_list_rep>
      </BMRBo:has_constraint_stat_list_rep>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:constraint_stats_constr_listCategory/BMRBx:constraint_stats_constr_list">
      <xsl:variable name="constraint_list_category_truncated"><xsl:choose><xsl:when test="string-length(@constraint_list_category)&lt;64"><xsl:value-of select="@constraint_list_category"/></xsl:when><xsl:when test="contains(@constraint_list_category,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_list_category,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_list_category,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_list_category_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_list_category_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_list_id)&lt;64"><xsl:value-of select="@constraint_list_id"/></xsl:when><xsl:when test="contains(@constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_stat_list_id)&lt;64"><xsl:value-of select="@constraint_stat_list_id"/></xsl:when><xsl:when test="contains(@constraint_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_constraint_stats_constr_list>
      <BMRBo:constraint_stats_constr_list rdf:about="{$base}/constraint_stats_constr_list/{$constraint_list_category_encoded},{$constraint_list_id_encoded},{$constraint_stat_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_constraint_stats_constr_list rdf:resource="{$base}/constraint_stats_constr_list/{$constraint_list_category_encoded},{$constraint_list_id_encoded},{$constraint_stat_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_57_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:constraint_stats_constr_list>
      </BMRBo:has_constraint_stats_constr_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:constraint_stats_constr_listCategory/BMRBx:constraint_stats_constr_list">
      <xsl:variable name="constraint_list_category_truncated"><xsl:choose><xsl:when test="string-length(@constraint_list_category)&lt;64"><xsl:value-of select="@constraint_list_category"/></xsl:when><xsl:when test="contains(@constraint_list_category,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_list_category,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_list_category,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_list_category_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_list_category_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_list_id)&lt;64"><xsl:value-of select="@constraint_list_id"/></xsl:when><xsl:when test="contains(@constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="constraint_stat_list_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_stat_list_id)&lt;64"><xsl:value-of select="@constraint_stat_list_id"/></xsl:when><xsl:when test="contains(@constraint_stat_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_stat_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_stat_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_stat_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_stat_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_constraint_stats_constr_list>
      <BMRBo:constraint_stats_constr_list rdf:about="{$base}/constraint_stats_constr_list/{$constraint_list_category_encoded},{$constraint_list_id_encoded},{$constraint_stat_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_constraint_stats_constr_list rdf:resource="{$base}/constraint_stats_constr_list/{$constraint_list_category_encoded},{$constraint_list_id_encoded},{$constraint_stat_list_id_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_57_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:constraint_stats_constr_list>
      </BMRBo:has_constraint_stats_constr_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:coupling_constantCategory/BMRBx:coupling_constant">
      <xsl:variable name="coupling_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@coupling_constant_list_id)&lt;64"><xsl:value-of select="@coupling_constant_list_id"/></xsl:when><xsl:when test="contains(@coupling_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@coupling_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@coupling_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="coupling_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($coupling_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_coupling_constant>
      <BMRBo:coupling_constant rdf:about="{$base}/coupling_constant/{$coupling_constant_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:coupling_constant>
      </BMRBo:has_coupling_constant>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:coupling_constantCategory/BMRBx:coupling_constant">
      <xsl:variable name="coupling_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@coupling_constant_list_id)&lt;64"><xsl:value-of select="@coupling_constant_list_id"/></xsl:when><xsl:when test="contains(@coupling_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@coupling_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@coupling_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="coupling_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($coupling_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_coupling_constant>
      <BMRBo:coupling_constant rdf:about="{$base}/coupling_constant/{$coupling_constant_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:coupling_constant>
      </BMRBo:has_coupling_constant>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:coupling_constant_experimentCategory/BMRBx:coupling_constant_experiment">
      <xsl:variable name="coupling_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@coupling_constant_list_id)&lt;64"><xsl:value-of select="@coupling_constant_list_id"/></xsl:when><xsl:when test="contains(@coupling_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@coupling_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@coupling_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="coupling_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($coupling_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_coupling_constant_experiment>
      <BMRBo:coupling_constant_experiment rdf:about="{$base}/coupling_constant_experiment/{$coupling_constant_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:coupling_constant_experiment>
      </BMRBo:has_coupling_constant_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:coupling_constant_experimentCategory/BMRBx:coupling_constant_experiment">
      <xsl:variable name="coupling_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@coupling_constant_list_id)&lt;64"><xsl:value-of select="@coupling_constant_list_id"/></xsl:when><xsl:when test="contains(@coupling_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@coupling_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@coupling_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="coupling_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($coupling_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_coupling_constant_experiment>
      <BMRBo:coupling_constant_experiment rdf:about="{$base}/coupling_constant_experiment/{$coupling_constant_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:coupling_constant_experiment>
      </BMRBo:has_coupling_constant_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:coupling_constant_listCategory/BMRBx:coupling_constant_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_coupling_constant_list>
      <BMRBo:coupling_constant_list rdf:about="{$base}/coupling_constant_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_coupling_constant_list rdf:resource="{$base}/coupling_constant_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_58_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:coupling_constant_list>
      </BMRBo:has_coupling_constant_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:coupling_constant_listCategory/BMRBx:coupling_constant_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_coupling_constant_list>
      <BMRBo:coupling_constant_list rdf:about="{$base}/coupling_constant_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_coupling_constant_list rdf:resource="{$base}/coupling_constant_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_58_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:coupling_constant_list>
      </BMRBo:has_coupling_constant_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:coupling_constant_softwareCategory/BMRBx:coupling_constant_software">
      <xsl:variable name="coupling_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@coupling_constant_list_id)&lt;64"><xsl:value-of select="@coupling_constant_list_id"/></xsl:when><xsl:when test="contains(@coupling_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@coupling_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@coupling_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="coupling_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($coupling_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_coupling_constant_software>
      <BMRBo:coupling_constant_software rdf:about="{$base}/coupling_constant_software/{$coupling_constant_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:coupling_constant_software>
      </BMRBo:has_coupling_constant_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:coupling_constant_softwareCategory/BMRBx:coupling_constant_software">
      <xsl:variable name="coupling_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@coupling_constant_list_id)&lt;64"><xsl:value-of select="@coupling_constant_list_id"/></xsl:when><xsl:when test="contains(@coupling_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@coupling_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@coupling_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="coupling_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($coupling_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_coupling_constant_software>
      <BMRBo:coupling_constant_software rdf:about="{$base}/coupling_constant_software/{$coupling_constant_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:coupling_constant_software>
      </BMRBo:has_coupling_constant_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_d_csaCategory/BMRBx:cross_correlation_d_csa">
      <xsl:variable name="cross_correlation_d_csa_list_id_truncated"><xsl:choose><xsl:when test="string-length(@cross_correlation_d_csa_list_id)&lt;64"><xsl:value-of select="@cross_correlation_d_csa_list_id"/></xsl:when><xsl:when test="contains(@cross_correlation_d_csa_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@cross_correlation_d_csa_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@cross_correlation_d_csa_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="cross_correlation_d_csa_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($cross_correlation_d_csa_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_d_csa>
      <BMRBo:cross_correlation_d_csa rdf:about="{$base}/cross_correlation_d_csa/{$cross_correlation_d_csa_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_d_csa rdf:resource="{$base}/cross_correlation_d_csa/{$cross_correlation_d_csa_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_59_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_d_csa>
      </BMRBo:has_cross_correlation_d_csa>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_d_csaCategory/BMRBx:cross_correlation_d_csa">
      <xsl:variable name="cross_correlation_d_csa_list_id_truncated"><xsl:choose><xsl:when test="string-length(@cross_correlation_d_csa_list_id)&lt;64"><xsl:value-of select="@cross_correlation_d_csa_list_id"/></xsl:when><xsl:when test="contains(@cross_correlation_d_csa_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@cross_correlation_d_csa_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@cross_correlation_d_csa_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="cross_correlation_d_csa_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($cross_correlation_d_csa_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_d_csa>
      <BMRBo:cross_correlation_d_csa rdf:about="{$base}/cross_correlation_d_csa/{$cross_correlation_d_csa_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_d_csa rdf:resource="{$base}/cross_correlation_d_csa/{$cross_correlation_d_csa_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_59_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_d_csa>
      </BMRBo:has_cross_correlation_d_csa>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_d_csa_experimentCategory/BMRBx:cross_correlation_d_csa_experiment">
      <xsl:variable name="cross_correlation_d_csa_list_id_truncated"><xsl:choose><xsl:when test="string-length(@cross_correlation_d_csa_list_id)&lt;64"><xsl:value-of select="@cross_correlation_d_csa_list_id"/></xsl:when><xsl:when test="contains(@cross_correlation_d_csa_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@cross_correlation_d_csa_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@cross_correlation_d_csa_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="cross_correlation_d_csa_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($cross_correlation_d_csa_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_d_csa_experiment>
      <BMRBo:cross_correlation_d_csa_experiment rdf:about="{$base}/cross_correlation_d_csa_experiment/{$cross_correlation_d_csa_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_d_csa_experiment rdf:resource="{$base}/cross_correlation_d_csa_experiment/{$cross_correlation_d_csa_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_60_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_d_csa_experiment>
      </BMRBo:has_cross_correlation_d_csa_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_d_csa_experimentCategory/BMRBx:cross_correlation_d_csa_experiment">
      <xsl:variable name="cross_correlation_d_csa_list_id_truncated"><xsl:choose><xsl:when test="string-length(@cross_correlation_d_csa_list_id)&lt;64"><xsl:value-of select="@cross_correlation_d_csa_list_id"/></xsl:when><xsl:when test="contains(@cross_correlation_d_csa_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@cross_correlation_d_csa_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@cross_correlation_d_csa_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="cross_correlation_d_csa_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($cross_correlation_d_csa_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_d_csa_experiment>
      <BMRBo:cross_correlation_d_csa_experiment rdf:about="{$base}/cross_correlation_d_csa_experiment/{$cross_correlation_d_csa_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_d_csa_experiment rdf:resource="{$base}/cross_correlation_d_csa_experiment/{$cross_correlation_d_csa_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_60_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_d_csa_experiment>
      </BMRBo:has_cross_correlation_d_csa_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_d_csa_listCategory/BMRBx:cross_correlation_d_csa_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_d_csa_list>
      <BMRBo:cross_correlation_d_csa_list rdf:about="{$base}/cross_correlation_d_csa_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_d_csa_list rdf:resource="{$base}/cross_correlation_d_csa_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_61_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_d_csa_list>
      </BMRBo:has_cross_correlation_d_csa_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_d_csa_listCategory/BMRBx:cross_correlation_d_csa_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_d_csa_list>
      <BMRBo:cross_correlation_d_csa_list rdf:about="{$base}/cross_correlation_d_csa_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_d_csa_list rdf:resource="{$base}/cross_correlation_d_csa_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_61_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_d_csa_list>
      </BMRBo:has_cross_correlation_d_csa_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_d_csa_softwareCategory/BMRBx:cross_correlation_d_csa_software">
      <xsl:variable name="cross_correlation_d_csa_list_id_truncated"><xsl:choose><xsl:when test="string-length(@cross_correlation_d_csa_list_id)&lt;64"><xsl:value-of select="@cross_correlation_d_csa_list_id"/></xsl:when><xsl:when test="contains(@cross_correlation_d_csa_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@cross_correlation_d_csa_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@cross_correlation_d_csa_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="cross_correlation_d_csa_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($cross_correlation_d_csa_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_d_csa_software>
      <BMRBo:cross_correlation_d_csa_software rdf:about="{$base}/cross_correlation_d_csa_software/{$cross_correlation_d_csa_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_d_csa_software rdf:resource="{$base}/cross_correlation_d_csa_software/{$cross_correlation_d_csa_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_62_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_d_csa_software>
      </BMRBo:has_cross_correlation_d_csa_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_d_csa_softwareCategory/BMRBx:cross_correlation_d_csa_software">
      <xsl:variable name="cross_correlation_d_csa_list_id_truncated"><xsl:choose><xsl:when test="string-length(@cross_correlation_d_csa_list_id)&lt;64"><xsl:value-of select="@cross_correlation_d_csa_list_id"/></xsl:when><xsl:when test="contains(@cross_correlation_d_csa_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@cross_correlation_d_csa_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@cross_correlation_d_csa_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="cross_correlation_d_csa_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($cross_correlation_d_csa_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_d_csa_software>
      <BMRBo:cross_correlation_d_csa_software rdf:about="{$base}/cross_correlation_d_csa_software/{$cross_correlation_d_csa_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_d_csa_software rdf:resource="{$base}/cross_correlation_d_csa_software/{$cross_correlation_d_csa_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_62_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_d_csa_software>
      </BMRBo:has_cross_correlation_d_csa_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_ddCategory/BMRBx:cross_correlation_dd">
      <xsl:variable name="cross_correlation_dd_list_id_truncated"><xsl:choose><xsl:when test="string-length(@cross_correlation_dd_list_id)&lt;64"><xsl:value-of select="@cross_correlation_dd_list_id"/></xsl:when><xsl:when test="contains(@cross_correlation_dd_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@cross_correlation_dd_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@cross_correlation_dd_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="cross_correlation_dd_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($cross_correlation_dd_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_dd>
      <BMRBo:cross_correlation_dd rdf:about="{$base}/cross_correlation_dd/{$cross_correlation_dd_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_dd rdf:resource="{$base}/cross_correlation_dd/{$cross_correlation_dd_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_63_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_dd>
      </BMRBo:has_cross_correlation_dd>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_ddCategory/BMRBx:cross_correlation_dd">
      <xsl:variable name="cross_correlation_dd_list_id_truncated"><xsl:choose><xsl:when test="string-length(@cross_correlation_dd_list_id)&lt;64"><xsl:value-of select="@cross_correlation_dd_list_id"/></xsl:when><xsl:when test="contains(@cross_correlation_dd_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@cross_correlation_dd_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@cross_correlation_dd_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="cross_correlation_dd_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($cross_correlation_dd_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_dd>
      <BMRBo:cross_correlation_dd rdf:about="{$base}/cross_correlation_dd/{$cross_correlation_dd_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_dd rdf:resource="{$base}/cross_correlation_dd/{$cross_correlation_dd_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_63_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_dd>
      </BMRBo:has_cross_correlation_dd>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_dd_experimentCategory/BMRBx:cross_correlation_dd_experiment">
      <xsl:variable name="cross_correlation_dd_list_id_truncated"><xsl:choose><xsl:when test="string-length(@cross_correlation_dd_list_id)&lt;64"><xsl:value-of select="@cross_correlation_dd_list_id"/></xsl:when><xsl:when test="contains(@cross_correlation_dd_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@cross_correlation_dd_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@cross_correlation_dd_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="cross_correlation_dd_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($cross_correlation_dd_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_dd_experiment>
      <BMRBo:cross_correlation_dd_experiment rdf:about="{$base}/cross_correlation_dd_experiment/{$cross_correlation_dd_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_dd_experiment rdf:resource="{$base}/cross_correlation_dd_experiment/{$cross_correlation_dd_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_64_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_dd_experiment>
      </BMRBo:has_cross_correlation_dd_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_dd_experimentCategory/BMRBx:cross_correlation_dd_experiment">
      <xsl:variable name="cross_correlation_dd_list_id_truncated"><xsl:choose><xsl:when test="string-length(@cross_correlation_dd_list_id)&lt;64"><xsl:value-of select="@cross_correlation_dd_list_id"/></xsl:when><xsl:when test="contains(@cross_correlation_dd_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@cross_correlation_dd_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@cross_correlation_dd_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="cross_correlation_dd_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($cross_correlation_dd_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_dd_experiment>
      <BMRBo:cross_correlation_dd_experiment rdf:about="{$base}/cross_correlation_dd_experiment/{$cross_correlation_dd_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_dd_experiment rdf:resource="{$base}/cross_correlation_dd_experiment/{$cross_correlation_dd_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_64_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_dd_experiment>
      </BMRBo:has_cross_correlation_dd_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_dd_listCategory/BMRBx:cross_correlation_dd_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_dd_list>
      <BMRBo:cross_correlation_dd_list rdf:about="{$base}/cross_correlation_dd_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_dd_list rdf:resource="{$base}/cross_correlation_dd_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_65_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_dd_list>
      </BMRBo:has_cross_correlation_dd_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_dd_listCategory/BMRBx:cross_correlation_dd_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_dd_list>
      <BMRBo:cross_correlation_dd_list rdf:about="{$base}/cross_correlation_dd_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_dd_list rdf:resource="{$base}/cross_correlation_dd_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_65_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_dd_list>
      </BMRBo:has_cross_correlation_dd_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_dd_softwareCategory/BMRBx:cross_correlation_dd_software">
      <xsl:variable name="cross_correlation_dd_list_id_truncated"><xsl:choose><xsl:when test="string-length(@cross_correlation_dd_list_id)&lt;64"><xsl:value-of select="@cross_correlation_dd_list_id"/></xsl:when><xsl:when test="contains(@cross_correlation_dd_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@cross_correlation_dd_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@cross_correlation_dd_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="cross_correlation_dd_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($cross_correlation_dd_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_dd_software>
      <BMRBo:cross_correlation_dd_software rdf:about="{$base}/cross_correlation_dd_software/{$cross_correlation_dd_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_dd_software rdf:resource="{$base}/cross_correlation_dd_software/{$cross_correlation_dd_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_66_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_dd_software>
      </BMRBo:has_cross_correlation_dd_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cross_correlation_dd_softwareCategory/BMRBx:cross_correlation_dd_software">
      <xsl:variable name="cross_correlation_dd_list_id_truncated"><xsl:choose><xsl:when test="string-length(@cross_correlation_dd_list_id)&lt;64"><xsl:value-of select="@cross_correlation_dd_list_id"/></xsl:when><xsl:when test="contains(@cross_correlation_dd_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@cross_correlation_dd_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@cross_correlation_dd_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="cross_correlation_dd_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($cross_correlation_dd_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cross_correlation_dd_software>
      <BMRBo:cross_correlation_dd_software rdf:about="{$base}/cross_correlation_dd_software/{$cross_correlation_dd_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_cross_correlation_dd_software rdf:resource="{$base}/cross_correlation_dd_software/{$cross_correlation_dd_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_66_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cross_correlation_dd_software>
      </BMRBo:has_cross_correlation_dd_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cs_anisotropyCategory/BMRBx:cs_anisotropy">
      <xsl:variable name="chem_shift_anisotropy_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_anisotropy_id)&lt;64"><xsl:value-of select="@chem_shift_anisotropy_id"/></xsl:when><xsl:when test="contains(@chem_shift_anisotropy_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_anisotropy_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_anisotropy_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_anisotropy_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_anisotropy_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cs_anisotropy>
      <BMRBo:cs_anisotropy rdf:about="{$base}/cs_anisotropy/{$chem_shift_anisotropy_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cs_anisotropy>
      </BMRBo:has_cs_anisotropy>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cs_anisotropyCategory/BMRBx:cs_anisotropy">
      <xsl:variable name="chem_shift_anisotropy_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_anisotropy_id)&lt;64"><xsl:value-of select="@chem_shift_anisotropy_id"/></xsl:when><xsl:when test="contains(@chem_shift_anisotropy_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_anisotropy_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_anisotropy_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_anisotropy_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_anisotropy_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cs_anisotropy>
      <BMRBo:cs_anisotropy rdf:about="{$base}/cs_anisotropy/{$chem_shift_anisotropy_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cs_anisotropy>
      </BMRBo:has_cs_anisotropy>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cs_anisotropy_experimentCategory/BMRBx:cs_anisotropy_experiment">
      <xsl:variable name="chem_shift_anisotropy_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_anisotropy_id)&lt;64"><xsl:value-of select="@chem_shift_anisotropy_id"/></xsl:when><xsl:when test="contains(@chem_shift_anisotropy_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_anisotropy_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_anisotropy_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_anisotropy_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_anisotropy_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cs_anisotropy_experiment>
      <BMRBo:cs_anisotropy_experiment rdf:about="{$base}/cs_anisotropy_experiment/{$chem_shift_anisotropy_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cs_anisotropy_experiment>
      </BMRBo:has_cs_anisotropy_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cs_anisotropy_experimentCategory/BMRBx:cs_anisotropy_experiment">
      <xsl:variable name="chem_shift_anisotropy_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_anisotropy_id)&lt;64"><xsl:value-of select="@chem_shift_anisotropy_id"/></xsl:when><xsl:when test="contains(@chem_shift_anisotropy_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_anisotropy_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_anisotropy_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_anisotropy_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_anisotropy_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cs_anisotropy_experiment>
      <BMRBo:cs_anisotropy_experiment rdf:about="{$base}/cs_anisotropy_experiment/{$chem_shift_anisotropy_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cs_anisotropy_experiment>
      </BMRBo:has_cs_anisotropy_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cs_anisotropy_softwareCategory/BMRBx:cs_anisotropy_software">
      <xsl:variable name="chem_shift_anisotropy_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_anisotropy_id)&lt;64"><xsl:value-of select="@chem_shift_anisotropy_id"/></xsl:when><xsl:when test="contains(@chem_shift_anisotropy_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_anisotropy_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_anisotropy_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_anisotropy_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_anisotropy_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cs_anisotropy_software>
      <BMRBo:cs_anisotropy_software rdf:about="{$base}/cs_anisotropy_software/{$chem_shift_anisotropy_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cs_anisotropy_software>
      </BMRBo:has_cs_anisotropy_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:cs_anisotropy_softwareCategory/BMRBx:cs_anisotropy_software">
      <xsl:variable name="chem_shift_anisotropy_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_anisotropy_id)&lt;64"><xsl:value-of select="@chem_shift_anisotropy_id"/></xsl:when><xsl:when test="contains(@chem_shift_anisotropy_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_anisotropy_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_anisotropy_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_anisotropy_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_anisotropy_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_cs_anisotropy_software>
      <BMRBo:cs_anisotropy_software rdf:about="{$base}/cs_anisotropy_software/{$chem_shift_anisotropy_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:cs_anisotropy_software>
      </BMRBo:has_cs_anisotropy_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:d_h_fract_factor_experimentCategory/BMRBx:d_h_fract_factor_experiment">
      <xsl:variable name="d_h_fractionation_factor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@d_h_fractionation_factor_list_id)&lt;64"><xsl:value-of select="@d_h_fractionation_factor_list_id"/></xsl:when><xsl:when test="contains(@d_h_fractionation_factor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@d_h_fractionation_factor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@d_h_fractionation_factor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="d_h_fractionation_factor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($d_h_fractionation_factor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_d_h_fract_factor_experiment>
      <BMRBo:d_h_fract_factor_experiment rdf:about="{$base}/d_h_fract_factor_experiment/{$d_h_fractionation_factor_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_d_h_fract_factor_experiment rdf:resource="{$base}/d_h_fract_factor_experiment/{$d_h_fractionation_factor_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_67_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:d_h_fract_factor_experiment>
      </BMRBo:has_d_h_fract_factor_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:d_h_fract_factor_experimentCategory/BMRBx:d_h_fract_factor_experiment">
      <xsl:variable name="d_h_fractionation_factor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@d_h_fractionation_factor_list_id)&lt;64"><xsl:value-of select="@d_h_fractionation_factor_list_id"/></xsl:when><xsl:when test="contains(@d_h_fractionation_factor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@d_h_fractionation_factor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@d_h_fractionation_factor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="d_h_fractionation_factor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($d_h_fractionation_factor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_d_h_fract_factor_experiment>
      <BMRBo:d_h_fract_factor_experiment rdf:about="{$base}/d_h_fract_factor_experiment/{$d_h_fractionation_factor_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_d_h_fract_factor_experiment rdf:resource="{$base}/d_h_fract_factor_experiment/{$d_h_fractionation_factor_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_67_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:d_h_fract_factor_experiment>
      </BMRBo:has_d_h_fract_factor_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:d_h_fract_factor_softwareCategory/BMRBx:d_h_fract_factor_software">
      <xsl:variable name="d_h_fractionation_factor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@d_h_fractionation_factor_list_id)&lt;64"><xsl:value-of select="@d_h_fractionation_factor_list_id"/></xsl:when><xsl:when test="contains(@d_h_fractionation_factor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@d_h_fractionation_factor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@d_h_fractionation_factor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="d_h_fractionation_factor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($d_h_fractionation_factor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_d_h_fract_factor_software>
      <BMRBo:d_h_fract_factor_software rdf:about="{$base}/d_h_fract_factor_software/{$d_h_fractionation_factor_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_d_h_fract_factor_software rdf:resource="{$base}/d_h_fract_factor_software/{$d_h_fractionation_factor_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_68_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:d_h_fract_factor_software>
      </BMRBo:has_d_h_fract_factor_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:d_h_fract_factor_softwareCategory/BMRBx:d_h_fract_factor_software">
      <xsl:variable name="d_h_fractionation_factor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@d_h_fractionation_factor_list_id)&lt;64"><xsl:value-of select="@d_h_fractionation_factor_list_id"/></xsl:when><xsl:when test="contains(@d_h_fractionation_factor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@d_h_fractionation_factor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@d_h_fractionation_factor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="d_h_fractionation_factor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($d_h_fractionation_factor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_d_h_fract_factor_software>
      <BMRBo:d_h_fract_factor_software rdf:about="{$base}/d_h_fract_factor_software/{$d_h_fractionation_factor_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_d_h_fract_factor_software rdf:resource="{$base}/d_h_fract_factor_software/{$d_h_fractionation_factor_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_68_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:d_h_fract_factor_software>
      </BMRBo:has_d_h_fract_factor_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:d_h_fractionation_factorCategory/BMRBx:d_h_fractionation_factor">
      <xsl:variable name="d_h_fractionation_factor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@d_h_fractionation_factor_list_id)&lt;64"><xsl:value-of select="@d_h_fractionation_factor_list_id"/></xsl:when><xsl:when test="contains(@d_h_fractionation_factor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@d_h_fractionation_factor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@d_h_fractionation_factor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="d_h_fractionation_factor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($d_h_fractionation_factor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_d_h_fractionation_factor>
      <BMRBo:d_h_fractionation_factor rdf:about="{$base}/d_h_fractionation_factor/{$d_h_fractionation_factor_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_d_h_fractionation_factor rdf:resource="{$base}/d_h_fractionation_factor/{$d_h_fractionation_factor_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_69_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:d_h_fractionation_factor>
      </BMRBo:has_d_h_fractionation_factor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:d_h_fractionation_factorCategory/BMRBx:d_h_fractionation_factor">
      <xsl:variable name="d_h_fractionation_factor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@d_h_fractionation_factor_list_id)&lt;64"><xsl:value-of select="@d_h_fractionation_factor_list_id"/></xsl:when><xsl:when test="contains(@d_h_fractionation_factor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@d_h_fractionation_factor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@d_h_fractionation_factor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="d_h_fractionation_factor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($d_h_fractionation_factor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_d_h_fractionation_factor>
      <BMRBo:d_h_fractionation_factor rdf:about="{$base}/d_h_fractionation_factor/{$d_h_fractionation_factor_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_d_h_fractionation_factor rdf:resource="{$base}/d_h_fractionation_factor/{$d_h_fractionation_factor_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_69_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:d_h_fractionation_factor>
      </BMRBo:has_d_h_fractionation_factor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:d_h_fractionation_factor_listCategory/BMRBx:d_h_fractionation_factor_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_d_h_fractionation_factor_list>
      <BMRBo:d_h_fractionation_factor_list rdf:about="{$base}/d_h_fractionation_factor_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_d_h_fractionation_factor_list rdf:resource="{$base}/d_h_fractionation_factor_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_70_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:d_h_fractionation_factor_list>
      </BMRBo:has_d_h_fractionation_factor_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:d_h_fractionation_factor_listCategory/BMRBx:d_h_fractionation_factor_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_d_h_fractionation_factor_list>
      <BMRBo:d_h_fractionation_factor_list rdf:about="{$base}/d_h_fractionation_factor_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_d_h_fractionation_factor_list rdf:resource="{$base}/d_h_fractionation_factor_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_70_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:d_h_fractionation_factor_list>
      </BMRBo:has_d_h_fractionation_factor_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:data_setCategory/BMRBx:data_set">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_data_set>
      <BMRBo:data_set rdf:about="{$base}/data_set/{$entry_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_data_set rdf:resource="{$base}/data_set/{$entry_id_encoded},{$type_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_71_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:data_set>
      </BMRBo:has_data_set>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:data_setCategory/BMRBx:data_set">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_data_set>
      <BMRBo:data_set rdf:about="{$base}/data_set/{$entry_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_data_set rdf:resource="{$base}/data_set/{$entry_id_encoded},{$type_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_71_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:data_set>
      </BMRBo:has_data_set>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:datumCategory/BMRBx:datum">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_datum>
      <BMRBo:datum rdf:about="{$base}/datum/{$entry_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_datum rdf:resource="{$base}/datum/{$entry_id_encoded},{$type_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_72_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:datum>
      </BMRBo:has_datum>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:datumCategory/BMRBx:datum">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_datum>
      <BMRBo:datum rdf:about="{$base}/datum/{$entry_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_datum rdf:resource="{$base}/datum/{$entry_id_encoded},{$type_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_72_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:datum>
      </BMRBo:has_datum>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:decoupling_pulse_sequenceCategory/BMRBx:decoupling_pulse_sequence">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spec_expt_id)&lt;64"><xsl:value-of select="@nmr_spec_expt_id"/></xsl:when><xsl:when test="contains(@nmr_spec_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spec_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spec_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spec_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="time_period_truncated"><xsl:choose><xsl:when test="string-length(@time_period)&lt;64"><xsl:value-of select="@time_period"/></xsl:when><xsl:when test="contains(@time_period,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@time_period,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@time_period,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="time_period_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($time_period_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_decoupling_pulse_sequence>
      <BMRBo:decoupling_pulse_sequence rdf:about="{$base}/decoupling_pulse_sequence/{$entry_id_encoded},{$name_encoded},{$nmr_spec_expt_id_encoded},{$time_period_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:decoupling_pulse_sequence>
      </BMRBo:has_decoupling_pulse_sequence>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:decoupling_pulse_sequenceCategory/BMRBx:decoupling_pulse_sequence">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spec_expt_id)&lt;64"><xsl:value-of select="@nmr_spec_expt_id"/></xsl:when><xsl:when test="contains(@nmr_spec_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spec_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spec_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spec_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="time_period_truncated"><xsl:choose><xsl:when test="string-length(@time_period)&lt;64"><xsl:value-of select="@time_period"/></xsl:when><xsl:when test="contains(@time_period,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@time_period,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@time_period,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="time_period_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($time_period_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_decoupling_pulse_sequence>
      <BMRBo:decoupling_pulse_sequence rdf:about="{$base}/decoupling_pulse_sequence/{$entry_id_encoded},{$name_encoded},{$nmr_spec_expt_id_encoded},{$time_period_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:decoupling_pulse_sequence>
      </BMRBo:has_decoupling_pulse_sequence>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_h_bondCategory/BMRBx:deduced_h_bond">
      <xsl:variable name="deduced_hydrogen_bond_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_hydrogen_bond_list_id)&lt;64"><xsl:value-of select="@deduced_hydrogen_bond_list_id"/></xsl:when><xsl:when test="contains(@deduced_hydrogen_bond_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_hydrogen_bond_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_hydrogen_bond_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_hydrogen_bond_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_hydrogen_bond_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_h_bond>
      <BMRBo:deduced_h_bond rdf:about="{$base}/deduced_h_bond/{$deduced_hydrogen_bond_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_h_bond rdf:resource="{$base}/deduced_h_bond/{$deduced_hydrogen_bond_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_73_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_h_bond>
      </BMRBo:has_deduced_h_bond>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_h_bondCategory/BMRBx:deduced_h_bond">
      <xsl:variable name="deduced_hydrogen_bond_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_hydrogen_bond_list_id)&lt;64"><xsl:value-of select="@deduced_hydrogen_bond_list_id"/></xsl:when><xsl:when test="contains(@deduced_hydrogen_bond_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_hydrogen_bond_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_hydrogen_bond_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_hydrogen_bond_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_hydrogen_bond_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_h_bond>
      <BMRBo:deduced_h_bond rdf:about="{$base}/deduced_h_bond/{$deduced_hydrogen_bond_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_h_bond rdf:resource="{$base}/deduced_h_bond/{$deduced_hydrogen_bond_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_73_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_h_bond>
      </BMRBo:has_deduced_h_bond>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_h_bond_experimentCategory/BMRBx:deduced_h_bond_experiment">
      <xsl:variable name="deduced_h_bond_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_h_bond_list_id)&lt;64"><xsl:value-of select="@deduced_h_bond_list_id"/></xsl:when><xsl:when test="contains(@deduced_h_bond_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_h_bond_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_h_bond_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_h_bond_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_h_bond_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_h_bond_experiment>
      <BMRBo:deduced_h_bond_experiment rdf:about="{$base}/deduced_h_bond_experiment/{$deduced_h_bond_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_h_bond_experiment rdf:resource="{$base}/deduced_h_bond_experiment/{$deduced_h_bond_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_74_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_h_bond_experiment>
      </BMRBo:has_deduced_h_bond_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_h_bond_experimentCategory/BMRBx:deduced_h_bond_experiment">
      <xsl:variable name="deduced_h_bond_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_h_bond_list_id)&lt;64"><xsl:value-of select="@deduced_h_bond_list_id"/></xsl:when><xsl:when test="contains(@deduced_h_bond_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_h_bond_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_h_bond_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_h_bond_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_h_bond_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_h_bond_experiment>
      <BMRBo:deduced_h_bond_experiment rdf:about="{$base}/deduced_h_bond_experiment/{$deduced_h_bond_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_h_bond_experiment rdf:resource="{$base}/deduced_h_bond_experiment/{$deduced_h_bond_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_74_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_h_bond_experiment>
      </BMRBo:has_deduced_h_bond_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_h_bond_listCategory/BMRBx:deduced_h_bond_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_h_bond_list>
      <BMRBo:deduced_h_bond_list rdf:about="{$base}/deduced_h_bond_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_h_bond_list rdf:resource="{$base}/deduced_h_bond_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_75_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_h_bond_list>
      </BMRBo:has_deduced_h_bond_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_h_bond_listCategory/BMRBx:deduced_h_bond_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_h_bond_list>
      <BMRBo:deduced_h_bond_list rdf:about="{$base}/deduced_h_bond_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_h_bond_list rdf:resource="{$base}/deduced_h_bond_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_75_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_h_bond_list>
      </BMRBo:has_deduced_h_bond_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_h_bond_softwareCategory/BMRBx:deduced_h_bond_software">
      <xsl:variable name="deduced_h_bond_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_h_bond_list_id)&lt;64"><xsl:value-of select="@deduced_h_bond_list_id"/></xsl:when><xsl:when test="contains(@deduced_h_bond_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_h_bond_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_h_bond_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_h_bond_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_h_bond_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_h_bond_software>
      <BMRBo:deduced_h_bond_software rdf:about="{$base}/deduced_h_bond_software/{$deduced_h_bond_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_h_bond_software rdf:resource="{$base}/deduced_h_bond_software/{$deduced_h_bond_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_76_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_h_bond_software>
      </BMRBo:has_deduced_h_bond_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_h_bond_softwareCategory/BMRBx:deduced_h_bond_software">
      <xsl:variable name="deduced_h_bond_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_h_bond_list_id)&lt;64"><xsl:value-of select="@deduced_h_bond_list_id"/></xsl:when><xsl:when test="contains(@deduced_h_bond_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_h_bond_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_h_bond_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_h_bond_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_h_bond_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_h_bond_software>
      <BMRBo:deduced_h_bond_software rdf:about="{$base}/deduced_h_bond_software/{$deduced_h_bond_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_h_bond_software rdf:resource="{$base}/deduced_h_bond_software/{$deduced_h_bond_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_76_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_h_bond_software>
      </BMRBo:has_deduced_h_bond_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_secd_struct_experimentCategory/BMRBx:deduced_secd_struct_experiment">
      <xsl:variable name="deduced_secd_struct_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_secd_struct_list_id)&lt;64"><xsl:value-of select="@deduced_secd_struct_list_id"/></xsl:when><xsl:when test="contains(@deduced_secd_struct_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_secd_struct_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_secd_struct_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_secd_struct_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_secd_struct_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_secd_struct_experiment>
      <BMRBo:deduced_secd_struct_experiment rdf:about="{$base}/deduced_secd_struct_experiment/{$deduced_secd_struct_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_secd_struct_experiment rdf:resource="{$base}/deduced_secd_struct_experiment/{$deduced_secd_struct_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_77_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_secd_struct_experiment>
      </BMRBo:has_deduced_secd_struct_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_secd_struct_experimentCategory/BMRBx:deduced_secd_struct_experiment">
      <xsl:variable name="deduced_secd_struct_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_secd_struct_list_id)&lt;64"><xsl:value-of select="@deduced_secd_struct_list_id"/></xsl:when><xsl:when test="contains(@deduced_secd_struct_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_secd_struct_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_secd_struct_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_secd_struct_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_secd_struct_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_secd_struct_experiment>
      <BMRBo:deduced_secd_struct_experiment rdf:about="{$base}/deduced_secd_struct_experiment/{$deduced_secd_struct_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_secd_struct_experiment rdf:resource="{$base}/deduced_secd_struct_experiment/{$deduced_secd_struct_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_77_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_secd_struct_experiment>
      </BMRBo:has_deduced_secd_struct_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_secd_struct_exptlCategory/BMRBx:deduced_secd_struct_exptl">
      <xsl:variable name="deduced_secd_struct_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_secd_struct_list_id)&lt;64"><xsl:value-of select="@deduced_secd_struct_list_id"/></xsl:when><xsl:when test="contains(@deduced_secd_struct_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_secd_struct_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_secd_struct_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_secd_struct_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_secd_struct_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_secd_struct_exptl>
      <BMRBo:deduced_secd_struct_exptl rdf:about="{$base}/deduced_secd_struct_exptl/{$deduced_secd_struct_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_secd_struct_exptl rdf:resource="{$base}/deduced_secd_struct_exptl/{$deduced_secd_struct_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_78_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_secd_struct_exptl>
      </BMRBo:has_deduced_secd_struct_exptl>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_secd_struct_exptlCategory/BMRBx:deduced_secd_struct_exptl">
      <xsl:variable name="deduced_secd_struct_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_secd_struct_list_id)&lt;64"><xsl:value-of select="@deduced_secd_struct_list_id"/></xsl:when><xsl:when test="contains(@deduced_secd_struct_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_secd_struct_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_secd_struct_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_secd_struct_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_secd_struct_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_secd_struct_exptl>
      <BMRBo:deduced_secd_struct_exptl rdf:about="{$base}/deduced_secd_struct_exptl/{$deduced_secd_struct_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_secd_struct_exptl rdf:resource="{$base}/deduced_secd_struct_exptl/{$deduced_secd_struct_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_78_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_secd_struct_exptl>
      </BMRBo:has_deduced_secd_struct_exptl>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_secd_struct_featureCategory/BMRBx:deduced_secd_struct_feature">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="deduced_secd_struct_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_secd_struct_list_id)&lt;64"><xsl:value-of select="@deduced_secd_struct_list_id"/></xsl:when><xsl:when test="contains(@deduced_secd_struct_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_secd_struct_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_secd_struct_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_secd_struct_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_secd_struct_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_secd_struct_feature>
      <BMRBo:deduced_secd_struct_feature rdf:about="{$base}/deduced_secd_struct_feature/{$atom_id_encoded},{$comp_index_id_encoded},{$deduced_secd_struct_list_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_secd_struct_feature rdf:resource="{$base}/deduced_secd_struct_feature/{$atom_id_encoded},{$comp_index_id_encoded},{$deduced_secd_struct_list_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_79_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_secd_struct_feature>
      </BMRBo:has_deduced_secd_struct_feature>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_secd_struct_featureCategory/BMRBx:deduced_secd_struct_feature">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="deduced_secd_struct_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_secd_struct_list_id)&lt;64"><xsl:value-of select="@deduced_secd_struct_list_id"/></xsl:when><xsl:when test="contains(@deduced_secd_struct_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_secd_struct_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_secd_struct_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_secd_struct_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_secd_struct_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_secd_struct_feature>
      <BMRBo:deduced_secd_struct_feature rdf:about="{$base}/deduced_secd_struct_feature/{$atom_id_encoded},{$comp_index_id_encoded},{$deduced_secd_struct_list_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_secd_struct_feature rdf:resource="{$base}/deduced_secd_struct_feature/{$atom_id_encoded},{$comp_index_id_encoded},{$deduced_secd_struct_list_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_79_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_secd_struct_feature>
      </BMRBo:has_deduced_secd_struct_feature>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_secd_struct_listCategory/BMRBx:deduced_secd_struct_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_secd_struct_list>
      <BMRBo:deduced_secd_struct_list rdf:about="{$base}/deduced_secd_struct_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_secd_struct_list rdf:resource="{$base}/deduced_secd_struct_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_80_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_secd_struct_list>
      </BMRBo:has_deduced_secd_struct_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_secd_struct_listCategory/BMRBx:deduced_secd_struct_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_secd_struct_list>
      <BMRBo:deduced_secd_struct_list rdf:about="{$base}/deduced_secd_struct_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_secd_struct_list rdf:resource="{$base}/deduced_secd_struct_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_80_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_secd_struct_list>
      </BMRBo:has_deduced_secd_struct_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_secd_struct_softwareCategory/BMRBx:deduced_secd_struct_software">
      <xsl:variable name="deduced_secd_struct_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_secd_struct_list_id)&lt;64"><xsl:value-of select="@deduced_secd_struct_list_id"/></xsl:when><xsl:when test="contains(@deduced_secd_struct_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_secd_struct_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_secd_struct_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_secd_struct_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_secd_struct_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_secd_struct_software>
      <BMRBo:deduced_secd_struct_software rdf:about="{$base}/deduced_secd_struct_software/{$deduced_secd_struct_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_secd_struct_software rdf:resource="{$base}/deduced_secd_struct_software/{$deduced_secd_struct_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_81_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_secd_struct_software>
      </BMRBo:has_deduced_secd_struct_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:deduced_secd_struct_softwareCategory/BMRBx:deduced_secd_struct_software">
      <xsl:variable name="deduced_secd_struct_list_id_truncated"><xsl:choose><xsl:when test="string-length(@deduced_secd_struct_list_id)&lt;64"><xsl:value-of select="@deduced_secd_struct_list_id"/></xsl:when><xsl:when test="contains(@deduced_secd_struct_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@deduced_secd_struct_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@deduced_secd_struct_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="deduced_secd_struct_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($deduced_secd_struct_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_deduced_secd_struct_software>
      <BMRBo:deduced_secd_struct_software rdf:about="{$base}/deduced_secd_struct_software/{$deduced_secd_struct_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_deduced_secd_struct_software rdf:resource="{$base}/deduced_secd_struct_software/{$deduced_secd_struct_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_81_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:deduced_secd_struct_software>
      </BMRBo:has_deduced_secd_struct_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipolar_couplingCategory/BMRBx:dipolar_coupling">
      <xsl:variable name="dipolar_coupling_list_id_truncated"><xsl:choose><xsl:when test="string-length(@dipolar_coupling_list_id)&lt;64"><xsl:value-of select="@dipolar_coupling_list_id"/></xsl:when><xsl:when test="contains(@dipolar_coupling_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@dipolar_coupling_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@dipolar_coupling_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="dipolar_coupling_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($dipolar_coupling_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipolar_coupling>
      <BMRBo:dipolar_coupling rdf:about="{$base}/dipolar_coupling/{$dipolar_coupling_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipolar_coupling rdf:resource="{$base}/dipolar_coupling/{$dipolar_coupling_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_82_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipolar_coupling>
      </BMRBo:has_dipolar_coupling>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipolar_couplingCategory/BMRBx:dipolar_coupling">
      <xsl:variable name="dipolar_coupling_list_id_truncated"><xsl:choose><xsl:when test="string-length(@dipolar_coupling_list_id)&lt;64"><xsl:value-of select="@dipolar_coupling_list_id"/></xsl:when><xsl:when test="contains(@dipolar_coupling_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@dipolar_coupling_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@dipolar_coupling_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="dipolar_coupling_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($dipolar_coupling_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipolar_coupling>
      <BMRBo:dipolar_coupling rdf:about="{$base}/dipolar_coupling/{$dipolar_coupling_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipolar_coupling rdf:resource="{$base}/dipolar_coupling/{$dipolar_coupling_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_82_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipolar_coupling>
      </BMRBo:has_dipolar_coupling>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipolar_coupling_experimentCategory/BMRBx:dipolar_coupling_experiment">
      <xsl:variable name="dipolar_coupling_list_id_truncated"><xsl:choose><xsl:when test="string-length(@dipolar_coupling_list_id)&lt;64"><xsl:value-of select="@dipolar_coupling_list_id"/></xsl:when><xsl:when test="contains(@dipolar_coupling_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@dipolar_coupling_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@dipolar_coupling_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="dipolar_coupling_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($dipolar_coupling_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipolar_coupling_experiment>
      <BMRBo:dipolar_coupling_experiment rdf:about="{$base}/dipolar_coupling_experiment/{$dipolar_coupling_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipolar_coupling_experiment rdf:resource="{$base}/dipolar_coupling_experiment/{$dipolar_coupling_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_83_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipolar_coupling_experiment>
      </BMRBo:has_dipolar_coupling_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipolar_coupling_experimentCategory/BMRBx:dipolar_coupling_experiment">
      <xsl:variable name="dipolar_coupling_list_id_truncated"><xsl:choose><xsl:when test="string-length(@dipolar_coupling_list_id)&lt;64"><xsl:value-of select="@dipolar_coupling_list_id"/></xsl:when><xsl:when test="contains(@dipolar_coupling_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@dipolar_coupling_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@dipolar_coupling_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="dipolar_coupling_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($dipolar_coupling_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipolar_coupling_experiment>
      <BMRBo:dipolar_coupling_experiment rdf:about="{$base}/dipolar_coupling_experiment/{$dipolar_coupling_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipolar_coupling_experiment rdf:resource="{$base}/dipolar_coupling_experiment/{$dipolar_coupling_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_83_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipolar_coupling_experiment>
      </BMRBo:has_dipolar_coupling_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipolar_coupling_listCategory/BMRBx:dipolar_coupling_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipolar_coupling_list>
      <BMRBo:dipolar_coupling_list rdf:about="{$base}/dipolar_coupling_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipolar_coupling_list rdf:resource="{$base}/dipolar_coupling_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_84_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipolar_coupling_list>
      </BMRBo:has_dipolar_coupling_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipolar_coupling_listCategory/BMRBx:dipolar_coupling_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipolar_coupling_list>
      <BMRBo:dipolar_coupling_list rdf:about="{$base}/dipolar_coupling_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipolar_coupling_list rdf:resource="{$base}/dipolar_coupling_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_84_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipolar_coupling_list>
      </BMRBo:has_dipolar_coupling_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipolar_coupling_softwareCategory/BMRBx:dipolar_coupling_software">
      <xsl:variable name="dipolar_coupling_list_id_truncated"><xsl:choose><xsl:when test="string-length(@dipolar_coupling_list_id)&lt;64"><xsl:value-of select="@dipolar_coupling_list_id"/></xsl:when><xsl:when test="contains(@dipolar_coupling_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@dipolar_coupling_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@dipolar_coupling_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="dipolar_coupling_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($dipolar_coupling_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipolar_coupling_software>
      <BMRBo:dipolar_coupling_software rdf:about="{$base}/dipolar_coupling_software/{$dipolar_coupling_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipolar_coupling_software rdf:resource="{$base}/dipolar_coupling_software/{$dipolar_coupling_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_85_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipolar_coupling_software>
      </BMRBo:has_dipolar_coupling_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipolar_coupling_softwareCategory/BMRBx:dipolar_coupling_software">
      <xsl:variable name="dipolar_coupling_list_id_truncated"><xsl:choose><xsl:when test="string-length(@dipolar_coupling_list_id)&lt;64"><xsl:value-of select="@dipolar_coupling_list_id"/></xsl:when><xsl:when test="contains(@dipolar_coupling_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@dipolar_coupling_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@dipolar_coupling_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="dipolar_coupling_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($dipolar_coupling_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipolar_coupling_software>
      <BMRBo:dipolar_coupling_software rdf:about="{$base}/dipolar_coupling_software/{$dipolar_coupling_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipolar_coupling_software rdf:resource="{$base}/dipolar_coupling_software/{$dipolar_coupling_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_85_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipolar_coupling_software>
      </BMRBo:has_dipolar_coupling_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipole_dipole_relaxCategory/BMRBx:dipole_dipole_relax">
      <xsl:variable name="dipole_dipole_relax_list_id_truncated"><xsl:choose><xsl:when test="string-length(@dipole_dipole_relax_list_id)&lt;64"><xsl:value-of select="@dipole_dipole_relax_list_id"/></xsl:when><xsl:when test="contains(@dipole_dipole_relax_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@dipole_dipole_relax_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@dipole_dipole_relax_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="dipole_dipole_relax_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($dipole_dipole_relax_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipole_dipole_relax>
      <BMRBo:dipole_dipole_relax rdf:about="{$base}/dipole_dipole_relax/{$dipole_dipole_relax_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipole_dipole_relax rdf:resource="{$base}/dipole_dipole_relax/{$dipole_dipole_relax_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_86_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipole_dipole_relax>
      </BMRBo:has_dipole_dipole_relax>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipole_dipole_relaxCategory/BMRBx:dipole_dipole_relax">
      <xsl:variable name="dipole_dipole_relax_list_id_truncated"><xsl:choose><xsl:when test="string-length(@dipole_dipole_relax_list_id)&lt;64"><xsl:value-of select="@dipole_dipole_relax_list_id"/></xsl:when><xsl:when test="contains(@dipole_dipole_relax_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@dipole_dipole_relax_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@dipole_dipole_relax_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="dipole_dipole_relax_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($dipole_dipole_relax_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipole_dipole_relax>
      <BMRBo:dipole_dipole_relax rdf:about="{$base}/dipole_dipole_relax/{$dipole_dipole_relax_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipole_dipole_relax rdf:resource="{$base}/dipole_dipole_relax/{$dipole_dipole_relax_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_86_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipole_dipole_relax>
      </BMRBo:has_dipole_dipole_relax>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipole_dipole_relax_experimentCategory/BMRBx:dipole_dipole_relax_experiment">
      <xsl:variable name="dipole_dipole_relax_list_id_truncated"><xsl:choose><xsl:when test="string-length(@dipole_dipole_relax_list_id)&lt;64"><xsl:value-of select="@dipole_dipole_relax_list_id"/></xsl:when><xsl:when test="contains(@dipole_dipole_relax_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@dipole_dipole_relax_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@dipole_dipole_relax_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="dipole_dipole_relax_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($dipole_dipole_relax_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipole_dipole_relax_experiment>
      <BMRBo:dipole_dipole_relax_experiment rdf:about="{$base}/dipole_dipole_relax_experiment/{$dipole_dipole_relax_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipole_dipole_relax_experiment rdf:resource="{$base}/dipole_dipole_relax_experiment/{$dipole_dipole_relax_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_87_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipole_dipole_relax_experiment>
      </BMRBo:has_dipole_dipole_relax_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipole_dipole_relax_experimentCategory/BMRBx:dipole_dipole_relax_experiment">
      <xsl:variable name="dipole_dipole_relax_list_id_truncated"><xsl:choose><xsl:when test="string-length(@dipole_dipole_relax_list_id)&lt;64"><xsl:value-of select="@dipole_dipole_relax_list_id"/></xsl:when><xsl:when test="contains(@dipole_dipole_relax_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@dipole_dipole_relax_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@dipole_dipole_relax_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="dipole_dipole_relax_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($dipole_dipole_relax_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipole_dipole_relax_experiment>
      <BMRBo:dipole_dipole_relax_experiment rdf:about="{$base}/dipole_dipole_relax_experiment/{$dipole_dipole_relax_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipole_dipole_relax_experiment rdf:resource="{$base}/dipole_dipole_relax_experiment/{$dipole_dipole_relax_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_87_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipole_dipole_relax_experiment>
      </BMRBo:has_dipole_dipole_relax_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipole_dipole_relax_listCategory/BMRBx:dipole_dipole_relax_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipole_dipole_relax_list>
      <BMRBo:dipole_dipole_relax_list rdf:about="{$base}/dipole_dipole_relax_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipole_dipole_relax_list rdf:resource="{$base}/dipole_dipole_relax_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_88_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipole_dipole_relax_list>
      </BMRBo:has_dipole_dipole_relax_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipole_dipole_relax_listCategory/BMRBx:dipole_dipole_relax_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipole_dipole_relax_list>
      <BMRBo:dipole_dipole_relax_list rdf:about="{$base}/dipole_dipole_relax_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipole_dipole_relax_list rdf:resource="{$base}/dipole_dipole_relax_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_88_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipole_dipole_relax_list>
      </BMRBo:has_dipole_dipole_relax_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipole_dipole_relax_softwareCategory/BMRBx:dipole_dipole_relax_software">
      <xsl:variable name="dipole_dipole_relax_list_id_truncated"><xsl:choose><xsl:when test="string-length(@dipole_dipole_relax_list_id)&lt;64"><xsl:value-of select="@dipole_dipole_relax_list_id"/></xsl:when><xsl:when test="contains(@dipole_dipole_relax_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@dipole_dipole_relax_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@dipole_dipole_relax_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="dipole_dipole_relax_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($dipole_dipole_relax_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipole_dipole_relax_software>
      <BMRBo:dipole_dipole_relax_software rdf:about="{$base}/dipole_dipole_relax_software/{$dipole_dipole_relax_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipole_dipole_relax_software rdf:resource="{$base}/dipole_dipole_relax_software/{$dipole_dipole_relax_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_89_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipole_dipole_relax_software>
      </BMRBo:has_dipole_dipole_relax_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dipole_dipole_relax_softwareCategory/BMRBx:dipole_dipole_relax_software">
      <xsl:variable name="dipole_dipole_relax_list_id_truncated"><xsl:choose><xsl:when test="string-length(@dipole_dipole_relax_list_id)&lt;64"><xsl:value-of select="@dipole_dipole_relax_list_id"/></xsl:when><xsl:when test="contains(@dipole_dipole_relax_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@dipole_dipole_relax_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@dipole_dipole_relax_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="dipole_dipole_relax_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($dipole_dipole_relax_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dipole_dipole_relax_software>
      <BMRBo:dipole_dipole_relax_software rdf:about="{$base}/dipole_dipole_relax_software/{$dipole_dipole_relax_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dipole_dipole_relax_software rdf:resource="{$base}/dipole_dipole_relax_software/{$dipole_dipole_relax_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_89_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dipole_dipole_relax_software>
      </BMRBo:has_dipole_dipole_relax_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constr_software_settingCategory/BMRBx:dist_constr_software_setting">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constr_software_setting>
      <BMRBo:dist_constr_software_setting rdf:about="{$base}/dist_constr_software_setting/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$software_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constr_software_setting rdf:resource="{$base}/dist_constr_software_setting/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$software_id_encoded},{$type_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_90_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constr_software_setting>
      </BMRBo:has_dist_constr_software_setting>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constr_software_settingCategory/BMRBx:dist_constr_software_setting">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constr_software_setting>
      <BMRBo:dist_constr_software_setting rdf:about="{$base}/dist_constr_software_setting/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$software_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constr_software_setting rdf:resource="{$base}/dist_constr_software_setting/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$software_id_encoded},{$type_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_90_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constr_software_setting>
      </BMRBo:has_dist_constr_software_setting>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraintCategory/BMRBx:dist_constraint">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="tree_node_member_constraint_id_truncated"><xsl:choose><xsl:when test="string-length(@tree_node_member_constraint_id)&lt;64"><xsl:value-of select="@tree_node_member_constraint_id"/></xsl:when><xsl:when test="contains(@tree_node_member_constraint_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@tree_node_member_constraint_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@tree_node_member_constraint_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="tree_node_member_constraint_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($tree_node_member_constraint_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="tree_node_member_node_id_truncated"><xsl:choose><xsl:when test="string-length(@tree_node_member_node_id)&lt;64"><xsl:value-of select="@tree_node_member_node_id"/></xsl:when><xsl:when test="contains(@tree_node_member_node_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@tree_node_member_node_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@tree_node_member_node_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="tree_node_member_node_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($tree_node_member_node_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint>
      <BMRBo:dist_constraint rdf:about="{$base}/dist_constraint/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$tree_node_member_constraint_id_encoded},{$tree_node_member_node_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint rdf:resource="{$base}/dist_constraint/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$tree_node_member_constraint_id_encoded},{$tree_node_member_node_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_91_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint>
      </BMRBo:has_dist_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraintCategory/BMRBx:dist_constraint">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="tree_node_member_constraint_id_truncated"><xsl:choose><xsl:when test="string-length(@tree_node_member_constraint_id)&lt;64"><xsl:value-of select="@tree_node_member_constraint_id"/></xsl:when><xsl:when test="contains(@tree_node_member_constraint_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@tree_node_member_constraint_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@tree_node_member_constraint_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="tree_node_member_constraint_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($tree_node_member_constraint_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="tree_node_member_node_id_truncated"><xsl:choose><xsl:when test="string-length(@tree_node_member_node_id)&lt;64"><xsl:value-of select="@tree_node_member_node_id"/></xsl:when><xsl:when test="contains(@tree_node_member_node_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@tree_node_member_node_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@tree_node_member_node_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="tree_node_member_node_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($tree_node_member_node_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint>
      <BMRBo:dist_constraint rdf:about="{$base}/dist_constraint/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$tree_node_member_constraint_id_encoded},{$tree_node_member_node_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint rdf:resource="{$base}/dist_constraint/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$tree_node_member_constraint_id_encoded},{$tree_node_member_node_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_91_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint>
      </BMRBo:has_dist_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraint_comment_orgCategory/BMRBx:dist_constraint_comment_org">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint_comment_org>
      <BMRBo:dist_constraint_comment_org rdf:about="{$base}/dist_constraint_comment_org/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint_comment_org rdf:resource="{$base}/dist_constraint_comment_org/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_92_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint_comment_org>
      </BMRBo:has_dist_constraint_comment_org>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraint_comment_orgCategory/BMRBx:dist_constraint_comment_org">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint_comment_org>
      <BMRBo:dist_constraint_comment_org rdf:about="{$base}/dist_constraint_comment_org/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint_comment_org rdf:resource="{$base}/dist_constraint_comment_org/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_92_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint_comment_org>
      </BMRBo:has_dist_constraint_comment_org>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraint_conv_errCategory/BMRBx:dist_constraint_conv_err">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint_conv_err>
      <BMRBo:dist_constraint_conv_err rdf:about="{$base}/dist_constraint_conv_err/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint_conv_err rdf:resource="{$base}/dist_constraint_conv_err/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_93_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint_conv_err>
      </BMRBo:has_dist_constraint_conv_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraint_conv_errCategory/BMRBx:dist_constraint_conv_err">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint_conv_err>
      <BMRBo:dist_constraint_conv_err rdf:about="{$base}/dist_constraint_conv_err/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint_conv_err rdf:resource="{$base}/dist_constraint_conv_err/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_93_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint_conv_err>
      </BMRBo:has_dist_constraint_conv_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraint_parse_errCategory/BMRBx:dist_constraint_parse_err">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint_parse_err>
      <BMRBo:dist_constraint_parse_err rdf:about="{$base}/dist_constraint_parse_err/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint_parse_err rdf:resource="{$base}/dist_constraint_parse_err/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_94_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint_parse_err>
      </BMRBo:has_dist_constraint_parse_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraint_parse_errCategory/BMRBx:dist_constraint_parse_err">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint_parse_err>
      <BMRBo:dist_constraint_parse_err rdf:about="{$base}/dist_constraint_parse_err/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint_parse_err rdf:resource="{$base}/dist_constraint_parse_err/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_94_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint_parse_err>
      </BMRBo:has_dist_constraint_parse_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraint_parse_fileCategory/BMRBx:dist_constraint_parse_file">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint_parse_file>
      <BMRBo:dist_constraint_parse_file rdf:about="{$base}/dist_constraint_parse_file/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint_parse_file rdf:resource="{$base}/dist_constraint_parse_file/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_95_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint_parse_file>
      </BMRBo:has_dist_constraint_parse_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraint_parse_fileCategory/BMRBx:dist_constraint_parse_file">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint_parse_file>
      <BMRBo:dist_constraint_parse_file rdf:about="{$base}/dist_constraint_parse_file/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint_parse_file rdf:resource="{$base}/dist_constraint_parse_file/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_95_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint_parse_file>
      </BMRBo:has_dist_constraint_parse_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraint_treeCategory/BMRBx:dist_constraint_tree">
      <xsl:variable name="constraint_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_id)&lt;64"><xsl:value-of select="@constraint_id"/></xsl:when><xsl:when test="contains(@constraint_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="node_id_truncated"><xsl:choose><xsl:when test="string-length(@node_id)&lt;64"><xsl:value-of select="@node_id"/></xsl:when><xsl:when test="contains(@node_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@node_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@node_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="node_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($node_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint_tree>
      <BMRBo:dist_constraint_tree rdf:about="{$base}/dist_constraint_tree/{$constraint_id_encoded},{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$node_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint_tree rdf:resource="{$base}/dist_constraint_tree/{$constraint_id_encoded},{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$node_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_96_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint_tree>
      </BMRBo:has_dist_constraint_tree>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraint_treeCategory/BMRBx:dist_constraint_tree">
      <xsl:variable name="constraint_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_id)&lt;64"><xsl:value-of select="@constraint_id"/></xsl:when><xsl:when test="contains(@constraint_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="node_id_truncated"><xsl:choose><xsl:when test="string-length(@node_id)&lt;64"><xsl:value-of select="@node_id"/></xsl:when><xsl:when test="contains(@node_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@node_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@node_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="node_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($node_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint_tree>
      <BMRBo:dist_constraint_tree rdf:about="{$base}/dist_constraint_tree/{$constraint_id_encoded},{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$node_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint_tree rdf:resource="{$base}/dist_constraint_tree/{$constraint_id_encoded},{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$node_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_96_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint_tree>
      </BMRBo:has_dist_constraint_tree>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraint_valueCategory/BMRBx:dist_constraint_value">
      <xsl:variable name="constraint_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_id)&lt;64"><xsl:value-of select="@constraint_id"/></xsl:when><xsl:when test="contains(@constraint_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="tree_node_id_truncated"><xsl:choose><xsl:when test="string-length(@tree_node_id)&lt;64"><xsl:value-of select="@tree_node_id"/></xsl:when><xsl:when test="contains(@tree_node_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@tree_node_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@tree_node_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="tree_node_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($tree_node_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint_value>
      <BMRBo:dist_constraint_value rdf:about="{$base}/dist_constraint_value/{$constraint_id_encoded},{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$tree_node_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint_value rdf:resource="{$base}/dist_constraint_value/{$constraint_id_encoded},{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$tree_node_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_97_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint_value>
      </BMRBo:has_dist_constraint_value>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:dist_constraint_valueCategory/BMRBx:dist_constraint_value">
      <xsl:variable name="constraint_id_truncated"><xsl:choose><xsl:when test="string-length(@constraint_id)&lt;64"><xsl:value-of select="@constraint_id"/></xsl:when><xsl:when test="contains(@constraint_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@constraint_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@constraint_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="constraint_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($constraint_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="tree_node_id_truncated"><xsl:choose><xsl:when test="string-length(@tree_node_id)&lt;64"><xsl:value-of select="@tree_node_id"/></xsl:when><xsl:when test="contains(@tree_node_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@tree_node_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@tree_node_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="tree_node_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($tree_node_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_dist_constraint_value>
      <BMRBo:dist_constraint_value rdf:about="{$base}/dist_constraint_value/{$constraint_id_encoded},{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$tree_node_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_dist_constraint_value rdf:resource="{$base}/dist_constraint_value/{$constraint_id_encoded},{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$tree_node_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_97_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:dist_constraint_value>
      </BMRBo:has_dist_constraint_value>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:distance_constraint_exptCategory/BMRBx:distance_constraint_expt">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_distance_constraint_expt>
      <BMRBo:distance_constraint_expt rdf:about="{$base}/distance_constraint_expt/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_distance_constraint_expt rdf:resource="{$base}/distance_constraint_expt/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_98_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:distance_constraint_expt>
      </BMRBo:has_distance_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:distance_constraint_exptCategory/BMRBx:distance_constraint_expt">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_distance_constraint_expt>
      <BMRBo:distance_constraint_expt rdf:about="{$base}/distance_constraint_expt/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_distance_constraint_expt rdf:resource="{$base}/distance_constraint_expt/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_98_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:distance_constraint_expt>
      </BMRBo:has_distance_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:distance_constraint_listCategory/BMRBx:distance_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_distance_constraint_list>
      <BMRBo:distance_constraint_list rdf:about="{$base}/distance_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_distance_constraint_list rdf:resource="{$base}/distance_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_99_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:distance_constraint_list>
      </BMRBo:has_distance_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:distance_constraint_listCategory/BMRBx:distance_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_distance_constraint_list>
      <BMRBo:distance_constraint_list rdf:about="{$base}/distance_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_distance_constraint_list rdf:resource="{$base}/distance_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_99_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:distance_constraint_list>
      </BMRBo:has_distance_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:distance_constraint_softwareCategory/BMRBx:distance_constraint_software">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_distance_constraint_software>
      <BMRBo:distance_constraint_software rdf:about="{$base}/distance_constraint_software/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_distance_constraint_software rdf:resource="{$base}/distance_constraint_software/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_100_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:distance_constraint_software>
      </BMRBo:has_distance_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:distance_constraint_softwareCategory/BMRBx:distance_constraint_software">
      <xsl:variable name="distance_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@distance_constraint_list_id)&lt;64"><xsl:value-of select="@distance_constraint_list_id"/></xsl:when><xsl:when test="contains(@distance_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@distance_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@distance_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="distance_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($distance_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_distance_constraint_software>
      <BMRBo:distance_constraint_software rdf:about="{$base}/distance_constraint_software/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_distance_constraint_software rdf:resource="{$base}/distance_constraint_software/{$distance_constraint_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_100_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:distance_constraint_software>
      </BMRBo:has_distance_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:emr_exptCategory/BMRBx:emr_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_emr_expt>
      <BMRBo:emr_expt rdf:about="{$base}/emr_expt/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:emr_expt>
      </BMRBo:has_emr_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:emr_exptCategory/BMRBx:emr_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_emr_expt>
      <BMRBo:emr_expt rdf:about="{$base}/emr_expt/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:emr_expt>
      </BMRBo:has_emr_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:emr_instrumentCategory/BMRBx:emr_instrument">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_emr_instrument>
      <BMRBo:emr_instrument rdf:about="{$base}/emr_instrument/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_emr_instrument rdf:resource="{$base}/emr_instrument/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_101_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:emr_instrument>
      </BMRBo:has_emr_instrument>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:emr_instrumentCategory/BMRBx:emr_instrument">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_emr_instrument>
      <BMRBo:emr_instrument rdf:about="{$base}/emr_instrument/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_emr_instrument rdf:resource="{$base}/emr_instrument/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_101_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:emr_instrument>
      </BMRBo:has_emr_instrument>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:energetic_penalty_functionCategory/BMRBx:energetic_penalty_function">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="function_truncated"><xsl:choose><xsl:when test="string-length(@function)&lt;64"><xsl:value-of select="@function"/></xsl:when><xsl:when test="contains(@function,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@function,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@function,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="function_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($function_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_energetic_penalty_function>
      <BMRBo:energetic_penalty_function rdf:about="{$base}/energetic_penalty_function/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$function_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_energetic_penalty_function rdf:resource="{$base}/energetic_penalty_function/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$function_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_102_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:energetic_penalty_function>
      </BMRBo:has_energetic_penalty_function>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:energetic_penalty_functionCategory/BMRBx:energetic_penalty_function">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="function_truncated"><xsl:choose><xsl:when test="string-length(@function)&lt;64"><xsl:value-of select="@function"/></xsl:when><xsl:when test="contains(@function,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@function,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@function,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="function_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($function_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_energetic_penalty_function>
      <BMRBo:energetic_penalty_function rdf:about="{$base}/energetic_penalty_function/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$function_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_energetic_penalty_function rdf:resource="{$base}/energetic_penalty_function/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$function_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_102_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:energetic_penalty_function>
      </BMRBo:has_energetic_penalty_function>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entityCategory/BMRBx:entity">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity>
      <BMRBo:entity rdf:about="{$base}/entity/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entity rdf:resource="{$base}/entity/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_103_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity>
      </BMRBo:has_entity>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entityCategory/BMRBx:entity">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity>
      <BMRBo:entity rdf:about="{$base}/entity/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entity rdf:resource="{$base}/entity/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_103_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity>
      </BMRBo:has_entity>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_assemblyCategory/BMRBx:entity_assembly">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_assembly>
      <BMRBo:entity_assembly rdf:about="{$base}/entity_assembly/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_assembly>
      </BMRBo:has_entity_assembly>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_assemblyCategory/BMRBx:entity_assembly">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_assembly>
      <BMRBo:entity_assembly rdf:about="{$base}/entity_assembly/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_assembly>
      </BMRBo:has_entity_assembly>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_atom_listCategory/BMRBx:entity_atom_list">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_atom_list>
      <BMRBo:entity_atom_list rdf:about="{$base}/entity_atom_list/{$entity_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_atom_list>
      </BMRBo:has_entity_atom_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_atom_listCategory/BMRBx:entity_atom_list">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_atom_list>
      <BMRBo:entity_atom_list rdf:about="{$base}/entity_atom_list/{$entity_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_atom_list>
      </BMRBo:has_entity_atom_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_biological_functionCategory/BMRBx:entity_biological_function">
      <xsl:variable name="biological_function_truncated"><xsl:choose><xsl:when test="string-length(@biological_function)&lt;64"><xsl:value-of select="@biological_function"/></xsl:when><xsl:when test="contains(@biological_function,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@biological_function,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@biological_function,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="biological_function_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($biological_function_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_biological_function>
      <BMRBo:entity_biological_function rdf:about="{$base}/entity_biological_function/{$biological_function_encoded},{$entity_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_biological_function>
      </BMRBo:has_entity_biological_function>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_biological_functionCategory/BMRBx:entity_biological_function">
      <xsl:variable name="biological_function_truncated"><xsl:choose><xsl:when test="string-length(@biological_function)&lt;64"><xsl:value-of select="@biological_function"/></xsl:when><xsl:when test="contains(@biological_function,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@biological_function,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@biological_function,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="biological_function_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($biological_function_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_biological_function>
      <BMRBo:entity_biological_function rdf:about="{$base}/entity_biological_function/{$biological_function_encoded},{$entity_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_biological_function>
      </BMRBo:has_entity_biological_function>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_bondCategory/BMRBx:entity_bond">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_bond>
      <BMRBo:entity_bond rdf:about="{$base}/entity_bond/{$entity_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_bond>
      </BMRBo:has_entity_bond>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_bondCategory/BMRBx:entity_bond">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_bond>
      <BMRBo:entity_bond rdf:about="{$base}/entity_bond/{$entity_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_bond>
      </BMRBo:has_entity_bond>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_chem_comp_deleted_atomCategory/BMRBx:entity_chem_comp_deleted_atom">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_chem_comp_deleted_atom>
      <BMRBo:entity_chem_comp_deleted_atom rdf:about="{$base}/entity_chem_comp_deleted_atom/{$atom_id_encoded},{$comp_index_id_encoded},{$entity_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_chem_comp_deleted_atom>
      </BMRBo:has_entity_chem_comp_deleted_atom>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_chem_comp_deleted_atomCategory/BMRBx:entity_chem_comp_deleted_atom">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_chem_comp_deleted_atom>
      <BMRBo:entity_chem_comp_deleted_atom rdf:about="{$base}/entity_chem_comp_deleted_atom/{$atom_id_encoded},{$comp_index_id_encoded},{$entity_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_chem_comp_deleted_atom>
      </BMRBo:has_entity_chem_comp_deleted_atom>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_chimera_segmentCategory/BMRBx:entity_chimera_segment">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_chimera_segment>
      <BMRBo:entity_chimera_segment rdf:about="{$base}/entity_chimera_segment/{$entity_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_chimera_segment>
      </BMRBo:has_entity_chimera_segment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_chimera_segmentCategory/BMRBx:entity_chimera_segment">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_chimera_segment>
      <BMRBo:entity_chimera_segment rdf:about="{$base}/entity_chimera_segment/{$entity_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_chimera_segment>
      </BMRBo:has_entity_chimera_segment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_citationCategory/BMRBx:entity_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_citation>
      <BMRBo:entity_citation rdf:about="{$base}/entity_citation/{$citation_id_encoded},{$entity_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_citation>
      </BMRBo:has_entity_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_citationCategory/BMRBx:entity_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_citation>
      <BMRBo:entity_citation rdf:about="{$base}/entity_citation/{$citation_id_encoded},{$entity_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_citation>
      </BMRBo:has_entity_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_common_nameCategory/BMRBx:entity_common_name">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_common_name>
      <BMRBo:entity_common_name rdf:about="{$base}/entity_common_name/{$entity_id_encoded},{$entry_id_encoded},{$name_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_common_name>
      </BMRBo:has_entity_common_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_common_nameCategory/BMRBx:entity_common_name">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_common_name>
      <BMRBo:entity_common_name rdf:about="{$base}/entity_common_name/{$entity_id_encoded},{$entry_id_encoded},{$name_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_common_name>
      </BMRBo:has_entity_common_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_comp_indexCategory/BMRBx:entity_comp_index">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_comp_index>
      <BMRBo:entity_comp_index rdf:about="{$base}/entity_comp_index/{$entity_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_comp_index>
      </BMRBo:has_entity_comp_index>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_comp_indexCategory/BMRBx:entity_comp_index">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_comp_index>
      <BMRBo:entity_comp_index rdf:about="{$base}/entity_comp_index/{$entity_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_comp_index>
      </BMRBo:has_entity_comp_index>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_comp_index_altCategory/BMRBx:entity_comp_index_alt">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_comp_index_id)&lt;64"><xsl:value-of select="@entity_comp_index_id"/></xsl:when><xsl:when test="contains(@entity_comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_comp_index_alt>
      <BMRBo:entity_comp_index_alt rdf:about="{$base}/entity_comp_index_alt/{$comp_id_encoded},{$entity_comp_index_id_encoded},{$entity_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_comp_index_alt>
      </BMRBo:has_entity_comp_index_alt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_comp_index_altCategory/BMRBx:entity_comp_index_alt">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_comp_index_id)&lt;64"><xsl:value-of select="@entity_comp_index_id"/></xsl:when><xsl:when test="contains(@entity_comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_comp_index_alt>
      <BMRBo:entity_comp_index_alt rdf:about="{$base}/entity_comp_index_alt/{$comp_id_encoded},{$entity_comp_index_id_encoded},{$entity_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_comp_index_alt>
      </BMRBo:has_entity_comp_index_alt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_db_linkCategory/BMRBx:entity_db_link">
      <xsl:variable name="accession_code_truncated"><xsl:choose><xsl:when test="string-length(@accession_code)&lt;64"><xsl:value-of select="@accession_code"/></xsl:when><xsl:when test="contains(@accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="database_code_truncated"><xsl:choose><xsl:when test="string-length(@database_code)&lt;64"><xsl:value-of select="@database_code"/></xsl:when><xsl:when test="contains(@database_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_db_link>
      <BMRBo:entity_db_link rdf:about="{$base}/entity_db_link/{$accession_code_encoded},{$database_code_encoded},{$entity_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_db_link>
      </BMRBo:has_entity_db_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_db_linkCategory/BMRBx:entity_db_link">
      <xsl:variable name="accession_code_truncated"><xsl:choose><xsl:when test="string-length(@accession_code)&lt;64"><xsl:value-of select="@accession_code"/></xsl:when><xsl:when test="contains(@accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="database_code_truncated"><xsl:choose><xsl:when test="string-length(@database_code)&lt;64"><xsl:value-of select="@database_code"/></xsl:when><xsl:when test="contains(@database_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_db_link>
      <BMRBo:entity_db_link rdf:about="{$base}/entity_db_link/{$accession_code_encoded},{$database_code_encoded},{$entity_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_db_link>
      </BMRBo:has_entity_db_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_deleted_atomCategory/BMRBx:entity_deleted_atom">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_deleted_atom>
      <BMRBo:entity_deleted_atom rdf:about="{$base}/entity_deleted_atom/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_deleted_atom>
      </BMRBo:has_entity_deleted_atom>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_deleted_atomCategory/BMRBx:entity_deleted_atom">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_deleted_atom>
      <BMRBo:entity_deleted_atom rdf:about="{$base}/entity_deleted_atom/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_deleted_atom>
      </BMRBo:has_entity_deleted_atom>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_experimental_srcCategory/BMRBx:entity_experimental_src">
      <xsl:variable name="entity_experimental_src_list_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_experimental_src_list_id)&lt;64"><xsl:value-of select="@entity_experimental_src_list_id"/></xsl:when><xsl:when test="contains(@entity_experimental_src_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_experimental_src_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_experimental_src_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_experimental_src_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_experimental_src_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_experimental_src>
      <BMRBo:entity_experimental_src rdf:about="{$base}/entity_experimental_src/{$entity_experimental_src_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_experimental_src>
      </BMRBo:has_entity_experimental_src>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_experimental_srcCategory/BMRBx:entity_experimental_src">
      <xsl:variable name="entity_experimental_src_list_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_experimental_src_list_id)&lt;64"><xsl:value-of select="@entity_experimental_src_list_id"/></xsl:when><xsl:when test="contains(@entity_experimental_src_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_experimental_src_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_experimental_src_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_experimental_src_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_experimental_src_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_experimental_src>
      <BMRBo:entity_experimental_src rdf:about="{$base}/entity_experimental_src/{$entity_experimental_src_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_experimental_src>
      </BMRBo:has_entity_experimental_src>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_experimental_src_listCategory/BMRBx:entity_experimental_src_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_experimental_src_list>
      <BMRBo:entity_experimental_src_list rdf:about="{$base}/entity_experimental_src_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entity_experimental_src_list rdf:resource="{$base}/entity_experimental_src_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_104_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_experimental_src_list>
      </BMRBo:has_entity_experimental_src_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_experimental_src_listCategory/BMRBx:entity_experimental_src_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_experimental_src_list>
      <BMRBo:entity_experimental_src_list rdf:about="{$base}/entity_experimental_src_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entity_experimental_src_list rdf:resource="{$base}/entity_experimental_src_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_104_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_experimental_src_list>
      </BMRBo:has_entity_experimental_src_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_keywordCategory/BMRBx:entity_keyword">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keyword_truncated"><xsl:choose><xsl:when test="string-length(@keyword)&lt;64"><xsl:value-of select="@keyword"/></xsl:when><xsl:when test="contains(@keyword,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keyword,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keyword,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keyword_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keyword_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_keyword>
      <BMRBo:entity_keyword rdf:about="{$base}/entity_keyword/{$entity_id_encoded},{$entry_id_encoded},{$keyword_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_keyword>
      </BMRBo:has_entity_keyword>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_keywordCategory/BMRBx:entity_keyword">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keyword_truncated"><xsl:choose><xsl:when test="string-length(@keyword)&lt;64"><xsl:value-of select="@keyword"/></xsl:when><xsl:when test="contains(@keyword,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keyword,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keyword,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keyword_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keyword_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_keyword>
      <BMRBo:entity_keyword rdf:about="{$base}/entity_keyword/{$entity_id_encoded},{$entry_id_encoded},{$keyword_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_keyword>
      </BMRBo:has_entity_keyword>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_natural_srcCategory/BMRBx:entity_natural_src">
      <xsl:variable name="entity_natural_src_list_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_natural_src_list_id)&lt;64"><xsl:value-of select="@entity_natural_src_list_id"/></xsl:when><xsl:when test="contains(@entity_natural_src_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_natural_src_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_natural_src_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_natural_src_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_natural_src_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_natural_src>
      <BMRBo:entity_natural_src rdf:about="{$base}/entity_natural_src/{$entity_natural_src_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entity_natural_src rdf:resource="{$base}/entity_natural_src/{$entity_natural_src_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_105_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_natural_src>
      </BMRBo:has_entity_natural_src>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_natural_srcCategory/BMRBx:entity_natural_src">
      <xsl:variable name="entity_natural_src_list_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_natural_src_list_id)&lt;64"><xsl:value-of select="@entity_natural_src_list_id"/></xsl:when><xsl:when test="contains(@entity_natural_src_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_natural_src_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_natural_src_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_natural_src_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_natural_src_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_natural_src>
      <BMRBo:entity_natural_src rdf:about="{$base}/entity_natural_src/{$entity_natural_src_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entity_natural_src rdf:resource="{$base}/entity_natural_src/{$entity_natural_src_list_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_105_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_natural_src>
      </BMRBo:has_entity_natural_src>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_natural_src_listCategory/BMRBx:entity_natural_src_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_natural_src_list>
      <BMRBo:entity_natural_src_list rdf:about="{$base}/entity_natural_src_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entity_natural_src_list rdf:resource="{$base}/entity_natural_src_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_106_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_natural_src_list>
      </BMRBo:has_entity_natural_src_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_natural_src_listCategory/BMRBx:entity_natural_src_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_natural_src_list>
      <BMRBo:entity_natural_src_list rdf:about="{$base}/entity_natural_src_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entity_natural_src_list rdf:resource="{$base}/entity_natural_src_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_106_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_natural_src_list>
      </BMRBo:has_entity_natural_src_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_poly_seqCategory/BMRBx:entity_poly_seq">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="num_truncated"><xsl:choose><xsl:when test="string-length(@num)&lt;64"><xsl:value-of select="@num"/></xsl:when><xsl:when test="contains(@num,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@num,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@num,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="num_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($num_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_poly_seq>
      <BMRBo:entity_poly_seq rdf:about="{$base}/entity_poly_seq/{$entity_id_encoded},{$entry_id_encoded},{$num_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_poly_seq>
      </BMRBo:has_entity_poly_seq>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_poly_seqCategory/BMRBx:entity_poly_seq">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="num_truncated"><xsl:choose><xsl:when test="string-length(@num)&lt;64"><xsl:value-of select="@num"/></xsl:when><xsl:when test="contains(@num,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@num,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@num,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="num_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($num_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_poly_seq>
      <BMRBo:entity_poly_seq rdf:about="{$base}/entity_poly_seq/{$entity_id_encoded},{$entry_id_encoded},{$num_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_poly_seq>
      </BMRBo:has_entity_poly_seq>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_purityCategory/BMRBx:entity_purity">
      <xsl:variable name="entity_purity_list_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_purity_list_id)&lt;64"><xsl:value-of select="@entity_purity_list_id"/></xsl:when><xsl:when test="contains(@entity_purity_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_purity_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_purity_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_purity_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_purity_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_purity>
      <BMRBo:entity_purity rdf:about="{$base}/entity_purity/{$entity_purity_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_purity>
      </BMRBo:has_entity_purity>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_purityCategory/BMRBx:entity_purity">
      <xsl:variable name="entity_purity_list_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_purity_list_id)&lt;64"><xsl:value-of select="@entity_purity_list_id"/></xsl:when><xsl:when test="contains(@entity_purity_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_purity_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_purity_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_purity_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_purity_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_purity>
      <BMRBo:entity_purity rdf:about="{$base}/entity_purity/{$entity_purity_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_purity>
      </BMRBo:has_entity_purity>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_purity_citationCategory/BMRBx:entity_purity_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_purity_list_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_purity_list_id)&lt;64"><xsl:value-of select="@entity_purity_list_id"/></xsl:when><xsl:when test="contains(@entity_purity_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_purity_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_purity_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_purity_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_purity_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_purity_citation>
      <BMRBo:entity_purity_citation rdf:about="{$base}/entity_purity_citation/{$citation_id_encoded},{$entity_purity_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_purity_citation>
      </BMRBo:has_entity_purity_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_purity_citationCategory/BMRBx:entity_purity_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_purity_list_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_purity_list_id)&lt;64"><xsl:value-of select="@entity_purity_list_id"/></xsl:when><xsl:when test="contains(@entity_purity_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_purity_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_purity_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_purity_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_purity_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_purity_citation>
      <BMRBo:entity_purity_citation rdf:about="{$base}/entity_purity_citation/{$citation_id_encoded},{$entity_purity_list_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_purity_citation>
      </BMRBo:has_entity_purity_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_purity_listCategory/BMRBx:entity_purity_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_purity_list>
      <BMRBo:entity_purity_list rdf:about="{$base}/entity_purity_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entity_purity_list rdf:resource="{$base}/entity_purity_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_107_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_purity_list>
      </BMRBo:has_entity_purity_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_purity_listCategory/BMRBx:entity_purity_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_purity_list>
      <BMRBo:entity_purity_list rdf:about="{$base}/entity_purity_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entity_purity_list rdf:resource="{$base}/entity_purity_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_107_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_purity_list>
      </BMRBo:has_entity_purity_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_systematic_nameCategory/BMRBx:entity_systematic_name">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="naming_system_truncated"><xsl:choose><xsl:when test="string-length(@naming_system)&lt;64"><xsl:value-of select="@naming_system"/></xsl:when><xsl:when test="contains(@naming_system,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@naming_system,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@naming_system,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="naming_system_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($naming_system_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_systematic_name>
      <BMRBo:entity_systematic_name rdf:about="{$base}/entity_systematic_name/{$entity_id_encoded},{$entry_id_encoded},{$naming_system_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_systematic_name>
      </BMRBo:has_entity_systematic_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entity_systematic_nameCategory/BMRBx:entity_systematic_name">
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="naming_system_truncated"><xsl:choose><xsl:when test="string-length(@naming_system)&lt;64"><xsl:value-of select="@naming_system"/></xsl:when><xsl:when test="contains(@naming_system,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@naming_system,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@naming_system,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="naming_system_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($naming_system_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entity_systematic_name>
      <BMRBo:entity_systematic_name rdf:about="{$base}/entity_systematic_name/{$entity_id_encoded},{$entry_id_encoded},{$naming_system_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entity_systematic_name>
      </BMRBo:has_entity_systematic_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entryCategory/BMRBx:entry">
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entry>
      <BMRBo:entry rdf:about="{$base}/entry/{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entry>
      </BMRBo:has_entry>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entryCategory/BMRBx:entry">
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entry>
      <BMRBo:entry rdf:about="{$base}/entry/{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entry>
      </BMRBo:has_entry>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entry_authorCategory/BMRBx:entry_author">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ordinal_truncated"><xsl:choose><xsl:when test="string-length(@ordinal)&lt;64"><xsl:value-of select="@ordinal"/></xsl:when><xsl:when test="contains(@ordinal,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ordinal,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ordinal,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ordinal_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ordinal_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entry_author>
      <BMRBo:entry_author rdf:about="{$base}/entry_author/{$entry_id_encoded},{$ordinal_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entry_author rdf:resource="{$base}/entry_author/{$entry_id_encoded},{$ordinal_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_108_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entry_author>
      </BMRBo:has_entry_author>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entry_authorCategory/BMRBx:entry_author">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ordinal_truncated"><xsl:choose><xsl:when test="string-length(@ordinal)&lt;64"><xsl:value-of select="@ordinal"/></xsl:when><xsl:when test="contains(@ordinal,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ordinal,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ordinal,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ordinal_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ordinal_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entry_author>
      <BMRBo:entry_author rdf:about="{$base}/entry_author/{$entry_id_encoded},{$ordinal_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entry_author rdf:resource="{$base}/entry_author/{$entry_id_encoded},{$ordinal_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_108_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entry_author>
      </BMRBo:has_entry_author>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entry_experimental_methodsCategory/BMRBx:entry_experimental_methods">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entry_experimental_methods>
      <BMRBo:entry_experimental_methods rdf:about="{$base}/entry_experimental_methods/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entry_experimental_methods rdf:resource="{$base}/entry_experimental_methods/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_109_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entry_experimental_methods>
      </BMRBo:has_entry_experimental_methods>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entry_experimental_methodsCategory/BMRBx:entry_experimental_methods">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entry_experimental_methods>
      <BMRBo:entry_experimental_methods rdf:about="{$base}/entry_experimental_methods/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entry_experimental_methods rdf:resource="{$base}/entry_experimental_methods/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_109_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entry_experimental_methods>
      </BMRBo:has_entry_experimental_methods>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entry_srcCategory/BMRBx:entry_src">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entry_src>
      <BMRBo:entry_src rdf:about="{$base}/entry_src/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entry_src rdf:resource="{$base}/entry_src/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_110_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entry_src>
      </BMRBo:has_entry_src>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:entry_srcCategory/BMRBx:entry_src">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_entry_src>
      <BMRBo:entry_src rdf:about="{$base}/entry_src/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_entry_src rdf:resource="{$base}/entry_src/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_110_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:entry_src>
      </BMRBo:has_entry_src>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:experimentCategory/BMRBx:experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_list_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_list_id)&lt;64"><xsl:value-of select="@experiment_list_id"/></xsl:when><xsl:when test="contains(@experiment_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_experiment>
      <BMRBo:experiment rdf:about="{$base}/experiment/{$entry_id_encoded},{$experiment_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:experiment>
      </BMRBo:has_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:experimentCategory/BMRBx:experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_list_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_list_id)&lt;64"><xsl:value-of select="@experiment_list_id"/></xsl:when><xsl:when test="contains(@experiment_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_experiment>
      <BMRBo:experiment rdf:about="{$base}/experiment/{$entry_id_encoded},{$experiment_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:experiment>
      </BMRBo:has_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:experiment_fileCategory/BMRBx:experiment_file">
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_experiment_file>
      <BMRBo:experiment_file rdf:about="{$base}/experiment_file/{$experiment_id_encoded},{$name_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:experiment_file>
      </BMRBo:has_experiment_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:experiment_fileCategory/BMRBx:experiment_file">
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_experiment_file>
      <BMRBo:experiment_file rdf:about="{$base}/experiment_file/{$experiment_id_encoded},{$name_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:experiment_file>
      </BMRBo:has_experiment_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:experiment_listCategory/BMRBx:experiment_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_experiment_list>
      <BMRBo:experiment_list rdf:about="{$base}/experiment_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_experiment_list rdf:resource="{$base}/experiment_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_111_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:experiment_list>
      </BMRBo:has_experiment_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:experiment_listCategory/BMRBx:experiment_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_experiment_list>
      <BMRBo:experiment_list rdf:about="{$base}/experiment_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_experiment_list rdf:resource="{$base}/experiment_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_111_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:experiment_list>
      </BMRBo:has_experiment_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:floating_chiralityCategory/BMRBx:floating_chirality">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="floating_chirality_assign_id_truncated"><xsl:choose><xsl:when test="string-length(@floating_chirality_assign_id)&lt;64"><xsl:value-of select="@floating_chirality_assign_id"/></xsl:when><xsl:when test="contains(@floating_chirality_assign_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@floating_chirality_assign_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@floating_chirality_assign_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="floating_chirality_assign_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($floating_chirality_assign_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_floating_chirality>
      <BMRBo:floating_chirality rdf:about="{$base}/floating_chirality/{$entry_id_encoded},{$floating_chirality_assign_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_floating_chirality rdf:resource="{$base}/floating_chirality/{$entry_id_encoded},{$floating_chirality_assign_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_112_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:floating_chirality>
      </BMRBo:has_floating_chirality>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:floating_chiralityCategory/BMRBx:floating_chirality">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="floating_chirality_assign_id_truncated"><xsl:choose><xsl:when test="string-length(@floating_chirality_assign_id)&lt;64"><xsl:value-of select="@floating_chirality_assign_id"/></xsl:when><xsl:when test="contains(@floating_chirality_assign_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@floating_chirality_assign_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@floating_chirality_assign_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="floating_chirality_assign_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($floating_chirality_assign_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_floating_chirality>
      <BMRBo:floating_chirality rdf:about="{$base}/floating_chirality/{$entry_id_encoded},{$floating_chirality_assign_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_floating_chirality rdf:resource="{$base}/floating_chirality/{$entry_id_encoded},{$floating_chirality_assign_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_112_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:floating_chirality>
      </BMRBo:has_floating_chirality>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:floating_chirality_assignCategory/BMRBx:floating_chirality_assign">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_floating_chirality_assign>
      <BMRBo:floating_chirality_assign rdf:about="{$base}/floating_chirality_assign/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_floating_chirality_assign rdf:resource="{$base}/floating_chirality_assign/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_113_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:floating_chirality_assign>
      </BMRBo:has_floating_chirality_assign>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:floating_chirality_assignCategory/BMRBx:floating_chirality_assign">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_floating_chirality_assign>
      <BMRBo:floating_chirality_assign rdf:about="{$base}/floating_chirality_assign/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_floating_chirality_assign rdf:resource="{$base}/floating_chirality_assign/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_113_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:floating_chirality_assign>
      </BMRBo:has_floating_chirality_assign>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:floating_chirality_softwareCategory/BMRBx:floating_chirality_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="floating_chirality_assign_id_truncated"><xsl:choose><xsl:when test="string-length(@floating_chirality_assign_id)&lt;64"><xsl:value-of select="@floating_chirality_assign_id"/></xsl:when><xsl:when test="contains(@floating_chirality_assign_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@floating_chirality_assign_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@floating_chirality_assign_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="floating_chirality_assign_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($floating_chirality_assign_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_floating_chirality_software>
      <BMRBo:floating_chirality_software rdf:about="{$base}/floating_chirality_software/{$entry_id_encoded},{$floating_chirality_assign_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_floating_chirality_software rdf:resource="{$base}/floating_chirality_software/{$entry_id_encoded},{$floating_chirality_assign_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_114_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:floating_chirality_software>
      </BMRBo:has_floating_chirality_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:floating_chirality_softwareCategory/BMRBx:floating_chirality_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="floating_chirality_assign_id_truncated"><xsl:choose><xsl:when test="string-length(@floating_chirality_assign_id)&lt;64"><xsl:value-of select="@floating_chirality_assign_id"/></xsl:when><xsl:when test="contains(@floating_chirality_assign_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@floating_chirality_assign_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@floating_chirality_assign_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="floating_chirality_assign_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($floating_chirality_assign_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_floating_chirality_software>
      <BMRBo:floating_chirality_software rdf:about="{$base}/floating_chirality_software/{$entry_id_encoded},{$floating_chirality_assign_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_floating_chirality_software rdf:resource="{$base}/floating_chirality_software/{$entry_id_encoded},{$floating_chirality_assign_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_114_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:floating_chirality_software>
      </BMRBo:has_floating_chirality_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:fluorescence_instrumentCategory/BMRBx:fluorescence_instrument">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_fluorescence_instrument>
      <BMRBo:fluorescence_instrument rdf:about="{$base}/fluorescence_instrument/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_fluorescence_instrument rdf:resource="{$base}/fluorescence_instrument/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_115_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:fluorescence_instrument>
      </BMRBo:has_fluorescence_instrument>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:fluorescence_instrumentCategory/BMRBx:fluorescence_instrument">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_fluorescence_instrument>
      <BMRBo:fluorescence_instrument rdf:about="{$base}/fluorescence_instrument/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_fluorescence_instrument rdf:resource="{$base}/fluorescence_instrument/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_115_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:fluorescence_instrument>
      </BMRBo:has_fluorescence_instrument>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:force_constantCategory/BMRBx:force_constant">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="force_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@force_constant_list_id)&lt;64"><xsl:value-of select="@force_constant_list_id"/></xsl:when><xsl:when test="contains(@force_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@force_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@force_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="force_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($force_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_force_constant>
      <BMRBo:force_constant rdf:about="{$base}/force_constant/{$entry_id_encoded},{$force_constant_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_force_constant rdf:resource="{$base}/force_constant/{$entry_id_encoded},{$force_constant_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_116_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:force_constant>
      </BMRBo:has_force_constant>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:force_constantCategory/BMRBx:force_constant">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="force_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@force_constant_list_id)&lt;64"><xsl:value-of select="@force_constant_list_id"/></xsl:when><xsl:when test="contains(@force_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@force_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@force_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="force_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($force_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_force_constant>
      <BMRBo:force_constant rdf:about="{$base}/force_constant/{$entry_id_encoded},{$force_constant_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_force_constant rdf:resource="{$base}/force_constant/{$entry_id_encoded},{$force_constant_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_116_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:force_constant>
      </BMRBo:has_force_constant>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:force_constant_listCategory/BMRBx:force_constant_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_force_constant_list>
      <BMRBo:force_constant_list rdf:about="{$base}/force_constant_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_force_constant_list rdf:resource="{$base}/force_constant_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_117_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:force_constant_list>
      </BMRBo:has_force_constant_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:force_constant_listCategory/BMRBx:force_constant_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_force_constant_list>
      <BMRBo:force_constant_list rdf:about="{$base}/force_constant_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_force_constant_list rdf:resource="{$base}/force_constant_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_117_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:force_constant_list>
      </BMRBo:has_force_constant_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:force_constant_softwareCategory/BMRBx:force_constant_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="force_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@force_constant_list_id)&lt;64"><xsl:value-of select="@force_constant_list_id"/></xsl:when><xsl:when test="contains(@force_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@force_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@force_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="force_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($force_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_force_constant_software>
      <BMRBo:force_constant_software rdf:about="{$base}/force_constant_software/{$entry_id_encoded},{$force_constant_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_force_constant_software rdf:resource="{$base}/force_constant_software/{$entry_id_encoded},{$force_constant_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_118_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:force_constant_software>
      </BMRBo:has_force_constant_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:force_constant_softwareCategory/BMRBx:force_constant_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="force_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@force_constant_list_id)&lt;64"><xsl:value-of select="@force_constant_list_id"/></xsl:when><xsl:when test="contains(@force_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@force_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@force_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="force_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($force_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_force_constant_software>
      <BMRBo:force_constant_software rdf:about="{$base}/force_constant_software/{$entry_id_encoded},{$force_constant_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_force_constant_software rdf:resource="{$base}/force_constant_software/{$entry_id_encoded},{$force_constant_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_118_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:force_constant_software>
      </BMRBo:has_force_constant_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:fret_exptCategory/BMRBx:fret_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_fret_expt>
      <BMRBo:fret_expt rdf:about="{$base}/fret_expt/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:fret_expt>
      </BMRBo:has_fret_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:fret_exptCategory/BMRBx:fret_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_fret_expt>
      <BMRBo:fret_expt rdf:about="{$base}/fret_expt/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:fret_expt>
      </BMRBo:has_fret_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraintCategory/BMRBx:gen_dist_constraint">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="index_id_truncated"><xsl:choose><xsl:when test="string-length(@index_id)&lt;64"><xsl:value-of select="@index_id"/></xsl:when><xsl:when test="contains(@index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint>
      <BMRBo:gen_dist_constraint rdf:about="{$base}/gen_dist_constraint/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$index_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint rdf:resource="{$base}/gen_dist_constraint/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$index_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_119_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint>
      </BMRBo:has_gen_dist_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraintCategory/BMRBx:gen_dist_constraint">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="index_id_truncated"><xsl:choose><xsl:when test="string-length(@index_id)&lt;64"><xsl:value-of select="@index_id"/></xsl:when><xsl:when test="contains(@index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint>
      <BMRBo:gen_dist_constraint rdf:about="{$base}/gen_dist_constraint/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$index_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint rdf:resource="{$base}/gen_dist_constraint/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$index_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_119_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint>
      </BMRBo:has_gen_dist_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_comment_orgCategory/BMRBx:gen_dist_constraint_comment_org">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_comment_org>
      <BMRBo:gen_dist_constraint_comment_org rdf:about="{$base}/gen_dist_constraint_comment_org/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_comment_org rdf:resource="{$base}/gen_dist_constraint_comment_org/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_120_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_comment_org>
      </BMRBo:has_gen_dist_constraint_comment_org>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_comment_orgCategory/BMRBx:gen_dist_constraint_comment_org">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_comment_org>
      <BMRBo:gen_dist_constraint_comment_org rdf:about="{$base}/gen_dist_constraint_comment_org/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_comment_org rdf:resource="{$base}/gen_dist_constraint_comment_org/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_120_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_comment_org>
      </BMRBo:has_gen_dist_constraint_comment_org>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_conv_errCategory/BMRBx:gen_dist_constraint_conv_err">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_conv_err>
      <BMRBo:gen_dist_constraint_conv_err rdf:about="{$base}/gen_dist_constraint_conv_err/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_conv_err rdf:resource="{$base}/gen_dist_constraint_conv_err/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_121_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_conv_err>
      </BMRBo:has_gen_dist_constraint_conv_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_conv_errCategory/BMRBx:gen_dist_constraint_conv_err">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_conv_err>
      <BMRBo:gen_dist_constraint_conv_err rdf:about="{$base}/gen_dist_constraint_conv_err/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_conv_err rdf:resource="{$base}/gen_dist_constraint_conv_err/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_121_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_conv_err>
      </BMRBo:has_gen_dist_constraint_conv_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_exptCategory/BMRBx:gen_dist_constraint_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_expt>
      <BMRBo:gen_dist_constraint_expt rdf:about="{$base}/gen_dist_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$gen_dist_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_expt rdf:resource="{$base}/gen_dist_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$gen_dist_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_122_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_expt>
      </BMRBo:has_gen_dist_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_exptCategory/BMRBx:gen_dist_constraint_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_expt>
      <BMRBo:gen_dist_constraint_expt rdf:about="{$base}/gen_dist_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$gen_dist_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_expt rdf:resource="{$base}/gen_dist_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$gen_dist_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_122_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_expt>
      </BMRBo:has_gen_dist_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_listCategory/BMRBx:gen_dist_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_list>
      <BMRBo:gen_dist_constraint_list rdf:about="{$base}/gen_dist_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_list rdf:resource="{$base}/gen_dist_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_123_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_list>
      </BMRBo:has_gen_dist_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_listCategory/BMRBx:gen_dist_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_list>
      <BMRBo:gen_dist_constraint_list rdf:about="{$base}/gen_dist_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_list rdf:resource="{$base}/gen_dist_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_123_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_list>
      </BMRBo:has_gen_dist_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_parse_errCategory/BMRBx:gen_dist_constraint_parse_err">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_parse_err>
      <BMRBo:gen_dist_constraint_parse_err rdf:about="{$base}/gen_dist_constraint_parse_err/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_parse_err rdf:resource="{$base}/gen_dist_constraint_parse_err/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_124_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_parse_err>
      </BMRBo:has_gen_dist_constraint_parse_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_parse_errCategory/BMRBx:gen_dist_constraint_parse_err">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_parse_err>
      <BMRBo:gen_dist_constraint_parse_err rdf:about="{$base}/gen_dist_constraint_parse_err/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_parse_err rdf:resource="{$base}/gen_dist_constraint_parse_err/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_124_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_parse_err>
      </BMRBo:has_gen_dist_constraint_parse_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_parse_fileCategory/BMRBx:gen_dist_constraint_parse_file">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_parse_file>
      <BMRBo:gen_dist_constraint_parse_file rdf:about="{$base}/gen_dist_constraint_parse_file/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_parse_file rdf:resource="{$base}/gen_dist_constraint_parse_file/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_125_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_parse_file>
      </BMRBo:has_gen_dist_constraint_parse_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_parse_fileCategory/BMRBx:gen_dist_constraint_parse_file">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_parse_file>
      <BMRBo:gen_dist_constraint_parse_file rdf:about="{$base}/gen_dist_constraint_parse_file/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_parse_file rdf:resource="{$base}/gen_dist_constraint_parse_file/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_125_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_parse_file>
      </BMRBo:has_gen_dist_constraint_parse_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_softwareCategory/BMRBx:gen_dist_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_software>
      <BMRBo:gen_dist_constraint_software rdf:about="{$base}/gen_dist_constraint_software/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_software rdf:resource="{$base}/gen_dist_constraint_software/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_126_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_software>
      </BMRBo:has_gen_dist_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_softwareCategory/BMRBx:gen_dist_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_software>
      <BMRBo:gen_dist_constraint_software rdf:about="{$base}/gen_dist_constraint_software/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_software rdf:resource="{$base}/gen_dist_constraint_software/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_126_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_software>
      </BMRBo:has_gen_dist_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_software_paramCategory/BMRBx:gen_dist_constraint_software_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_software_param>
      <BMRBo:gen_dist_constraint_software_param rdf:about="{$base}/gen_dist_constraint_software_param/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$software_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_software_param rdf:resource="{$base}/gen_dist_constraint_software_param/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$software_id_encoded},{$type_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_127_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_software_param>
      </BMRBo:has_gen_dist_constraint_software_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:gen_dist_constraint_software_paramCategory/BMRBx:gen_dist_constraint_software_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@gen_dist_constraint_list_id)&lt;64"><xsl:value-of select="@gen_dist_constraint_list_id"/></xsl:when><xsl:when test="contains(@gen_dist_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@gen_dist_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@gen_dist_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="gen_dist_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($gen_dist_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_gen_dist_constraint_software_param>
      <BMRBo:gen_dist_constraint_software_param rdf:about="{$base}/gen_dist_constraint_software_param/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$software_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_gen_dist_constraint_software_param rdf:resource="{$base}/gen_dist_constraint_software_param/{$entry_id_encoded},{$gen_dist_constraint_list_id_encoded},{$software_id_encoded},{$type_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_127_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:gen_dist_constraint_software_param>
      </BMRBo:has_gen_dist_constraint_software_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_chem_shift_constraintCategory/BMRBx:h_chem_shift_constraint">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_chem_shift_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_chem_shift_constraint_list_id)&lt;64"><xsl:value-of select="@h_chem_shift_constraint_list_id"/></xsl:when><xsl:when test="contains(@h_chem_shift_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_chem_shift_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_chem_shift_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_chem_shift_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_chem_shift_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_chem_shift_constraint>
      <BMRBo:h_chem_shift_constraint rdf:about="{$base}/h_chem_shift_constraint/{$entry_id_encoded},{$h_chem_shift_constraint_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_chem_shift_constraint rdf:resource="{$base}/h_chem_shift_constraint/{$entry_id_encoded},{$h_chem_shift_constraint_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_128_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_chem_shift_constraint>
      </BMRBo:has_h_chem_shift_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_chem_shift_constraintCategory/BMRBx:h_chem_shift_constraint">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_chem_shift_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_chem_shift_constraint_list_id)&lt;64"><xsl:value-of select="@h_chem_shift_constraint_list_id"/></xsl:when><xsl:when test="contains(@h_chem_shift_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_chem_shift_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_chem_shift_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_chem_shift_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_chem_shift_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_chem_shift_constraint>
      <BMRBo:h_chem_shift_constraint rdf:about="{$base}/h_chem_shift_constraint/{$entry_id_encoded},{$h_chem_shift_constraint_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_chem_shift_constraint rdf:resource="{$base}/h_chem_shift_constraint/{$entry_id_encoded},{$h_chem_shift_constraint_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_128_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_chem_shift_constraint>
      </BMRBo:has_h_chem_shift_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_chem_shift_constraint_exptCategory/BMRBx:h_chem_shift_constraint_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_chem_shift_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_chem_shift_constraint_list_id)&lt;64"><xsl:value-of select="@h_chem_shift_constraint_list_id"/></xsl:when><xsl:when test="contains(@h_chem_shift_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_chem_shift_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_chem_shift_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_chem_shift_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_chem_shift_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_chem_shift_constraint_expt>
      <BMRBo:h_chem_shift_constraint_expt rdf:about="{$base}/h_chem_shift_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$h_chem_shift_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_chem_shift_constraint_expt rdf:resource="{$base}/h_chem_shift_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$h_chem_shift_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_129_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_chem_shift_constraint_expt>
      </BMRBo:has_h_chem_shift_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_chem_shift_constraint_exptCategory/BMRBx:h_chem_shift_constraint_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_chem_shift_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_chem_shift_constraint_list_id)&lt;64"><xsl:value-of select="@h_chem_shift_constraint_list_id"/></xsl:when><xsl:when test="contains(@h_chem_shift_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_chem_shift_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_chem_shift_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_chem_shift_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_chem_shift_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_chem_shift_constraint_expt>
      <BMRBo:h_chem_shift_constraint_expt rdf:about="{$base}/h_chem_shift_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$h_chem_shift_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_chem_shift_constraint_expt rdf:resource="{$base}/h_chem_shift_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$h_chem_shift_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_129_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_chem_shift_constraint_expt>
      </BMRBo:has_h_chem_shift_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_chem_shift_constraint_listCategory/BMRBx:h_chem_shift_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_chem_shift_constraint_list>
      <BMRBo:h_chem_shift_constraint_list rdf:about="{$base}/h_chem_shift_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_chem_shift_constraint_list rdf:resource="{$base}/h_chem_shift_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_130_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_chem_shift_constraint_list>
      </BMRBo:has_h_chem_shift_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_chem_shift_constraint_listCategory/BMRBx:h_chem_shift_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_chem_shift_constraint_list>
      <BMRBo:h_chem_shift_constraint_list rdf:about="{$base}/h_chem_shift_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_chem_shift_constraint_list rdf:resource="{$base}/h_chem_shift_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_130_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_chem_shift_constraint_list>
      </BMRBo:has_h_chem_shift_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_chem_shift_constraint_softwareCategory/BMRBx:h_chem_shift_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_chem_shift_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_chem_shift_constraint_list_id)&lt;64"><xsl:value-of select="@h_chem_shift_constraint_list_id"/></xsl:when><xsl:when test="contains(@h_chem_shift_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_chem_shift_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_chem_shift_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_chem_shift_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_chem_shift_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_chem_shift_constraint_software>
      <BMRBo:h_chem_shift_constraint_software rdf:about="{$base}/h_chem_shift_constraint_software/{$entry_id_encoded},{$h_chem_shift_constraint_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_chem_shift_constraint_software rdf:resource="{$base}/h_chem_shift_constraint_software/{$entry_id_encoded},{$h_chem_shift_constraint_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_131_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_chem_shift_constraint_software>
      </BMRBo:has_h_chem_shift_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_chem_shift_constraint_softwareCategory/BMRBx:h_chem_shift_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_chem_shift_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_chem_shift_constraint_list_id)&lt;64"><xsl:value-of select="@h_chem_shift_constraint_list_id"/></xsl:when><xsl:when test="contains(@h_chem_shift_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_chem_shift_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_chem_shift_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_chem_shift_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_chem_shift_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_chem_shift_constraint_software>
      <BMRBo:h_chem_shift_constraint_software rdf:about="{$base}/h_chem_shift_constraint_software/{$entry_id_encoded},{$h_chem_shift_constraint_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_chem_shift_constraint_software rdf:resource="{$base}/h_chem_shift_constraint_software/{$entry_id_encoded},{$h_chem_shift_constraint_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_131_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_chem_shift_constraint_software>
      </BMRBo:has_h_chem_shift_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_protection_fact_experimentCategory/BMRBx:h_exch_protection_fact_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_exch_protection_factor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_exch_protection_factor_list_id)&lt;64"><xsl:value-of select="@h_exch_protection_factor_list_id"/></xsl:when><xsl:when test="contains(@h_exch_protection_factor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_exch_protection_factor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_exch_protection_factor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_exch_protection_factor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_exch_protection_factor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_protection_fact_experiment>
      <BMRBo:h_exch_protection_fact_experiment rdf:about="{$base}/h_exch_protection_fact_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$h_exch_protection_factor_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_protection_fact_experiment rdf:resource="{$base}/h_exch_protection_fact_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$h_exch_protection_factor_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_132_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_protection_fact_experiment>
      </BMRBo:has_h_exch_protection_fact_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_protection_fact_experimentCategory/BMRBx:h_exch_protection_fact_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_exch_protection_factor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_exch_protection_factor_list_id)&lt;64"><xsl:value-of select="@h_exch_protection_factor_list_id"/></xsl:when><xsl:when test="contains(@h_exch_protection_factor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_exch_protection_factor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_exch_protection_factor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_exch_protection_factor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_exch_protection_factor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_protection_fact_experiment>
      <BMRBo:h_exch_protection_fact_experiment rdf:about="{$base}/h_exch_protection_fact_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$h_exch_protection_factor_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_protection_fact_experiment rdf:resource="{$base}/h_exch_protection_fact_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$h_exch_protection_factor_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_132_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_protection_fact_experiment>
      </BMRBo:has_h_exch_protection_fact_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_protection_fact_softwareCategory/BMRBx:h_exch_protection_fact_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_exch_protection_factor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_exch_protection_factor_list_id)&lt;64"><xsl:value-of select="@h_exch_protection_factor_list_id"/></xsl:when><xsl:when test="contains(@h_exch_protection_factor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_exch_protection_factor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_exch_protection_factor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_exch_protection_factor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_exch_protection_factor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_protection_fact_software>
      <BMRBo:h_exch_protection_fact_software rdf:about="{$base}/h_exch_protection_fact_software/{$entry_id_encoded},{$h_exch_protection_factor_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_protection_fact_software rdf:resource="{$base}/h_exch_protection_fact_software/{$entry_id_encoded},{$h_exch_protection_factor_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_133_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_protection_fact_software>
      </BMRBo:has_h_exch_protection_fact_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_protection_fact_softwareCategory/BMRBx:h_exch_protection_fact_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_exch_protection_factor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_exch_protection_factor_list_id)&lt;64"><xsl:value-of select="@h_exch_protection_factor_list_id"/></xsl:when><xsl:when test="contains(@h_exch_protection_factor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_exch_protection_factor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_exch_protection_factor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_exch_protection_factor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_exch_protection_factor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_protection_fact_software>
      <BMRBo:h_exch_protection_fact_software rdf:about="{$base}/h_exch_protection_fact_software/{$entry_id_encoded},{$h_exch_protection_factor_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_protection_fact_software rdf:resource="{$base}/h_exch_protection_fact_software/{$entry_id_encoded},{$h_exch_protection_factor_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_133_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_protection_fact_software>
      </BMRBo:has_h_exch_protection_fact_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_protection_factorCategory/BMRBx:h_exch_protection_factor">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_exch_protection_factor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_exch_protection_factor_list_id)&lt;64"><xsl:value-of select="@h_exch_protection_factor_list_id"/></xsl:when><xsl:when test="contains(@h_exch_protection_factor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_exch_protection_factor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_exch_protection_factor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_exch_protection_factor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_exch_protection_factor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_protection_factor>
      <BMRBo:h_exch_protection_factor rdf:about="{$base}/h_exch_protection_factor/{$entry_id_encoded},{$h_exch_protection_factor_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_protection_factor rdf:resource="{$base}/h_exch_protection_factor/{$entry_id_encoded},{$h_exch_protection_factor_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_134_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_protection_factor>
      </BMRBo:has_h_exch_protection_factor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_protection_factorCategory/BMRBx:h_exch_protection_factor">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_exch_protection_factor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_exch_protection_factor_list_id)&lt;64"><xsl:value-of select="@h_exch_protection_factor_list_id"/></xsl:when><xsl:when test="contains(@h_exch_protection_factor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_exch_protection_factor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_exch_protection_factor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_exch_protection_factor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_exch_protection_factor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_protection_factor>
      <BMRBo:h_exch_protection_factor rdf:about="{$base}/h_exch_protection_factor/{$entry_id_encoded},{$h_exch_protection_factor_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_protection_factor rdf:resource="{$base}/h_exch_protection_factor/{$entry_id_encoded},{$h_exch_protection_factor_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_134_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_protection_factor>
      </BMRBo:has_h_exch_protection_factor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_protection_factor_listCategory/BMRBx:h_exch_protection_factor_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_protection_factor_list>
      <BMRBo:h_exch_protection_factor_list rdf:about="{$base}/h_exch_protection_factor_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_protection_factor_list rdf:resource="{$base}/h_exch_protection_factor_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_135_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_protection_factor_list>
      </BMRBo:has_h_exch_protection_factor_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_protection_factor_listCategory/BMRBx:h_exch_protection_factor_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_protection_factor_list>
      <BMRBo:h_exch_protection_factor_list rdf:about="{$base}/h_exch_protection_factor_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_protection_factor_list rdf:resource="{$base}/h_exch_protection_factor_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_135_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_protection_factor_list>
      </BMRBo:has_h_exch_protection_factor_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_rateCategory/BMRBx:h_exch_rate">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_exch_rate_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_exch_rate_list_id)&lt;64"><xsl:value-of select="@h_exch_rate_list_id"/></xsl:when><xsl:when test="contains(@h_exch_rate_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_exch_rate_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_exch_rate_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_exch_rate_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_exch_rate_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_rate>
      <BMRBo:h_exch_rate rdf:about="{$base}/h_exch_rate/{$entry_id_encoded},{$h_exch_rate_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_rate rdf:resource="{$base}/h_exch_rate/{$entry_id_encoded},{$h_exch_rate_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_136_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_rate>
      </BMRBo:has_h_exch_rate>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_rateCategory/BMRBx:h_exch_rate">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_exch_rate_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_exch_rate_list_id)&lt;64"><xsl:value-of select="@h_exch_rate_list_id"/></xsl:when><xsl:when test="contains(@h_exch_rate_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_exch_rate_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_exch_rate_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_exch_rate_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_exch_rate_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_rate>
      <BMRBo:h_exch_rate rdf:about="{$base}/h_exch_rate/{$entry_id_encoded},{$h_exch_rate_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_rate rdf:resource="{$base}/h_exch_rate/{$entry_id_encoded},{$h_exch_rate_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_136_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_rate>
      </BMRBo:has_h_exch_rate>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_rate_experimentCategory/BMRBx:h_exch_rate_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_exch_rate_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_exch_rate_list_id)&lt;64"><xsl:value-of select="@h_exch_rate_list_id"/></xsl:when><xsl:when test="contains(@h_exch_rate_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_exch_rate_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_exch_rate_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_exch_rate_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_exch_rate_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_rate_experiment>
      <BMRBo:h_exch_rate_experiment rdf:about="{$base}/h_exch_rate_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$h_exch_rate_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_rate_experiment rdf:resource="{$base}/h_exch_rate_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$h_exch_rate_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_137_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_rate_experiment>
      </BMRBo:has_h_exch_rate_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_rate_experimentCategory/BMRBx:h_exch_rate_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_exch_rate_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_exch_rate_list_id)&lt;64"><xsl:value-of select="@h_exch_rate_list_id"/></xsl:when><xsl:when test="contains(@h_exch_rate_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_exch_rate_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_exch_rate_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_exch_rate_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_exch_rate_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_rate_experiment>
      <BMRBo:h_exch_rate_experiment rdf:about="{$base}/h_exch_rate_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$h_exch_rate_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_rate_experiment rdf:resource="{$base}/h_exch_rate_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$h_exch_rate_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_137_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_rate_experiment>
      </BMRBo:has_h_exch_rate_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_rate_listCategory/BMRBx:h_exch_rate_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_rate_list>
      <BMRBo:h_exch_rate_list rdf:about="{$base}/h_exch_rate_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_rate_list rdf:resource="{$base}/h_exch_rate_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_138_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_rate_list>
      </BMRBo:has_h_exch_rate_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_rate_listCategory/BMRBx:h_exch_rate_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_rate_list>
      <BMRBo:h_exch_rate_list rdf:about="{$base}/h_exch_rate_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_rate_list rdf:resource="{$base}/h_exch_rate_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_138_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_rate_list>
      </BMRBo:has_h_exch_rate_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_rate_softwareCategory/BMRBx:h_exch_rate_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_exch_rate_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_exch_rate_list_id)&lt;64"><xsl:value-of select="@h_exch_rate_list_id"/></xsl:when><xsl:when test="contains(@h_exch_rate_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_exch_rate_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_exch_rate_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_exch_rate_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_exch_rate_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_rate_software>
      <BMRBo:h_exch_rate_software rdf:about="{$base}/h_exch_rate_software/{$entry_id_encoded},{$h_exch_rate_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_rate_software rdf:resource="{$base}/h_exch_rate_software/{$entry_id_encoded},{$h_exch_rate_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_139_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_rate_software>
      </BMRBo:has_h_exch_rate_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:h_exch_rate_softwareCategory/BMRBx:h_exch_rate_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="h_exch_rate_list_id_truncated"><xsl:choose><xsl:when test="string-length(@h_exch_rate_list_id)&lt;64"><xsl:value-of select="@h_exch_rate_list_id"/></xsl:when><xsl:when test="contains(@h_exch_rate_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@h_exch_rate_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@h_exch_rate_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="h_exch_rate_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($h_exch_rate_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_h_exch_rate_software>
      <BMRBo:h_exch_rate_software rdf:about="{$base}/h_exch_rate_software/{$entry_id_encoded},{$h_exch_rate_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_h_exch_rate_software rdf:resource="{$base}/h_exch_rate_software/{$entry_id_encoded},{$h_exch_rate_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_139_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:h_exch_rate_software>
      </BMRBo:has_h_exch_rate_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_noeCategory/BMRBx:heteronucl_noe">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_noe_list_id)&lt;64"><xsl:value-of select="@heteronucl_noe_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_noe>
      <BMRBo:heteronucl_noe rdf:about="{$base}/heteronucl_noe/{$entry_id_encoded},{$heteronucl_noe_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_noe rdf:resource="{$base}/heteronucl_noe/{$entry_id_encoded},{$heteronucl_noe_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_140_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_noe>
      </BMRBo:has_heteronucl_noe>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_noeCategory/BMRBx:heteronucl_noe">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_noe_list_id)&lt;64"><xsl:value-of select="@heteronucl_noe_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_noe>
      <BMRBo:heteronucl_noe rdf:about="{$base}/heteronucl_noe/{$entry_id_encoded},{$heteronucl_noe_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_noe rdf:resource="{$base}/heteronucl_noe/{$entry_id_encoded},{$heteronucl_noe_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_140_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_noe>
      </BMRBo:has_heteronucl_noe>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_noe_experimentCategory/BMRBx:heteronucl_noe_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_noe_list_id)&lt;64"><xsl:value-of select="@heteronucl_noe_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_noe_experiment>
      <BMRBo:heteronucl_noe_experiment rdf:about="{$base}/heteronucl_noe_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_noe_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_noe_experiment rdf:resource="{$base}/heteronucl_noe_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_noe_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_141_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_noe_experiment>
      </BMRBo:has_heteronucl_noe_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_noe_experimentCategory/BMRBx:heteronucl_noe_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_noe_list_id)&lt;64"><xsl:value-of select="@heteronucl_noe_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_noe_experiment>
      <BMRBo:heteronucl_noe_experiment rdf:about="{$base}/heteronucl_noe_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_noe_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_noe_experiment rdf:resource="{$base}/heteronucl_noe_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_noe_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_141_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_noe_experiment>
      </BMRBo:has_heteronucl_noe_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_noe_listCategory/BMRBx:heteronucl_noe_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_noe_list>
      <BMRBo:heteronucl_noe_list rdf:about="{$base}/heteronucl_noe_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_noe_list rdf:resource="{$base}/heteronucl_noe_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_142_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_noe_list>
      </BMRBo:has_heteronucl_noe_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_noe_listCategory/BMRBx:heteronucl_noe_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_noe_list>
      <BMRBo:heteronucl_noe_list rdf:about="{$base}/heteronucl_noe_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_noe_list rdf:resource="{$base}/heteronucl_noe_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_142_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_noe_list>
      </BMRBo:has_heteronucl_noe_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_noe_softwareCategory/BMRBx:heteronucl_noe_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_noe_list_id)&lt;64"><xsl:value-of select="@heteronucl_noe_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_noe_software>
      <BMRBo:heteronucl_noe_software rdf:about="{$base}/heteronucl_noe_software/{$entry_id_encoded},{$heteronucl_noe_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_noe_software rdf:resource="{$base}/heteronucl_noe_software/{$entry_id_encoded},{$heteronucl_noe_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_143_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_noe_software>
      </BMRBo:has_heteronucl_noe_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_noe_softwareCategory/BMRBx:heteronucl_noe_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_noe_list_id)&lt;64"><xsl:value-of select="@heteronucl_noe_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_noe_software>
      <BMRBo:heteronucl_noe_software rdf:about="{$base}/heteronucl_noe_software/{$entry_id_encoded},{$heteronucl_noe_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_noe_software rdf:resource="{$base}/heteronucl_noe_software/{$entry_id_encoded},{$heteronucl_noe_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_143_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_noe_software>
      </BMRBo:has_heteronucl_noe_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t1_experimentCategory/BMRBx:heteronucl_t1_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t1_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t1_list_id)&lt;64"><xsl:value-of select="@heteronucl_t1_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t1_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t1_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t1_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t1_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t1_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t1_experiment>
      <BMRBo:heteronucl_t1_experiment rdf:about="{$base}/heteronucl_t1_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_t1_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t1_experiment rdf:resource="{$base}/heteronucl_t1_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_t1_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_144_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t1_experiment>
      </BMRBo:has_heteronucl_t1_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t1_experimentCategory/BMRBx:heteronucl_t1_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t1_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t1_list_id)&lt;64"><xsl:value-of select="@heteronucl_t1_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t1_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t1_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t1_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t1_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t1_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t1_experiment>
      <BMRBo:heteronucl_t1_experiment rdf:about="{$base}/heteronucl_t1_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_t1_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t1_experiment rdf:resource="{$base}/heteronucl_t1_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_t1_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_144_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t1_experiment>
      </BMRBo:has_heteronucl_t1_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t1_listCategory/BMRBx:heteronucl_t1_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t1_list>
      <BMRBo:heteronucl_t1_list rdf:about="{$base}/heteronucl_t1_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t1_list rdf:resource="{$base}/heteronucl_t1_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_145_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t1_list>
      </BMRBo:has_heteronucl_t1_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t1_listCategory/BMRBx:heteronucl_t1_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t1_list>
      <BMRBo:heteronucl_t1_list rdf:about="{$base}/heteronucl_t1_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t1_list rdf:resource="{$base}/heteronucl_t1_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_145_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t1_list>
      </BMRBo:has_heteronucl_t1_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t1_softwareCategory/BMRBx:heteronucl_t1_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t1_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t1_list_id)&lt;64"><xsl:value-of select="@heteronucl_t1_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t1_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t1_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t1_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t1_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t1_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t1_software>
      <BMRBo:heteronucl_t1_software rdf:about="{$base}/heteronucl_t1_software/{$entry_id_encoded},{$heteronucl_t1_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t1_software rdf:resource="{$base}/heteronucl_t1_software/{$entry_id_encoded},{$heteronucl_t1_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_146_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t1_software>
      </BMRBo:has_heteronucl_t1_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t1_softwareCategory/BMRBx:heteronucl_t1_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t1_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t1_list_id)&lt;64"><xsl:value-of select="@heteronucl_t1_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t1_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t1_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t1_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t1_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t1_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t1_software>
      <BMRBo:heteronucl_t1_software rdf:about="{$base}/heteronucl_t1_software/{$entry_id_encoded},{$heteronucl_t1_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t1_software rdf:resource="{$base}/heteronucl_t1_software/{$entry_id_encoded},{$heteronucl_t1_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_146_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t1_software>
      </BMRBo:has_heteronucl_t1_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t1rho_experimentCategory/BMRBx:heteronucl_t1rho_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t1rho_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t1rho_list_id)&lt;64"><xsl:value-of select="@heteronucl_t1rho_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t1rho_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t1rho_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t1rho_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t1rho_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t1rho_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t1rho_experiment>
      <BMRBo:heteronucl_t1rho_experiment rdf:about="{$base}/heteronucl_t1rho_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_t1rho_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t1rho_experiment rdf:resource="{$base}/heteronucl_t1rho_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_t1rho_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_147_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t1rho_experiment>
      </BMRBo:has_heteronucl_t1rho_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t1rho_experimentCategory/BMRBx:heteronucl_t1rho_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t1rho_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t1rho_list_id)&lt;64"><xsl:value-of select="@heteronucl_t1rho_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t1rho_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t1rho_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t1rho_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t1rho_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t1rho_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t1rho_experiment>
      <BMRBo:heteronucl_t1rho_experiment rdf:about="{$base}/heteronucl_t1rho_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_t1rho_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t1rho_experiment rdf:resource="{$base}/heteronucl_t1rho_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_t1rho_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_147_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t1rho_experiment>
      </BMRBo:has_heteronucl_t1rho_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t1rho_listCategory/BMRBx:heteronucl_t1rho_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t1rho_list>
      <BMRBo:heteronucl_t1rho_list rdf:about="{$base}/heteronucl_t1rho_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t1rho_list rdf:resource="{$base}/heteronucl_t1rho_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_148_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t1rho_list>
      </BMRBo:has_heteronucl_t1rho_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t1rho_listCategory/BMRBx:heteronucl_t1rho_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t1rho_list>
      <BMRBo:heteronucl_t1rho_list rdf:about="{$base}/heteronucl_t1rho_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t1rho_list rdf:resource="{$base}/heteronucl_t1rho_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_148_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t1rho_list>
      </BMRBo:has_heteronucl_t1rho_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t1rho_softwareCategory/BMRBx:heteronucl_t1rho_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t1rho_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t1rho_list_id)&lt;64"><xsl:value-of select="@heteronucl_t1rho_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t1rho_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t1rho_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t1rho_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t1rho_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t1rho_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t1rho_software>
      <BMRBo:heteronucl_t1rho_software rdf:about="{$base}/heteronucl_t1rho_software/{$entry_id_encoded},{$heteronucl_t1rho_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t1rho_software rdf:resource="{$base}/heteronucl_t1rho_software/{$entry_id_encoded},{$heteronucl_t1rho_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_149_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t1rho_software>
      </BMRBo:has_heteronucl_t1rho_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t1rho_softwareCategory/BMRBx:heteronucl_t1rho_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t1rho_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t1rho_list_id)&lt;64"><xsl:value-of select="@heteronucl_t1rho_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t1rho_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t1rho_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t1rho_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t1rho_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t1rho_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t1rho_software>
      <BMRBo:heteronucl_t1rho_software rdf:about="{$base}/heteronucl_t1rho_software/{$entry_id_encoded},{$heteronucl_t1rho_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t1rho_software rdf:resource="{$base}/heteronucl_t1rho_software/{$entry_id_encoded},{$heteronucl_t1rho_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_149_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t1rho_software>
      </BMRBo:has_heteronucl_t1rho_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t2_experimentCategory/BMRBx:heteronucl_t2_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t2_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t2_list_id)&lt;64"><xsl:value-of select="@heteronucl_t2_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t2_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t2_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t2_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t2_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t2_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t2_experiment>
      <BMRBo:heteronucl_t2_experiment rdf:about="{$base}/heteronucl_t2_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_t2_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t2_experiment rdf:resource="{$base}/heteronucl_t2_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_t2_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_150_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t2_experiment>
      </BMRBo:has_heteronucl_t2_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t2_experimentCategory/BMRBx:heteronucl_t2_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t2_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t2_list_id)&lt;64"><xsl:value-of select="@heteronucl_t2_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t2_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t2_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t2_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t2_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t2_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t2_experiment>
      <BMRBo:heteronucl_t2_experiment rdf:about="{$base}/heteronucl_t2_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_t2_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t2_experiment rdf:resource="{$base}/heteronucl_t2_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$heteronucl_t2_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_150_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t2_experiment>
      </BMRBo:has_heteronucl_t2_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t2_listCategory/BMRBx:heteronucl_t2_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t2_list>
      <BMRBo:heteronucl_t2_list rdf:about="{$base}/heteronucl_t2_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t2_list rdf:resource="{$base}/heteronucl_t2_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_151_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t2_list>
      </BMRBo:has_heteronucl_t2_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t2_listCategory/BMRBx:heteronucl_t2_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t2_list>
      <BMRBo:heteronucl_t2_list rdf:about="{$base}/heteronucl_t2_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t2_list rdf:resource="{$base}/heteronucl_t2_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_151_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t2_list>
      </BMRBo:has_heteronucl_t2_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t2_softwareCategory/BMRBx:heteronucl_t2_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t2_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t2_list_id)&lt;64"><xsl:value-of select="@heteronucl_t2_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t2_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t2_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t2_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t2_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t2_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t2_software>
      <BMRBo:heteronucl_t2_software rdf:about="{$base}/heteronucl_t2_software/{$entry_id_encoded},{$heteronucl_t2_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t2_software rdf:resource="{$base}/heteronucl_t2_software/{$entry_id_encoded},{$heteronucl_t2_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_152_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t2_software>
      </BMRBo:has_heteronucl_t2_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:heteronucl_t2_softwareCategory/BMRBx:heteronucl_t2_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t2_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t2_list_id)&lt;64"><xsl:value-of select="@heteronucl_t2_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t2_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t2_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t2_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t2_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t2_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_heteronucl_t2_software>
      <BMRBo:heteronucl_t2_software rdf:about="{$base}/heteronucl_t2_software/{$entry_id_encoded},{$heteronucl_t2_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_heteronucl_t2_software rdf:resource="{$base}/heteronucl_t2_software/{$entry_id_encoded},{$heteronucl_t2_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_152_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:heteronucl_t2_software>
      </BMRBo:has_heteronucl_t2_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:historyCategory/BMRBx:history">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="run_number_truncated"><xsl:choose><xsl:when test="string-length(@run_number)&lt;64"><xsl:value-of select="@run_number"/></xsl:when><xsl:when test="contains(@run_number,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@run_number,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@run_number,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="run_number_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($run_number_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_applied_history_id_truncated"><xsl:choose><xsl:when test="string-length(@software_applied_history_id)&lt;64"><xsl:value-of select="@software_applied_history_id"/></xsl:when><xsl:when test="contains(@software_applied_history_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_applied_history_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_applied_history_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_applied_history_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_applied_history_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_history>
      <BMRBo:history rdf:about="{$base}/history/{$entry_id_encoded},{$run_number_encoded},{$software_applied_history_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_history rdf:resource="{$base}/history/{$entry_id_encoded},{$run_number_encoded},{$software_applied_history_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_153_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:history>
      </BMRBo:has_history>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:historyCategory/BMRBx:history">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="run_number_truncated"><xsl:choose><xsl:when test="string-length(@run_number)&lt;64"><xsl:value-of select="@run_number"/></xsl:when><xsl:when test="contains(@run_number,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@run_number,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@run_number,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="run_number_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($run_number_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_applied_history_id_truncated"><xsl:choose><xsl:when test="string-length(@software_applied_history_id)&lt;64"><xsl:value-of select="@software_applied_history_id"/></xsl:when><xsl:when test="contains(@software_applied_history_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_applied_history_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_applied_history_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_applied_history_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_applied_history_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_history>
      <BMRBo:history rdf:about="{$base}/history/{$entry_id_encoded},{$run_number_encoded},{$software_applied_history_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_history rdf:resource="{$base}/history/{$entry_id_encoded},{$run_number_encoded},{$software_applied_history_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_153_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:history>
      </BMRBo:has_history>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:homonucl_noeCategory/BMRBx:homonucl_noe">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="homonucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@homonucl_noe_list_id)&lt;64"><xsl:value-of select="@homonucl_noe_list_id"/></xsl:when><xsl:when test="contains(@homonucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@homonucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@homonucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="homonucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($homonucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_homonucl_noe>
      <BMRBo:homonucl_noe rdf:about="{$base}/homonucl_noe/{$entry_id_encoded},{$homonucl_noe_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_homonucl_noe rdf:resource="{$base}/homonucl_noe/{$entry_id_encoded},{$homonucl_noe_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_154_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:homonucl_noe>
      </BMRBo:has_homonucl_noe>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:homonucl_noeCategory/BMRBx:homonucl_noe">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="homonucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@homonucl_noe_list_id)&lt;64"><xsl:value-of select="@homonucl_noe_list_id"/></xsl:when><xsl:when test="contains(@homonucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@homonucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@homonucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="homonucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($homonucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_homonucl_noe>
      <BMRBo:homonucl_noe rdf:about="{$base}/homonucl_noe/{$entry_id_encoded},{$homonucl_noe_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_homonucl_noe rdf:resource="{$base}/homonucl_noe/{$entry_id_encoded},{$homonucl_noe_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_154_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:homonucl_noe>
      </BMRBo:has_homonucl_noe>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:homonucl_noe_experimentCategory/BMRBx:homonucl_noe_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="homonucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@homonucl_noe_list_id)&lt;64"><xsl:value-of select="@homonucl_noe_list_id"/></xsl:when><xsl:when test="contains(@homonucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@homonucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@homonucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="homonucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($homonucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_homonucl_noe_experiment>
      <BMRBo:homonucl_noe_experiment rdf:about="{$base}/homonucl_noe_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$homonucl_noe_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_homonucl_noe_experiment rdf:resource="{$base}/homonucl_noe_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$homonucl_noe_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_155_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:homonucl_noe_experiment>
      </BMRBo:has_homonucl_noe_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:homonucl_noe_experimentCategory/BMRBx:homonucl_noe_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="homonucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@homonucl_noe_list_id)&lt;64"><xsl:value-of select="@homonucl_noe_list_id"/></xsl:when><xsl:when test="contains(@homonucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@homonucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@homonucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="homonucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($homonucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_homonucl_noe_experiment>
      <BMRBo:homonucl_noe_experiment rdf:about="{$base}/homonucl_noe_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$homonucl_noe_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_homonucl_noe_experiment rdf:resource="{$base}/homonucl_noe_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$homonucl_noe_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_155_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:homonucl_noe_experiment>
      </BMRBo:has_homonucl_noe_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:homonucl_noe_listCategory/BMRBx:homonucl_noe_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_homonucl_noe_list>
      <BMRBo:homonucl_noe_list rdf:about="{$base}/homonucl_noe_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_homonucl_noe_list rdf:resource="{$base}/homonucl_noe_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_156_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:homonucl_noe_list>
      </BMRBo:has_homonucl_noe_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:homonucl_noe_listCategory/BMRBx:homonucl_noe_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_homonucl_noe_list>
      <BMRBo:homonucl_noe_list rdf:about="{$base}/homonucl_noe_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_homonucl_noe_list rdf:resource="{$base}/homonucl_noe_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_156_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:homonucl_noe_list>
      </BMRBo:has_homonucl_noe_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:homonucl_noe_softwareCategory/BMRBx:homonucl_noe_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="homonucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@homonucl_noe_list_id)&lt;64"><xsl:value-of select="@homonucl_noe_list_id"/></xsl:when><xsl:when test="contains(@homonucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@homonucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@homonucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="homonucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($homonucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_homonucl_noe_software>
      <BMRBo:homonucl_noe_software rdf:about="{$base}/homonucl_noe_software/{$entry_id_encoded},{$homonucl_noe_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_homonucl_noe_software rdf:resource="{$base}/homonucl_noe_software/{$entry_id_encoded},{$homonucl_noe_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_157_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:homonucl_noe_software>
      </BMRBo:has_homonucl_noe_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:homonucl_noe_softwareCategory/BMRBx:homonucl_noe_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="homonucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@homonucl_noe_list_id)&lt;64"><xsl:value-of select="@homonucl_noe_list_id"/></xsl:when><xsl:when test="contains(@homonucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@homonucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@homonucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="homonucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($homonucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_homonucl_noe_software>
      <BMRBo:homonucl_noe_software rdf:about="{$base}/homonucl_noe_software/{$entry_id_encoded},{$homonucl_noe_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_homonucl_noe_software rdf:resource="{$base}/homonucl_noe_software/{$entry_id_encoded},{$homonucl_noe_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_157_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:homonucl_noe_software>
      </BMRBo:has_homonucl_noe_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:interatomic_distCategory/BMRBx:interatomic_dist">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="interatomic_distance_list_id_truncated"><xsl:choose><xsl:when test="string-length(@interatomic_distance_list_id)&lt;64"><xsl:value-of select="@interatomic_distance_list_id"/></xsl:when><xsl:when test="contains(@interatomic_distance_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@interatomic_distance_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@interatomic_distance_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="interatomic_distance_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($interatomic_distance_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_interatomic_dist>
      <BMRBo:interatomic_dist rdf:about="{$base}/interatomic_dist/{$entry_id_encoded},{$id_encoded},{$interatomic_distance_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_interatomic_dist rdf:resource="{$base}/interatomic_dist/{$entry_id_encoded},{$id_encoded},{$interatomic_distance_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_158_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:interatomic_dist>
      </BMRBo:has_interatomic_dist>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:interatomic_distCategory/BMRBx:interatomic_dist">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="interatomic_distance_list_id_truncated"><xsl:choose><xsl:when test="string-length(@interatomic_distance_list_id)&lt;64"><xsl:value-of select="@interatomic_distance_list_id"/></xsl:when><xsl:when test="contains(@interatomic_distance_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@interatomic_distance_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@interatomic_distance_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="interatomic_distance_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($interatomic_distance_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_interatomic_dist>
      <BMRBo:interatomic_dist rdf:about="{$base}/interatomic_dist/{$entry_id_encoded},{$id_encoded},{$interatomic_distance_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_interatomic_dist rdf:resource="{$base}/interatomic_dist/{$entry_id_encoded},{$id_encoded},{$interatomic_distance_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_158_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:interatomic_dist>
      </BMRBo:has_interatomic_dist>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:interatomic_distance_listCategory/BMRBx:interatomic_distance_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_interatomic_distance_list>
      <BMRBo:interatomic_distance_list rdf:about="{$base}/interatomic_distance_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_interatomic_distance_list rdf:resource="{$base}/interatomic_distance_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_159_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:interatomic_distance_list>
      </BMRBo:has_interatomic_distance_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:interatomic_distance_listCategory/BMRBx:interatomic_distance_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_interatomic_distance_list>
      <BMRBo:interatomic_distance_list rdf:about="{$base}/interatomic_distance_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_interatomic_distance_list rdf:resource="{$base}/interatomic_distance_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_159_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:interatomic_distance_list>
      </BMRBo:has_interatomic_distance_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:isotope_effectCategory/BMRBx:isotope_effect">
      <xsl:variable name="chem_shift_isotope_effect_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_isotope_effect_list_id)&lt;64"><xsl:value-of select="@chem_shift_isotope_effect_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_isotope_effect_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_isotope_effect_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_isotope_effect_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_isotope_effect_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_isotope_effect_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_isotope_effect>
      <BMRBo:isotope_effect rdf:about="{$base}/isotope_effect/{$chem_shift_isotope_effect_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:isotope_effect>
      </BMRBo:has_isotope_effect>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:isotope_effectCategory/BMRBx:isotope_effect">
      <xsl:variable name="chem_shift_isotope_effect_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_isotope_effect_list_id)&lt;64"><xsl:value-of select="@chem_shift_isotope_effect_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_isotope_effect_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_isotope_effect_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_isotope_effect_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_isotope_effect_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_isotope_effect_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_isotope_effect>
      <BMRBo:isotope_effect rdf:about="{$base}/isotope_effect/{$chem_shift_isotope_effect_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:isotope_effect>
      </BMRBo:has_isotope_effect>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:isotope_effect_experimentCategory/BMRBx:isotope_effect_experiment">
      <xsl:variable name="chem_shift_isotope_effect_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_isotope_effect_list_id)&lt;64"><xsl:value-of select="@chem_shift_isotope_effect_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_isotope_effect_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_isotope_effect_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_isotope_effect_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_isotope_effect_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_isotope_effect_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_isotope_effect_experiment>
      <BMRBo:isotope_effect_experiment rdf:about="{$base}/isotope_effect_experiment/{$chem_shift_isotope_effect_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:isotope_effect_experiment>
      </BMRBo:has_isotope_effect_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:isotope_effect_experimentCategory/BMRBx:isotope_effect_experiment">
      <xsl:variable name="chem_shift_isotope_effect_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_isotope_effect_list_id)&lt;64"><xsl:value-of select="@chem_shift_isotope_effect_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_isotope_effect_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_isotope_effect_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_isotope_effect_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_isotope_effect_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_isotope_effect_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_isotope_effect_experiment>
      <BMRBo:isotope_effect_experiment rdf:about="{$base}/isotope_effect_experiment/{$chem_shift_isotope_effect_list_id_encoded},{$entry_id_encoded},{$experiment_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:isotope_effect_experiment>
      </BMRBo:has_isotope_effect_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:isotope_effect_softwareCategory/BMRBx:isotope_effect_software">
      <xsl:variable name="chem_shift_isotope_effect_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_isotope_effect_list_id)&lt;64"><xsl:value-of select="@chem_shift_isotope_effect_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_isotope_effect_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_isotope_effect_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_isotope_effect_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_isotope_effect_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_isotope_effect_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_isotope_effect_software>
      <BMRBo:isotope_effect_software rdf:about="{$base}/isotope_effect_software/{$chem_shift_isotope_effect_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:isotope_effect_software>
      </BMRBo:has_isotope_effect_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:isotope_effect_softwareCategory/BMRBx:isotope_effect_software">
      <xsl:variable name="chem_shift_isotope_effect_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_isotope_effect_list_id)&lt;64"><xsl:value-of select="@chem_shift_isotope_effect_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_isotope_effect_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_isotope_effect_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_isotope_effect_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_isotope_effect_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_isotope_effect_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_isotope_effect_software>
      <BMRBo:isotope_effect_software rdf:about="{$base}/isotope_effect_software/{$chem_shift_isotope_effect_list_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:isotope_effect_software>
      </BMRBo:has_isotope_effect_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:isotope_label_patternCategory/BMRBx:isotope_label_pattern">
      <xsl:variable name="chem_shift_isotope_effect_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_isotope_effect_list_id)&lt;64"><xsl:value-of select="@chem_shift_isotope_effect_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_isotope_effect_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_isotope_effect_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_isotope_effect_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_isotope_effect_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_isotope_effect_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_isotope_label_pattern>
      <BMRBo:isotope_label_pattern rdf:about="{$base}/isotope_label_pattern/{$chem_shift_isotope_effect_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:isotope_label_pattern>
      </BMRBo:has_isotope_label_pattern>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:isotope_label_patternCategory/BMRBx:isotope_label_pattern">
      <xsl:variable name="chem_shift_isotope_effect_list_id_truncated"><xsl:choose><xsl:when test="string-length(@chem_shift_isotope_effect_list_id)&lt;64"><xsl:value-of select="@chem_shift_isotope_effect_list_id"/></xsl:when><xsl:when test="contains(@chem_shift_isotope_effect_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@chem_shift_isotope_effect_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@chem_shift_isotope_effect_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="chem_shift_isotope_effect_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($chem_shift_isotope_effect_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_isotope_label_pattern>
      <BMRBo:isotope_label_pattern rdf:about="{$base}/isotope_label_pattern/{$chem_shift_isotope_effect_list_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:isotope_label_pattern>
      </BMRBo:has_isotope_label_pattern>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:j_three_bond_constraintCategory/BMRBx:j_three_bond_constraint">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="j_three_bond_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@j_three_bond_constraint_list_id)&lt;64"><xsl:value-of select="@j_three_bond_constraint_list_id"/></xsl:when><xsl:when test="contains(@j_three_bond_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@j_three_bond_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@j_three_bond_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="j_three_bond_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($j_three_bond_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_j_three_bond_constraint>
      <BMRBo:j_three_bond_constraint rdf:about="{$base}/j_three_bond_constraint/{$entry_id_encoded},{$id_encoded},{$j_three_bond_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_j_three_bond_constraint rdf:resource="{$base}/j_three_bond_constraint/{$entry_id_encoded},{$id_encoded},{$j_three_bond_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_160_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:j_three_bond_constraint>
      </BMRBo:has_j_three_bond_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:j_three_bond_constraintCategory/BMRBx:j_three_bond_constraint">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="j_three_bond_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@j_three_bond_constraint_list_id)&lt;64"><xsl:value-of select="@j_three_bond_constraint_list_id"/></xsl:when><xsl:when test="contains(@j_three_bond_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@j_three_bond_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@j_three_bond_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="j_three_bond_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($j_three_bond_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_j_three_bond_constraint>
      <BMRBo:j_three_bond_constraint rdf:about="{$base}/j_three_bond_constraint/{$entry_id_encoded},{$id_encoded},{$j_three_bond_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_j_three_bond_constraint rdf:resource="{$base}/j_three_bond_constraint/{$entry_id_encoded},{$id_encoded},{$j_three_bond_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_160_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:j_three_bond_constraint>
      </BMRBo:has_j_three_bond_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:j_three_bond_constraint_exptCategory/BMRBx:j_three_bond_constraint_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="j_three_bond_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@j_three_bond_constraint_list_id)&lt;64"><xsl:value-of select="@j_three_bond_constraint_list_id"/></xsl:when><xsl:when test="contains(@j_three_bond_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@j_three_bond_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@j_three_bond_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="j_three_bond_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($j_three_bond_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_j_three_bond_constraint_expt>
      <BMRBo:j_three_bond_constraint_expt rdf:about="{$base}/j_three_bond_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$j_three_bond_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_j_three_bond_constraint_expt rdf:resource="{$base}/j_three_bond_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$j_three_bond_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_161_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:j_three_bond_constraint_expt>
      </BMRBo:has_j_three_bond_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:j_three_bond_constraint_exptCategory/BMRBx:j_three_bond_constraint_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="j_three_bond_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@j_three_bond_constraint_list_id)&lt;64"><xsl:value-of select="@j_three_bond_constraint_list_id"/></xsl:when><xsl:when test="contains(@j_three_bond_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@j_three_bond_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@j_three_bond_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="j_three_bond_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($j_three_bond_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_j_three_bond_constraint_expt>
      <BMRBo:j_three_bond_constraint_expt rdf:about="{$base}/j_three_bond_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$j_three_bond_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_j_three_bond_constraint_expt rdf:resource="{$base}/j_three_bond_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$j_three_bond_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_161_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:j_three_bond_constraint_expt>
      </BMRBo:has_j_three_bond_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:j_three_bond_constraint_listCategory/BMRBx:j_three_bond_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_j_three_bond_constraint_list>
      <BMRBo:j_three_bond_constraint_list rdf:about="{$base}/j_three_bond_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_j_three_bond_constraint_list rdf:resource="{$base}/j_three_bond_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_162_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:j_three_bond_constraint_list>
      </BMRBo:has_j_three_bond_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:j_three_bond_constraint_listCategory/BMRBx:j_three_bond_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_j_three_bond_constraint_list>
      <BMRBo:j_three_bond_constraint_list rdf:about="{$base}/j_three_bond_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_j_three_bond_constraint_list rdf:resource="{$base}/j_three_bond_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_162_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:j_three_bond_constraint_list>
      </BMRBo:has_j_three_bond_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:j_three_bond_constraint_softwareCategory/BMRBx:j_three_bond_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="j_three_bond_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@j_three_bond_constraint_list_id)&lt;64"><xsl:value-of select="@j_three_bond_constraint_list_id"/></xsl:when><xsl:when test="contains(@j_three_bond_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@j_three_bond_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@j_three_bond_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="j_three_bond_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($j_three_bond_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_j_three_bond_constraint_software>
      <BMRBo:j_three_bond_constraint_software rdf:about="{$base}/j_three_bond_constraint_software/{$entry_id_encoded},{$j_three_bond_constraint_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_j_three_bond_constraint_software rdf:resource="{$base}/j_three_bond_constraint_software/{$entry_id_encoded},{$j_three_bond_constraint_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_163_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:j_three_bond_constraint_software>
      </BMRBo:has_j_three_bond_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:j_three_bond_constraint_softwareCategory/BMRBx:j_three_bond_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="j_three_bond_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@j_three_bond_constraint_list_id)&lt;64"><xsl:value-of select="@j_three_bond_constraint_list_id"/></xsl:when><xsl:when test="contains(@j_three_bond_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@j_three_bond_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@j_three_bond_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="j_three_bond_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($j_three_bond_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_j_three_bond_constraint_software>
      <BMRBo:j_three_bond_constraint_software rdf:about="{$base}/j_three_bond_constraint_software/{$entry_id_encoded},{$j_three_bond_constraint_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_j_three_bond_constraint_software rdf:resource="{$base}/j_three_bond_constraint_software/{$entry_id_encoded},{$j_three_bond_constraint_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_163_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:j_three_bond_constraint_software>
      </BMRBo:has_j_three_bond_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:karplus_equationCategory/BMRBx:karplus_equation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_code_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_code)&lt;64"><xsl:value-of select="@torsion_angle_code"/></xsl:when><xsl:when test="contains(@torsion_angle_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_karplus_equation>
      <BMRBo:karplus_equation rdf:about="{$base}/karplus_equation/{$entry_id_encoded},{$torsion_angle_code_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_karplus_equation rdf:resource="{$base}/karplus_equation/{$entry_id_encoded},{$torsion_angle_code_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_164_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:karplus_equation>
      </BMRBo:has_karplus_equation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:karplus_equationCategory/BMRBx:karplus_equation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_code_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_code)&lt;64"><xsl:value-of select="@torsion_angle_code"/></xsl:when><xsl:when test="contains(@torsion_angle_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_karplus_equation>
      <BMRBo:karplus_equation rdf:about="{$base}/karplus_equation/{$entry_id_encoded},{$torsion_angle_code_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_karplus_equation rdf:resource="{$base}/karplus_equation/{$entry_id_encoded},{$torsion_angle_code_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_164_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:karplus_equation>
      </BMRBo:has_karplus_equation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:lacs_charCategory/BMRBx:lacs_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="lacs_plot_id_truncated"><xsl:choose><xsl:when test="string-length(@lacs_plot_id)&lt;64"><xsl:value-of select="@lacs_plot_id"/></xsl:when><xsl:when test="contains(@lacs_plot_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@lacs_plot_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@lacs_plot_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="lacs_plot_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($lacs_plot_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_lacs_char>
      <BMRBo:lacs_char rdf:about="{$base}/lacs_char/{$entry_id_encoded},{$id_encoded},{$lacs_plot_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_lacs_char rdf:resource="{$base}/lacs_char/{$entry_id_encoded},{$id_encoded},{$lacs_plot_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_165_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:lacs_char>
      </BMRBo:has_lacs_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:lacs_charCategory/BMRBx:lacs_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="lacs_plot_id_truncated"><xsl:choose><xsl:when test="string-length(@lacs_plot_id)&lt;64"><xsl:value-of select="@lacs_plot_id"/></xsl:when><xsl:when test="contains(@lacs_plot_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@lacs_plot_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@lacs_plot_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="lacs_plot_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($lacs_plot_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_lacs_char>
      <BMRBo:lacs_char rdf:about="{$base}/lacs_char/{$entry_id_encoded},{$id_encoded},{$lacs_plot_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_lacs_char rdf:resource="{$base}/lacs_char/{$entry_id_encoded},{$id_encoded},{$lacs_plot_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_165_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:lacs_char>
      </BMRBo:has_lacs_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:lacs_plotCategory/BMRBx:lacs_plot">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_lacs_plot>
      <BMRBo:lacs_plot rdf:about="{$base}/lacs_plot/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_lacs_plot rdf:resource="{$base}/lacs_plot/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_166_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:lacs_plot>
      </BMRBo:has_lacs_plot>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:lacs_plotCategory/BMRBx:lacs_plot">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_lacs_plot>
      <BMRBo:lacs_plot rdf:about="{$base}/lacs_plot/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_lacs_plot rdf:resource="{$base}/lacs_plot/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_166_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:lacs_plot>
      </BMRBo:has_lacs_plot>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:local_structure_qualityCategory/BMRBx:local_structure_quality">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_local_structure_quality>
      <BMRBo:local_structure_quality rdf:about="{$base}/local_structure_quality/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_local_structure_quality rdf:resource="{$base}/local_structure_quality/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_167_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:local_structure_quality>
      </BMRBo:has_local_structure_quality>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:local_structure_qualityCategory/BMRBx:local_structure_quality">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_local_structure_quality>
      <BMRBo:local_structure_quality rdf:about="{$base}/local_structure_quality/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_local_structure_quality rdf:resource="{$base}/local_structure_quality/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_167_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:local_structure_quality>
      </BMRBo:has_local_structure_quality>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_specCategory/BMRBx:mass_spec">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec>
      <BMRBo:mass_spec rdf:about="{$base}/mass_spec/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mass_spec rdf:resource="{$base}/mass_spec/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_168_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec>
      </BMRBo:has_mass_spec>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_specCategory/BMRBx:mass_spec">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec>
      <BMRBo:mass_spec rdf:about="{$base}/mass_spec/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mass_spec rdf:resource="{$base}/mass_spec/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_168_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec>
      </BMRBo:has_mass_spec>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spec_citationCategory/BMRBx:mass_spec_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spec_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spec_id)&lt;64"><xsl:value-of select="@mass_spec_id"/></xsl:when><xsl:when test="contains(@mass_spec_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spec_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spec_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spec_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spec_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec_citation>
      <BMRBo:mass_spec_citation rdf:about="{$base}/mass_spec_citation/{$citation_id_encoded},{$entry_id_encoded},{$mass_spec_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec_citation>
      </BMRBo:has_mass_spec_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spec_citationCategory/BMRBx:mass_spec_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spec_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spec_id)&lt;64"><xsl:value-of select="@mass_spec_id"/></xsl:when><xsl:when test="contains(@mass_spec_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spec_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spec_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spec_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spec_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec_citation>
      <BMRBo:mass_spec_citation rdf:about="{$base}/mass_spec_citation/{$citation_id_encoded},{$entry_id_encoded},{$mass_spec_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec_citation>
      </BMRBo:has_mass_spec_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spec_component_paramCategory/BMRBx:mass_spec_component_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spec_config_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spec_config_id)&lt;64"><xsl:value-of select="@mass_spec_config_id"/></xsl:when><xsl:when test="contains(@mass_spec_config_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spec_config_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spec_config_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spec_config_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spec_config_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spec_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spec_id)&lt;64"><xsl:value-of select="@mass_spec_id"/></xsl:when><xsl:when test="contains(@mass_spec_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spec_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spec_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spec_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spec_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec_component_param>
      <BMRBo:mass_spec_component_param rdf:about="{$base}/mass_spec_component_param/{$entry_id_encoded},{$id_encoded},{$mass_spec_config_id_encoded},{$mass_spec_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec_component_param>
      </BMRBo:has_mass_spec_component_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spec_component_paramCategory/BMRBx:mass_spec_component_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spec_config_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spec_config_id)&lt;64"><xsl:value-of select="@mass_spec_config_id"/></xsl:when><xsl:when test="contains(@mass_spec_config_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spec_config_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spec_config_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spec_config_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spec_config_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spec_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spec_id)&lt;64"><xsl:value-of select="@mass_spec_id"/></xsl:when><xsl:when test="contains(@mass_spec_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spec_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spec_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spec_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spec_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec_component_param>
      <BMRBo:mass_spec_component_param rdf:about="{$base}/mass_spec_component_param/{$entry_id_encoded},{$id_encoded},{$mass_spec_config_id_encoded},{$mass_spec_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec_component_param>
      </BMRBo:has_mass_spec_component_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spec_configCategory/BMRBx:mass_spec_config">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spec_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spec_id)&lt;64"><xsl:value-of select="@mass_spec_id"/></xsl:when><xsl:when test="contains(@mass_spec_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spec_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spec_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spec_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spec_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec_config>
      <BMRBo:mass_spec_config rdf:about="{$base}/mass_spec_config/{$entry_id_encoded},{$id_encoded},{$mass_spec_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec_config>
      </BMRBo:has_mass_spec_config>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spec_configCategory/BMRBx:mass_spec_config">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spec_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spec_id)&lt;64"><xsl:value-of select="@mass_spec_id"/></xsl:when><xsl:when test="contains(@mass_spec_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spec_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spec_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spec_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spec_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec_config>
      <BMRBo:mass_spec_config rdf:about="{$base}/mass_spec_config/{$entry_id_encoded},{$id_encoded},{$mass_spec_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec_config>
      </BMRBo:has_mass_spec_config>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spec_ref_compdCategory/BMRBx:mass_spec_ref_compd">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spec_ref_compd_set_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spec_ref_compd_set_id)&lt;64"><xsl:value-of select="@mass_spec_ref_compd_set_id"/></xsl:when><xsl:when test="contains(@mass_spec_ref_compd_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spec_ref_compd_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spec_ref_compd_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spec_ref_compd_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spec_ref_compd_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec_ref_compd>
      <BMRBo:mass_spec_ref_compd rdf:about="{$base}/mass_spec_ref_compd/{$entry_id_encoded},{$id_encoded},{$mass_spec_ref_compd_set_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec_ref_compd>
      </BMRBo:has_mass_spec_ref_compd>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spec_ref_compdCategory/BMRBx:mass_spec_ref_compd">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spec_ref_compd_set_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spec_ref_compd_set_id)&lt;64"><xsl:value-of select="@mass_spec_ref_compd_set_id"/></xsl:when><xsl:when test="contains(@mass_spec_ref_compd_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spec_ref_compd_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spec_ref_compd_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spec_ref_compd_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spec_ref_compd_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec_ref_compd>
      <BMRBo:mass_spec_ref_compd rdf:about="{$base}/mass_spec_ref_compd/{$entry_id_encoded},{$id_encoded},{$mass_spec_ref_compd_set_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec_ref_compd>
      </BMRBo:has_mass_spec_ref_compd>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spec_ref_compd_setCategory/BMRBx:mass_spec_ref_compd_set">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec_ref_compd_set>
      <BMRBo:mass_spec_ref_compd_set rdf:about="{$base}/mass_spec_ref_compd_set/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mass_spec_ref_compd_set rdf:resource="{$base}/mass_spec_ref_compd_set/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_169_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec_ref_compd_set>
      </BMRBo:has_mass_spec_ref_compd_set>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spec_ref_compd_setCategory/BMRBx:mass_spec_ref_compd_set">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec_ref_compd_set>
      <BMRBo:mass_spec_ref_compd_set rdf:about="{$base}/mass_spec_ref_compd_set/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mass_spec_ref_compd_set rdf:resource="{$base}/mass_spec_ref_compd_set/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_169_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec_ref_compd_set>
      </BMRBo:has_mass_spec_ref_compd_set>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spec_softwareCategory/BMRBx:mass_spec_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spec_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spec_id)&lt;64"><xsl:value-of select="@mass_spec_id"/></xsl:when><xsl:when test="contains(@mass_spec_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spec_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spec_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spec_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spec_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec_software>
      <BMRBo:mass_spec_software rdf:about="{$base}/mass_spec_software/{$entry_id_encoded},{$mass_spec_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec_software>
      </BMRBo:has_mass_spec_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spec_softwareCategory/BMRBx:mass_spec_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spec_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spec_id)&lt;64"><xsl:value-of select="@mass_spec_id"/></xsl:when><xsl:when test="contains(@mass_spec_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spec_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spec_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spec_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spec_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spec_software>
      <BMRBo:mass_spec_software rdf:about="{$base}/mass_spec_software/{$entry_id_encoded},{$mass_spec_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spec_software>
      </BMRBo:has_mass_spec_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spectrometer_listCategory/BMRBx:mass_spectrometer_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spectrometer_list>
      <BMRBo:mass_spectrometer_list rdf:about="{$base}/mass_spectrometer_list/{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mass_spectrometer_list rdf:resource="{$base}/mass_spectrometer_list/{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_170_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spectrometer_list>
      </BMRBo:has_mass_spectrometer_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spectrometer_listCategory/BMRBx:mass_spectrometer_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spectrometer_list>
      <BMRBo:mass_spectrometer_list rdf:about="{$base}/mass_spectrometer_list/{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mass_spectrometer_list rdf:resource="{$base}/mass_spectrometer_list/{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_170_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spectrometer_list>
      </BMRBo:has_mass_spectrometer_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spectrometer_viewCategory/BMRBx:mass_spectrometer_view">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spectrometer_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spectrometer_list_id)&lt;64"><xsl:value-of select="@mass_spectrometer_list_id"/></xsl:when><xsl:when test="contains(@mass_spectrometer_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spectrometer_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spectrometer_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spectrometer_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spectrometer_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spectrometer_view>
      <BMRBo:mass_spectrometer_view rdf:about="{$base}/mass_spectrometer_view/{$entry_id_encoded},{$id_encoded},{$mass_spectrometer_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spectrometer_view>
      </BMRBo:has_mass_spectrometer_view>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mass_spectrometer_viewCategory/BMRBx:mass_spectrometer_view">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mass_spectrometer_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mass_spectrometer_list_id)&lt;64"><xsl:value-of select="@mass_spectrometer_list_id"/></xsl:when><xsl:when test="contains(@mass_spectrometer_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mass_spectrometer_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mass_spectrometer_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mass_spectrometer_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mass_spectrometer_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mass_spectrometer_view>
      <BMRBo:mass_spectrometer_view rdf:about="{$base}/mass_spectrometer_view/{$entry_id_encoded},{$id_encoded},{$mass_spectrometer_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mass_spectrometer_view>
      </BMRBo:has_mass_spectrometer_view>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:matched_entriesCategory/BMRBx:matched_entries">
      <xsl:variable name="database_accession_code_truncated"><xsl:choose><xsl:when test="string-length(@database_accession_code)&lt;64"><xsl:value-of select="@database_accession_code"/></xsl:when><xsl:when test="contains(@database_accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="database_name_truncated"><xsl:choose><xsl:when test="string-length(@database_name)&lt;64"><xsl:value-of select="@database_name"/></xsl:when><xsl:when test="contains(@database_name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_matched_entries>
      <BMRBo:matched_entries rdf:about="{$base}/matched_entries/{$database_accession_code_encoded},{$database_name_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_matched_entries rdf:resource="{$base}/matched_entries/{$database_accession_code_encoded},{$database_name_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_171_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:matched_entries>
      </BMRBo:has_matched_entries>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:matched_entriesCategory/BMRBx:matched_entries">
      <xsl:variable name="database_accession_code_truncated"><xsl:choose><xsl:when test="string-length(@database_accession_code)&lt;64"><xsl:value-of select="@database_accession_code"/></xsl:when><xsl:when test="contains(@database_accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="database_name_truncated"><xsl:choose><xsl:when test="string-length(@database_name)&lt;64"><xsl:value-of select="@database_name"/></xsl:when><xsl:when test="contains(@database_name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_matched_entries>
      <BMRBo:matched_entries rdf:about="{$base}/matched_entries/{$database_accession_code_encoded},{$database_name_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_matched_entries rdf:resource="{$base}/matched_entries/{$database_accession_code_encoded},{$database_name_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_171_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:matched_entries>
      </BMRBo:has_matched_entries>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:methodCategory/BMRBx:method">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_method>
      <BMRBo:method rdf:about="{$base}/method/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_method rdf:resource="{$base}/method/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_172_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:method>
      </BMRBo:has_method>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:methodCategory/BMRBx:method">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_method>
      <BMRBo:method rdf:about="{$base}/method/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_method rdf:resource="{$base}/method/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_172_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:method>
      </BMRBo:has_method>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:method_citationCategory/BMRBx:method_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="method_id_truncated"><xsl:choose><xsl:when test="string-length(@method_id)&lt;64"><xsl:value-of select="@method_id"/></xsl:when><xsl:when test="contains(@method_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@method_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@method_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="method_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($method_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_method_citation>
      <BMRBo:method_citation rdf:about="{$base}/method_citation/{$citation_id_encoded},{$entry_id_encoded},{$method_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:method_citation>
      </BMRBo:has_method_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:method_citationCategory/BMRBx:method_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="method_id_truncated"><xsl:choose><xsl:when test="string-length(@method_id)&lt;64"><xsl:value-of select="@method_id"/></xsl:when><xsl:when test="contains(@method_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@method_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@method_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="method_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($method_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_method_citation>
      <BMRBo:method_citation rdf:about="{$base}/method_citation/{$citation_id_encoded},{$entry_id_encoded},{$method_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:method_citation>
      </BMRBo:has_method_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:method_fileCategory/BMRBx:method_file">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="method_id_truncated"><xsl:choose><xsl:when test="string-length(@method_id)&lt;64"><xsl:value-of select="@method_id"/></xsl:when><xsl:when test="contains(@method_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@method_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@method_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="method_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($method_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_method_file>
      <BMRBo:method_file rdf:about="{$base}/method_file/{$entry_id_encoded},{$method_id_encoded},{$name_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:method_file>
      </BMRBo:has_method_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:method_fileCategory/BMRBx:method_file">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="method_id_truncated"><xsl:choose><xsl:when test="string-length(@method_id)&lt;64"><xsl:value-of select="@method_id"/></xsl:when><xsl:when test="contains(@method_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@method_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@method_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="method_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($method_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_method_file>
      <BMRBo:method_file rdf:about="{$base}/method_file/{$entry_id_encoded},{$method_id_encoded},{$name_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:method_file>
      </BMRBo:has_method_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:method_paramCategory/BMRBx:method_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="file_name_truncated"><xsl:choose><xsl:when test="string-length(@file_name)&lt;64"><xsl:value-of select="@file_name"/></xsl:when><xsl:when test="contains(@file_name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@file_name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@file_name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="file_name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($file_name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="method_id_truncated"><xsl:choose><xsl:when test="string-length(@method_id)&lt;64"><xsl:value-of select="@method_id"/></xsl:when><xsl:when test="contains(@method_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@method_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@method_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="method_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($method_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_method_param>
      <BMRBo:method_param rdf:about="{$base}/method_param/{$entry_id_encoded},{$file_name_encoded},{$method_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:method_param>
      </BMRBo:has_method_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:method_paramCategory/BMRBx:method_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="file_name_truncated"><xsl:choose><xsl:when test="string-length(@file_name)&lt;64"><xsl:value-of select="@file_name"/></xsl:when><xsl:when test="contains(@file_name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@file_name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@file_name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="file_name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($file_name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="method_id_truncated"><xsl:choose><xsl:when test="string-length(@method_id)&lt;64"><xsl:value-of select="@method_id"/></xsl:when><xsl:when test="contains(@method_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@method_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@method_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="method_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($method_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_method_param>
      <BMRBo:method_param rdf:about="{$base}/method_param/{$entry_id_encoded},{$file_name_encoded},{$method_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:method_param>
      </BMRBo:has_method_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:model_typeCategory/BMRBx:model_type">
      <xsl:variable name="atom_site_model_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_site_model_id)&lt;64"><xsl:value-of select="@atom_site_model_id"/></xsl:when><xsl:when test="contains(@atom_site_model_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_site_model_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_site_model_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_site_model_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_site_model_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_model_type>
      <BMRBo:model_type rdf:about="{$base}/model_type/{$atom_site_model_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="BMRBx:entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/{translate(BMRBx:entry_id,' ^','__')}">
	    <BMRBo:referenced_by_model_type rdf:resource="{$base}/model_type/{$atom_site_model_id_encoded},{$type_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_173_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:model_type>
      </BMRBo:has_model_type>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:model_typeCategory/BMRBx:model_type">
      <xsl:variable name="atom_site_model_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_site_model_id)&lt;64"><xsl:value-of select="@atom_site_model_id"/></xsl:when><xsl:when test="contains(@atom_site_model_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_site_model_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_site_model_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_site_model_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_site_model_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_model_type>
      <BMRBo:model_type rdf:about="{$base}/model_type/{$atom_site_model_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="BMRBx:entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/{translate(BMRBx:entry_id,' ^','__')}">
	    <BMRBo:referenced_by_model_type rdf:resource="{$base}/model_type/{$atom_site_model_id_encoded},{$type_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_173_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:model_type>
      </BMRBo:has_model_type>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_chrom_ion_annotationCategory/BMRBx:ms_chrom_ion_annotation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_chromatogram_list_id)&lt;64"><xsl:value-of select="@ms_chromatogram_list_id"/></xsl:when><xsl:when test="contains(@ms_chromatogram_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_chromatogram_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_chromatogram_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_chromatogram_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_chrom_ion_annotation>
      <BMRBo:ms_chrom_ion_annotation rdf:about="{$base}/ms_chrom_ion_annotation/{$entry_id_encoded},{$id_encoded},{$ms_chromatogram_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_chrom_ion_annotation rdf:resource="{$base}/ms_chrom_ion_annotation/{$entry_id_encoded},{$id_encoded},{$ms_chromatogram_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_174_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_chrom_ion_annotation>
      </BMRBo:has_ms_chrom_ion_annotation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_chrom_ion_annotationCategory/BMRBx:ms_chrom_ion_annotation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_chromatogram_list_id)&lt;64"><xsl:value-of select="@ms_chromatogram_list_id"/></xsl:when><xsl:when test="contains(@ms_chromatogram_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_chromatogram_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_chromatogram_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_chromatogram_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_chrom_ion_annotation>
      <BMRBo:ms_chrom_ion_annotation rdf:about="{$base}/ms_chrom_ion_annotation/{$entry_id_encoded},{$id_encoded},{$ms_chromatogram_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_chrom_ion_annotation rdf:resource="{$base}/ms_chrom_ion_annotation/{$entry_id_encoded},{$id_encoded},{$ms_chromatogram_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_174_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_chrom_ion_annotation>
      </BMRBo:has_ms_chrom_ion_annotation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_chromatogram_experimentCategory/BMRBx:ms_chromatogram_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_chromatogram_list_id)&lt;64"><xsl:value-of select="@ms_chromatogram_list_id"/></xsl:when><xsl:when test="contains(@ms_chromatogram_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_chromatogram_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_chromatogram_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_chromatogram_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_chromatogram_experiment>
      <BMRBo:ms_chromatogram_experiment rdf:about="{$base}/ms_chromatogram_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$ms_chromatogram_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_chromatogram_experiment rdf:resource="{$base}/ms_chromatogram_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$ms_chromatogram_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_175_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_chromatogram_experiment>
      </BMRBo:has_ms_chromatogram_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_chromatogram_experimentCategory/BMRBx:ms_chromatogram_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_chromatogram_list_id)&lt;64"><xsl:value-of select="@ms_chromatogram_list_id"/></xsl:when><xsl:when test="contains(@ms_chromatogram_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_chromatogram_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_chromatogram_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_chromatogram_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_chromatogram_experiment>
      <BMRBo:ms_chromatogram_experiment rdf:about="{$base}/ms_chromatogram_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$ms_chromatogram_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_chromatogram_experiment rdf:resource="{$base}/ms_chromatogram_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$ms_chromatogram_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_175_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_chromatogram_experiment>
      </BMRBo:has_ms_chromatogram_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_chromatogram_ionCategory/BMRBx:ms_chromatogram_ion">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_chromatogram_list_id)&lt;64"><xsl:value-of select="@ms_chromatogram_list_id"/></xsl:when><xsl:when test="contains(@ms_chromatogram_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_chromatogram_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_chromatogram_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_chromatogram_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_chromatogram_ion>
      <BMRBo:ms_chromatogram_ion rdf:about="{$base}/ms_chromatogram_ion/{$entry_id_encoded},{$id_encoded},{$ms_chromatogram_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_chromatogram_ion rdf:resource="{$base}/ms_chromatogram_ion/{$entry_id_encoded},{$id_encoded},{$ms_chromatogram_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_176_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_chromatogram_ion>
      </BMRBo:has_ms_chromatogram_ion>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_chromatogram_ionCategory/BMRBx:ms_chromatogram_ion">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_chromatogram_list_id)&lt;64"><xsl:value-of select="@ms_chromatogram_list_id"/></xsl:when><xsl:when test="contains(@ms_chromatogram_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_chromatogram_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_chromatogram_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_chromatogram_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_chromatogram_ion>
      <BMRBo:ms_chromatogram_ion rdf:about="{$base}/ms_chromatogram_ion/{$entry_id_encoded},{$id_encoded},{$ms_chromatogram_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_chromatogram_ion rdf:resource="{$base}/ms_chromatogram_ion/{$entry_id_encoded},{$id_encoded},{$ms_chromatogram_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_176_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_chromatogram_ion>
      </BMRBo:has_ms_chromatogram_ion>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_chromatogram_listCategory/BMRBx:ms_chromatogram_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_chromatogram_list>
      <BMRBo:ms_chromatogram_list rdf:about="{$base}/ms_chromatogram_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_chromatogram_list rdf:resource="{$base}/ms_chromatogram_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_177_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_chromatogram_list>
      </BMRBo:has_ms_chromatogram_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_chromatogram_listCategory/BMRBx:ms_chromatogram_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_chromatogram_list>
      <BMRBo:ms_chromatogram_list rdf:about="{$base}/ms_chromatogram_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_chromatogram_list rdf:resource="{$base}/ms_chromatogram_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_177_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_chromatogram_list>
      </BMRBo:has_ms_chromatogram_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_chromatogram_paramCategory/BMRBx:ms_chromatogram_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_chromatogram_list_id)&lt;64"><xsl:value-of select="@ms_chromatogram_list_id"/></xsl:when><xsl:when test="contains(@ms_chromatogram_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_chromatogram_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_chromatogram_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_chromatogram_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_chromatogram_param>
      <BMRBo:ms_chromatogram_param rdf:about="{$base}/ms_chromatogram_param/{$entry_id_encoded},{$id_encoded},{$ms_chromatogram_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_chromatogram_param rdf:resource="{$base}/ms_chromatogram_param/{$entry_id_encoded},{$id_encoded},{$ms_chromatogram_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_178_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_chromatogram_param>
      </BMRBo:has_ms_chromatogram_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_chromatogram_paramCategory/BMRBx:ms_chromatogram_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_chromatogram_list_id)&lt;64"><xsl:value-of select="@ms_chromatogram_list_id"/></xsl:when><xsl:when test="contains(@ms_chromatogram_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_chromatogram_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_chromatogram_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_chromatogram_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_chromatogram_param>
      <BMRBo:ms_chromatogram_param rdf:about="{$base}/ms_chromatogram_param/{$entry_id_encoded},{$id_encoded},{$ms_chromatogram_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_chromatogram_param rdf:resource="{$base}/ms_chromatogram_param/{$entry_id_encoded},{$id_encoded},{$ms_chromatogram_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_178_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_chromatogram_param>
      </BMRBo:has_ms_chromatogram_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_chromatogram_softwareCategory/BMRBx:ms_chromatogram_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_chromatogram_list_id)&lt;64"><xsl:value-of select="@ms_chromatogram_list_id"/></xsl:when><xsl:when test="contains(@ms_chromatogram_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_chromatogram_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_chromatogram_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_chromatogram_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_chromatogram_software>
      <BMRBo:ms_chromatogram_software rdf:about="{$base}/ms_chromatogram_software/{$entry_id_encoded},{$ms_chromatogram_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_chromatogram_software rdf:resource="{$base}/ms_chromatogram_software/{$entry_id_encoded},{$ms_chromatogram_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_179_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_chromatogram_software>
      </BMRBo:has_ms_chromatogram_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_chromatogram_softwareCategory/BMRBx:ms_chromatogram_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_chromatogram_list_id)&lt;64"><xsl:value-of select="@ms_chromatogram_list_id"/></xsl:when><xsl:when test="contains(@ms_chromatogram_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_chromatogram_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_chromatogram_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_chromatogram_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_chromatogram_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_chromatogram_software>
      <BMRBo:ms_chromatogram_software rdf:about="{$base}/ms_chromatogram_software/{$entry_id_encoded},{$ms_chromatogram_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_chromatogram_software rdf:resource="{$base}/ms_chromatogram_software/{$entry_id_encoded},{$ms_chromatogram_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_179_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_chromatogram_software>
      </BMRBo:has_ms_chromatogram_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_exptCategory/BMRBx:ms_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_expt>
      <BMRBo:ms_expt rdf:about="{$base}/ms_expt/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_expt rdf:resource="{$base}/ms_expt/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_180_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_expt>
      </BMRBo:has_ms_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_exptCategory/BMRBx:ms_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_expt>
      <BMRBo:ms_expt rdf:about="{$base}/ms_expt/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_expt rdf:resource="{$base}/ms_expt/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_180_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_expt>
      </BMRBo:has_ms_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_expt_paramCategory/BMRBx:ms_expt_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_expt_id)&lt;64"><xsl:value-of select="@ms_expt_id"/></xsl:when><xsl:when test="contains(@ms_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_expt_param>
      <BMRBo:ms_expt_param rdf:about="{$base}/ms_expt_param/{$entry_id_encoded},{$id_encoded},{$ms_expt_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_expt_param rdf:resource="{$base}/ms_expt_param/{$entry_id_encoded},{$id_encoded},{$ms_expt_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_181_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_expt_param>
      </BMRBo:has_ms_expt_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_expt_paramCategory/BMRBx:ms_expt_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_expt_id)&lt;64"><xsl:value-of select="@ms_expt_id"/></xsl:when><xsl:when test="contains(@ms_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_expt_param>
      <BMRBo:ms_expt_param rdf:about="{$base}/ms_expt_param/{$entry_id_encoded},{$id_encoded},{$ms_expt_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_expt_param rdf:resource="{$base}/ms_expt_param/{$entry_id_encoded},{$id_encoded},{$ms_expt_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_181_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_expt_param>
      </BMRBo:has_ms_expt_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_expt_softwareCategory/BMRBx:ms_expt_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_expt_id)&lt;64"><xsl:value-of select="@ms_expt_id"/></xsl:when><xsl:when test="contains(@ms_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_expt_software>
      <BMRBo:ms_expt_software rdf:about="{$base}/ms_expt_software/{$entry_id_encoded},{$ms_expt_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_expt_software rdf:resource="{$base}/ms_expt_software/{$entry_id_encoded},{$ms_expt_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_182_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_expt_software>
      </BMRBo:has_ms_expt_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ms_expt_softwareCategory/BMRBx:ms_expt_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ms_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@ms_expt_id)&lt;64"><xsl:value-of select="@ms_expt_id"/></xsl:when><xsl:when test="contains(@ms_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ms_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ms_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ms_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ms_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ms_expt_software>
      <BMRBo:ms_expt_software rdf:about="{$base}/ms_expt_software/{$entry_id_encoded},{$ms_expt_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ms_expt_software rdf:resource="{$base}/ms_expt_software/{$entry_id_encoded},{$ms_expt_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_182_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ms_expt_software>
      </BMRBo:has_ms_expt_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_precursor_ionCategory/BMRBx:mz_precursor_ion">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_precursor_ion>
      <BMRBo:mz_precursor_ion rdf:about="{$base}/mz_precursor_ion/{$entry_id_encoded},{$id_encoded},{$mz_ratio_data_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_precursor_ion rdf:resource="{$base}/mz_precursor_ion/{$entry_id_encoded},{$id_encoded},{$mz_ratio_data_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_183_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_precursor_ion>
      </BMRBo:has_mz_precursor_ion>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_precursor_ionCategory/BMRBx:mz_precursor_ion">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_precursor_ion>
      <BMRBo:mz_precursor_ion rdf:about="{$base}/mz_precursor_ion/{$entry_id_encoded},{$id_encoded},{$mz_ratio_data_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_precursor_ion rdf:resource="{$base}/mz_precursor_ion/{$entry_id_encoded},{$id_encoded},{$mz_ratio_data_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_183_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_precursor_ion>
      </BMRBo:has_mz_precursor_ion>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_precursor_ion_annotationCategory/BMRBx:mz_precursor_ion_annotation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_precursor_ion_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_precursor_ion_id)&lt;64"><xsl:value-of select="@mz_precursor_ion_id"/></xsl:when><xsl:when test="contains(@mz_precursor_ion_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_precursor_ion_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_precursor_ion_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_precursor_ion_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_precursor_ion_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_precursor_ion_annotation>
      <BMRBo:mz_precursor_ion_annotation rdf:about="{$base}/mz_precursor_ion_annotation/{$entry_id_encoded},{$id_encoded},{$mz_precursor_ion_id_encoded},{$mz_ratio_data_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_precursor_ion_annotation rdf:resource="{$base}/mz_precursor_ion_annotation/{$entry_id_encoded},{$id_encoded},{$mz_precursor_ion_id_encoded},{$mz_ratio_data_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_184_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_precursor_ion_annotation>
      </BMRBo:has_mz_precursor_ion_annotation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_precursor_ion_annotationCategory/BMRBx:mz_precursor_ion_annotation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_precursor_ion_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_precursor_ion_id)&lt;64"><xsl:value-of select="@mz_precursor_ion_id"/></xsl:when><xsl:when test="contains(@mz_precursor_ion_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_precursor_ion_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_precursor_ion_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_precursor_ion_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_precursor_ion_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_precursor_ion_annotation>
      <BMRBo:mz_precursor_ion_annotation rdf:about="{$base}/mz_precursor_ion_annotation/{$entry_id_encoded},{$id_encoded},{$mz_precursor_ion_id_encoded},{$mz_ratio_data_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_precursor_ion_annotation rdf:resource="{$base}/mz_precursor_ion_annotation/{$entry_id_encoded},{$id_encoded},{$mz_precursor_ion_id_encoded},{$mz_ratio_data_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_184_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_precursor_ion_annotation>
      </BMRBo:has_mz_precursor_ion_annotation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_product_ionCategory/BMRBx:mz_product_ion">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_product_ion>
      <BMRBo:mz_product_ion rdf:about="{$base}/mz_product_ion/{$entry_id_encoded},{$id_encoded},{$mz_ratio_data_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_product_ion rdf:resource="{$base}/mz_product_ion/{$entry_id_encoded},{$id_encoded},{$mz_ratio_data_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_185_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_product_ion>
      </BMRBo:has_mz_product_ion>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_product_ionCategory/BMRBx:mz_product_ion">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_product_ion>
      <BMRBo:mz_product_ion rdf:about="{$base}/mz_product_ion/{$entry_id_encoded},{$id_encoded},{$mz_ratio_data_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_product_ion rdf:resource="{$base}/mz_product_ion/{$entry_id_encoded},{$id_encoded},{$mz_ratio_data_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_185_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_product_ion>
      </BMRBo:has_mz_product_ion>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_product_ion_annotationCategory/BMRBx:mz_product_ion_annotation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_product_ion_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_product_ion_id)&lt;64"><xsl:value-of select="@mz_product_ion_id"/></xsl:when><xsl:when test="contains(@mz_product_ion_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_product_ion_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_product_ion_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_product_ion_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_product_ion_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_product_ion_annotation>
      <BMRBo:mz_product_ion_annotation rdf:about="{$base}/mz_product_ion_annotation/{$entry_id_encoded},{$id_encoded},{$mz_product_ion_id_encoded},{$mz_ratio_data_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_product_ion_annotation rdf:resource="{$base}/mz_product_ion_annotation/{$entry_id_encoded},{$id_encoded},{$mz_product_ion_id_encoded},{$mz_ratio_data_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_186_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_product_ion_annotation>
      </BMRBo:has_mz_product_ion_annotation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_product_ion_annotationCategory/BMRBx:mz_product_ion_annotation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_product_ion_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_product_ion_id)&lt;64"><xsl:value-of select="@mz_product_ion_id"/></xsl:when><xsl:when test="contains(@mz_product_ion_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_product_ion_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_product_ion_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_product_ion_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_product_ion_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_product_ion_annotation>
      <BMRBo:mz_product_ion_annotation rdf:about="{$base}/mz_product_ion_annotation/{$entry_id_encoded},{$id_encoded},{$mz_product_ion_id_encoded},{$mz_ratio_data_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_product_ion_annotation rdf:resource="{$base}/mz_product_ion_annotation/{$entry_id_encoded},{$id_encoded},{$mz_product_ion_id_encoded},{$mz_ratio_data_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_186_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_product_ion_annotation>
      </BMRBo:has_mz_product_ion_annotation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_ratio_data_listCategory/BMRBx:mz_ratio_data_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_ratio_data_list>
      <BMRBo:mz_ratio_data_list rdf:about="{$base}/mz_ratio_data_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_ratio_data_list rdf:resource="{$base}/mz_ratio_data_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_187_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_ratio_data_list>
      </BMRBo:has_mz_ratio_data_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_ratio_data_listCategory/BMRBx:mz_ratio_data_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_ratio_data_list>
      <BMRBo:mz_ratio_data_list rdf:about="{$base}/mz_ratio_data_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_ratio_data_list rdf:resource="{$base}/mz_ratio_data_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_187_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_ratio_data_list>
      </BMRBo:has_mz_ratio_data_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_ratio_experimentCategory/BMRBx:mz_ratio_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_ratio_experiment>
      <BMRBo:mz_ratio_experiment rdf:about="{$base}/mz_ratio_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$mz_ratio_data_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_ratio_experiment rdf:resource="{$base}/mz_ratio_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$mz_ratio_data_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_188_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_ratio_experiment>
      </BMRBo:has_mz_ratio_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_ratio_experimentCategory/BMRBx:mz_ratio_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_ratio_experiment>
      <BMRBo:mz_ratio_experiment rdf:about="{$base}/mz_ratio_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$mz_ratio_data_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_ratio_experiment rdf:resource="{$base}/mz_ratio_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$mz_ratio_data_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_188_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_ratio_experiment>
      </BMRBo:has_mz_ratio_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_ratio_softwareCategory/BMRBx:mz_ratio_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_ratio_software>
      <BMRBo:mz_ratio_software rdf:about="{$base}/mz_ratio_software/{$entry_id_encoded},{$mz_ratio_data_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_ratio_software rdf:resource="{$base}/mz_ratio_software/{$entry_id_encoded},{$mz_ratio_data_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_189_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_ratio_software>
      </BMRBo:has_mz_ratio_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_ratio_softwareCategory/BMRBx:mz_ratio_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_ratio_software>
      <BMRBo:mz_ratio_software rdf:about="{$base}/mz_ratio_software/{$entry_id_encoded},{$mz_ratio_data_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_ratio_software rdf:resource="{$base}/mz_ratio_software/{$entry_id_encoded},{$mz_ratio_data_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_189_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_ratio_software>
      </BMRBo:has_mz_ratio_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_ratio_spectrum_paramCategory/BMRBx:mz_ratio_spectrum_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_ratio_spectrum_param>
      <BMRBo:mz_ratio_spectrum_param rdf:about="{$base}/mz_ratio_spectrum_param/{$entry_id_encoded},{$id_encoded},{$mz_ratio_data_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_ratio_spectrum_param rdf:resource="{$base}/mz_ratio_spectrum_param/{$entry_id_encoded},{$id_encoded},{$mz_ratio_data_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_190_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_ratio_spectrum_param>
      </BMRBo:has_mz_ratio_spectrum_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:mz_ratio_spectrum_paramCategory/BMRBx:mz_ratio_spectrum_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_truncated"><xsl:choose><xsl:when test="string-length(@mz_ratio_data_list_id)&lt;64"><xsl:value-of select="@mz_ratio_data_list_id"/></xsl:when><xsl:when test="contains(@mz_ratio_data_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@mz_ratio_data_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@mz_ratio_data_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="mz_ratio_data_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($mz_ratio_data_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_mz_ratio_spectrum_param>
      <BMRBo:mz_ratio_spectrum_param rdf:about="{$base}/mz_ratio_spectrum_param/{$entry_id_encoded},{$id_encoded},{$mz_ratio_data_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_mz_ratio_spectrum_param rdf:resource="{$base}/mz_ratio_spectrum_param/{$entry_id_encoded},{$id_encoded},{$mz_ratio_data_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_190_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:mz_ratio_spectrum_param>
      </BMRBo:has_mz_ratio_spectrum_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:natural_source_dbCategory/BMRBx:natural_source_db">
      <xsl:variable name="database_code_truncated"><xsl:choose><xsl:when test="string-length(@database_code)&lt;64"><xsl:value-of select="@database_code"/></xsl:when><xsl:when test="contains(@database_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_natural_src_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_natural_src_id)&lt;64"><xsl:value-of select="@entity_natural_src_id"/></xsl:when><xsl:when test="contains(@entity_natural_src_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_natural_src_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_natural_src_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_natural_src_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_natural_src_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_natural_src_list_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_natural_src_list_id)&lt;64"><xsl:value-of select="@entity_natural_src_list_id"/></xsl:when><xsl:when test="contains(@entity_natural_src_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_natural_src_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_natural_src_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_natural_src_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_natural_src_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_code_truncated"><xsl:choose><xsl:when test="string-length(@entry_code)&lt;64"><xsl:value-of select="@entry_code"/></xsl:when><xsl:when test="contains(@entry_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_natural_source_db>
      <BMRBo:natural_source_db rdf:about="{$base}/natural_source_db/{$database_code_encoded},{$entity_natural_src_id_encoded},{$entity_natural_src_list_id_encoded},{$entry_code_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:natural_source_db>
      </BMRBo:has_natural_source_db>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:natural_source_dbCategory/BMRBx:natural_source_db">
      <xsl:variable name="database_code_truncated"><xsl:choose><xsl:when test="string-length(@database_code)&lt;64"><xsl:value-of select="@database_code"/></xsl:when><xsl:when test="contains(@database_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_natural_src_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_natural_src_id)&lt;64"><xsl:value-of select="@entity_natural_src_id"/></xsl:when><xsl:when test="contains(@entity_natural_src_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_natural_src_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_natural_src_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_natural_src_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_natural_src_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_natural_src_list_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_natural_src_list_id)&lt;64"><xsl:value-of select="@entity_natural_src_list_id"/></xsl:when><xsl:when test="contains(@entity_natural_src_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_natural_src_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_natural_src_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_natural_src_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_natural_src_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_code_truncated"><xsl:choose><xsl:when test="string-length(@entry_code)&lt;64"><xsl:value-of select="@entry_code"/></xsl:when><xsl:when test="contains(@entry_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_natural_source_db>
      <BMRBo:natural_source_db rdf:about="{$base}/natural_source_db/{$database_code_encoded},{$entity_natural_src_id_encoded},{$entity_natural_src_list_id_encoded},{$entry_code_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:natural_source_db>
      </BMRBo:has_natural_source_db>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_experiment_citationCategory/BMRBx:nmr_experiment_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spec_expt_id)&lt;64"><xsl:value-of select="@nmr_spec_expt_id"/></xsl:when><xsl:when test="contains(@nmr_spec_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spec_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spec_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spec_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_experiment_citation>
      <BMRBo:nmr_experiment_citation rdf:about="{$base}/nmr_experiment_citation/{$citation_id_encoded},{$entry_id_encoded},{$nmr_spec_expt_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_experiment_citation>
      </BMRBo:has_nmr_experiment_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_experiment_citationCategory/BMRBx:nmr_experiment_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spec_expt_id)&lt;64"><xsl:value-of select="@nmr_spec_expt_id"/></xsl:when><xsl:when test="contains(@nmr_spec_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spec_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spec_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spec_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_experiment_citation>
      <BMRBo:nmr_experiment_citation rdf:about="{$base}/nmr_experiment_citation/{$citation_id_encoded},{$entry_id_encoded},{$nmr_spec_expt_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_experiment_citation>
      </BMRBo:has_nmr_experiment_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_experiment_fileCategory/BMRBx:nmr_experiment_file">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spec_expt_id)&lt;64"><xsl:value-of select="@nmr_spec_expt_id"/></xsl:when><xsl:when test="contains(@nmr_spec_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spec_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spec_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spec_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_experiment_file>
      <BMRBo:nmr_experiment_file rdf:about="{$base}/nmr_experiment_file/{$entry_id_encoded},{$name_encoded},{$nmr_spec_expt_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_experiment_file>
      </BMRBo:has_nmr_experiment_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_experiment_fileCategory/BMRBx:nmr_experiment_file">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spec_expt_id)&lt;64"><xsl:value-of select="@nmr_spec_expt_id"/></xsl:when><xsl:when test="contains(@nmr_spec_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spec_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spec_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spec_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_experiment_file>
      <BMRBo:nmr_experiment_file rdf:about="{$base}/nmr_experiment_file/{$entry_id_encoded},{$name_encoded},{$nmr_spec_expt_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_experiment_file>
      </BMRBo:has_nmr_experiment_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_expt_systematic_nameCategory/BMRBx:nmr_expt_systematic_name">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="naming_system_truncated"><xsl:choose><xsl:when test="string-length(@naming_system)&lt;64"><xsl:value-of select="@naming_system"/></xsl:when><xsl:when test="contains(@naming_system,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@naming_system,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@naming_system,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="naming_system_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($naming_system_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spec_expt_id)&lt;64"><xsl:value-of select="@nmr_spec_expt_id"/></xsl:when><xsl:when test="contains(@nmr_spec_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spec_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spec_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spec_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_expt_systematic_name>
      <BMRBo:nmr_expt_systematic_name rdf:about="{$base}/nmr_expt_systematic_name/{$entry_id_encoded},{$name_encoded},{$naming_system_encoded},{$nmr_spec_expt_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_expt_systematic_name>
      </BMRBo:has_nmr_expt_systematic_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_expt_systematic_nameCategory/BMRBx:nmr_expt_systematic_name">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="naming_system_truncated"><xsl:choose><xsl:when test="string-length(@naming_system)&lt;64"><xsl:value-of select="@naming_system"/></xsl:when><xsl:when test="contains(@naming_system,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@naming_system,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@naming_system,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="naming_system_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($naming_system_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spec_expt_id)&lt;64"><xsl:value-of select="@nmr_spec_expt_id"/></xsl:when><xsl:when test="contains(@nmr_spec_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spec_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spec_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spec_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_expt_systematic_name>
      <BMRBo:nmr_expt_systematic_name rdf:about="{$base}/nmr_expt_systematic_name/{$entry_id_encoded},{$name_encoded},{$naming_system_encoded},{$nmr_spec_expt_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_expt_systematic_name>
      </BMRBo:has_nmr_expt_systematic_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_probeCategory/BMRBx:nmr_probe">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spectrometer_probe_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spectrometer_probe_id)&lt;64"><xsl:value-of select="@nmr_spectrometer_probe_id"/></xsl:when><xsl:when test="contains(@nmr_spectrometer_probe_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spectrometer_probe_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spectrometer_probe_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spectrometer_probe_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spectrometer_probe_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_probe>
      <BMRBo:nmr_probe rdf:about="{$base}/nmr_probe/{$entry_id_encoded},{$nmr_spectrometer_probe_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_probe>
      </BMRBo:has_nmr_probe>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_probeCategory/BMRBx:nmr_probe">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spectrometer_probe_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spectrometer_probe_id)&lt;64"><xsl:value-of select="@nmr_spectrometer_probe_id"/></xsl:when><xsl:when test="contains(@nmr_spectrometer_probe_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spectrometer_probe_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spectrometer_probe_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spectrometer_probe_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spectrometer_probe_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_probe>
      <BMRBo:nmr_probe rdf:about="{$base}/nmr_probe/{$entry_id_encoded},{$nmr_spectrometer_probe_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_probe>
      </BMRBo:has_nmr_probe>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spec_exptCategory/BMRBx:nmr_spec_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spec_expt>
      <BMRBo:nmr_spec_expt rdf:about="{$base}/nmr_spec_expt/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_nmr_spec_expt rdf:resource="{$base}/nmr_spec_expt/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_191_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spec_expt>
      </BMRBo:has_nmr_spec_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spec_exptCategory/BMRBx:nmr_spec_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spec_expt>
      <BMRBo:nmr_spec_expt rdf:about="{$base}/nmr_spec_expt/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_nmr_spec_expt rdf:resource="{$base}/nmr_spec_expt/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_191_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spec_expt>
      </BMRBo:has_nmr_spec_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectral_proc_softwareCategory/BMRBx:nmr_spectral_proc_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spectral_processing_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spectral_processing_id)&lt;64"><xsl:value-of select="@nmr_spectral_processing_id"/></xsl:when><xsl:when test="contains(@nmr_spectral_processing_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spectral_processing_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spectral_processing_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spectral_processing_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spectral_processing_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectral_proc_software>
      <BMRBo:nmr_spectral_proc_software rdf:about="{$base}/nmr_spectral_proc_software/{$entry_id_encoded},{$nmr_spectral_processing_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectral_proc_software>
      </BMRBo:has_nmr_spectral_proc_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectral_proc_softwareCategory/BMRBx:nmr_spectral_proc_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spectral_processing_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spectral_processing_id)&lt;64"><xsl:value-of select="@nmr_spectral_processing_id"/></xsl:when><xsl:when test="contains(@nmr_spectral_processing_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spectral_processing_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spectral_processing_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spectral_processing_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spectral_processing_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectral_proc_software>
      <BMRBo:nmr_spectral_proc_software rdf:about="{$base}/nmr_spectral_proc_software/{$entry_id_encoded},{$nmr_spectral_processing_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectral_proc_software>
      </BMRBo:has_nmr_spectral_proc_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectral_processingCategory/BMRBx:nmr_spectral_processing">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectral_processing>
      <BMRBo:nmr_spectral_processing rdf:about="{$base}/nmr_spectral_processing/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_nmr_spectral_processing rdf:resource="{$base}/nmr_spectral_processing/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_192_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectral_processing>
      </BMRBo:has_nmr_spectral_processing>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectral_processingCategory/BMRBx:nmr_spectral_processing">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectral_processing>
      <BMRBo:nmr_spectral_processing rdf:about="{$base}/nmr_spectral_processing/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_nmr_spectral_processing rdf:resource="{$base}/nmr_spectral_processing/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_192_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectral_processing>
      </BMRBo:has_nmr_spectral_processing>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectrometerCategory/BMRBx:nmr_spectrometer">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectrometer>
      <BMRBo:nmr_spectrometer rdf:about="{$base}/nmr_spectrometer/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_nmr_spectrometer rdf:resource="{$base}/nmr_spectrometer/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_193_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectrometer>
      </BMRBo:has_nmr_spectrometer>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectrometerCategory/BMRBx:nmr_spectrometer">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectrometer>
      <BMRBo:nmr_spectrometer rdf:about="{$base}/nmr_spectrometer/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_nmr_spectrometer rdf:resource="{$base}/nmr_spectrometer/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_193_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectrometer>
      </BMRBo:has_nmr_spectrometer>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectrometer_citationCategory/BMRBx:nmr_spectrometer_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spectrometer_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spectrometer_id)&lt;64"><xsl:value-of select="@nmr_spectrometer_id"/></xsl:when><xsl:when test="contains(@nmr_spectrometer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spectrometer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spectrometer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spectrometer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spectrometer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectrometer_citation>
      <BMRBo:nmr_spectrometer_citation rdf:about="{$base}/nmr_spectrometer_citation/{$citation_id_encoded},{$entry_id_encoded},{$nmr_spectrometer_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectrometer_citation>
      </BMRBo:has_nmr_spectrometer_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectrometer_citationCategory/BMRBx:nmr_spectrometer_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spectrometer_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spectrometer_id)&lt;64"><xsl:value-of select="@nmr_spectrometer_id"/></xsl:when><xsl:when test="contains(@nmr_spectrometer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spectrometer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spectrometer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spectrometer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spectrometer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectrometer_citation>
      <BMRBo:nmr_spectrometer_citation rdf:about="{$base}/nmr_spectrometer_citation/{$citation_id_encoded},{$entry_id_encoded},{$nmr_spectrometer_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectrometer_citation>
      </BMRBo:has_nmr_spectrometer_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectrometer_listCategory/BMRBx:nmr_spectrometer_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectrometer_list>
      <BMRBo:nmr_spectrometer_list rdf:about="{$base}/nmr_spectrometer_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_nmr_spectrometer_list rdf:resource="{$base}/nmr_spectrometer_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_194_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectrometer_list>
      </BMRBo:has_nmr_spectrometer_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectrometer_listCategory/BMRBx:nmr_spectrometer_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectrometer_list>
      <BMRBo:nmr_spectrometer_list rdf:about="{$base}/nmr_spectrometer_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_nmr_spectrometer_list rdf:resource="{$base}/nmr_spectrometer_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_194_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectrometer_list>
      </BMRBo:has_nmr_spectrometer_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectrometer_probeCategory/BMRBx:nmr_spectrometer_probe">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectrometer_probe>
      <BMRBo:nmr_spectrometer_probe rdf:about="{$base}/nmr_spectrometer_probe/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_nmr_spectrometer_probe rdf:resource="{$base}/nmr_spectrometer_probe/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_195_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectrometer_probe>
      </BMRBo:has_nmr_spectrometer_probe>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectrometer_probeCategory/BMRBx:nmr_spectrometer_probe">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectrometer_probe>
      <BMRBo:nmr_spectrometer_probe rdf:about="{$base}/nmr_spectrometer_probe/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_nmr_spectrometer_probe rdf:resource="{$base}/nmr_spectrometer_probe/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_195_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectrometer_probe>
      </BMRBo:has_nmr_spectrometer_probe>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectrometer_probe_citationCategory/BMRBx:nmr_spectrometer_probe_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spectrometer_probe_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spectrometer_probe_id)&lt;64"><xsl:value-of select="@nmr_spectrometer_probe_id"/></xsl:when><xsl:when test="contains(@nmr_spectrometer_probe_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spectrometer_probe_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spectrometer_probe_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spectrometer_probe_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spectrometer_probe_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectrometer_probe_citation>
      <BMRBo:nmr_spectrometer_probe_citation rdf:about="{$base}/nmr_spectrometer_probe_citation/{$citation_id_encoded},{$entry_id_encoded},{$nmr_spectrometer_probe_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectrometer_probe_citation>
      </BMRBo:has_nmr_spectrometer_probe_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectrometer_probe_citationCategory/BMRBx:nmr_spectrometer_probe_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spectrometer_probe_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spectrometer_probe_id)&lt;64"><xsl:value-of select="@nmr_spectrometer_probe_id"/></xsl:when><xsl:when test="contains(@nmr_spectrometer_probe_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spectrometer_probe_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spectrometer_probe_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spectrometer_probe_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spectrometer_probe_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectrometer_probe_citation>
      <BMRBo:nmr_spectrometer_probe_citation rdf:about="{$base}/nmr_spectrometer_probe_citation/{$citation_id_encoded},{$entry_id_encoded},{$nmr_spectrometer_probe_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectrometer_probe_citation>
      </BMRBo:has_nmr_spectrometer_probe_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectrometer_viewCategory/BMRBx:nmr_spectrometer_view">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spectrometer_list_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spectrometer_list_id)&lt;64"><xsl:value-of select="@nmr_spectrometer_list_id"/></xsl:when><xsl:when test="contains(@nmr_spectrometer_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spectrometer_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spectrometer_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spectrometer_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spectrometer_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectrometer_view>
      <BMRBo:nmr_spectrometer_view rdf:about="{$base}/nmr_spectrometer_view/{$entry_id_encoded},{$id_encoded},{$name_encoded},{$nmr_spectrometer_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectrometer_view>
      </BMRBo:has_nmr_spectrometer_view>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:nmr_spectrometer_viewCategory/BMRBx:nmr_spectrometer_view">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spectrometer_list_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spectrometer_list_id)&lt;64"><xsl:value-of select="@nmr_spectrometer_list_id"/></xsl:when><xsl:when test="contains(@nmr_spectrometer_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spectrometer_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spectrometer_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spectrometer_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spectrometer_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_nmr_spectrometer_view>
      <BMRBo:nmr_spectrometer_view rdf:about="{$base}/nmr_spectrometer_view/{$entry_id_encoded},{$id_encoded},{$name_encoded},{$nmr_spectrometer_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:nmr_spectrometer_view>
      </BMRBo:has_nmr_spectrometer_view>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:observed_conformerCategory/BMRBx:observed_conformer">
      <xsl:variable name="atom_site_model_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_site_model_id)&lt;64"><xsl:value-of select="@atom_site_model_id"/></xsl:when><xsl:when test="contains(@atom_site_model_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_site_model_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_site_model_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_site_model_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_site_model_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="structure_interaction_id_truncated"><xsl:choose><xsl:when test="string-length(@structure_interaction_id)&lt;64"><xsl:value-of select="@structure_interaction_id"/></xsl:when><xsl:when test="contains(@structure_interaction_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@structure_interaction_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@structure_interaction_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="structure_interaction_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($structure_interaction_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="structure_interaction_list_id_truncated"><xsl:choose><xsl:when test="string-length(@structure_interaction_list_id)&lt;64"><xsl:value-of select="@structure_interaction_list_id"/></xsl:when><xsl:when test="contains(@structure_interaction_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@structure_interaction_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@structure_interaction_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="structure_interaction_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($structure_interaction_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_observed_conformer>
      <BMRBo:observed_conformer rdf:about="{$base}/observed_conformer/{$atom_site_model_id_encoded},{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$structure_interaction_id_encoded},{$structure_interaction_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_observed_conformer rdf:resource="{$base}/observed_conformer/{$atom_site_model_id_encoded},{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$structure_interaction_id_encoded},{$structure_interaction_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_196_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:observed_conformer>
      </BMRBo:has_observed_conformer>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:observed_conformerCategory/BMRBx:observed_conformer">
      <xsl:variable name="atom_site_model_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_site_model_id)&lt;64"><xsl:value-of select="@atom_site_model_id"/></xsl:when><xsl:when test="contains(@atom_site_model_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_site_model_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_site_model_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_site_model_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_site_model_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="structure_interaction_id_truncated"><xsl:choose><xsl:when test="string-length(@structure_interaction_id)&lt;64"><xsl:value-of select="@structure_interaction_id"/></xsl:when><xsl:when test="contains(@structure_interaction_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@structure_interaction_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@structure_interaction_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="structure_interaction_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($structure_interaction_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="structure_interaction_list_id_truncated"><xsl:choose><xsl:when test="string-length(@structure_interaction_list_id)&lt;64"><xsl:value-of select="@structure_interaction_list_id"/></xsl:when><xsl:when test="contains(@structure_interaction_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@structure_interaction_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@structure_interaction_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="structure_interaction_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($structure_interaction_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_observed_conformer>
      <BMRBo:observed_conformer rdf:about="{$base}/observed_conformer/{$atom_site_model_id_encoded},{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$structure_interaction_id_encoded},{$structure_interaction_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_observed_conformer rdf:resource="{$base}/observed_conformer/{$atom_site_model_id_encoded},{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$structure_interaction_id_encoded},{$structure_interaction_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_196_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:observed_conformer>
      </BMRBo:has_observed_conformer>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:order_paramCategory/BMRBx:order_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="order_parameter_list_id_truncated"><xsl:choose><xsl:when test="string-length(@order_parameter_list_id)&lt;64"><xsl:value-of select="@order_parameter_list_id"/></xsl:when><xsl:when test="contains(@order_parameter_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@order_parameter_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@order_parameter_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="order_parameter_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($order_parameter_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_order_param>
      <BMRBo:order_param rdf:about="{$base}/order_param/{$entry_id_encoded},{$id_encoded},{$order_parameter_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_order_param rdf:resource="{$base}/order_param/{$entry_id_encoded},{$id_encoded},{$order_parameter_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_197_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:order_param>
      </BMRBo:has_order_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:order_paramCategory/BMRBx:order_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="order_parameter_list_id_truncated"><xsl:choose><xsl:when test="string-length(@order_parameter_list_id)&lt;64"><xsl:value-of select="@order_parameter_list_id"/></xsl:when><xsl:when test="contains(@order_parameter_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@order_parameter_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@order_parameter_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="order_parameter_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($order_parameter_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_order_param>
      <BMRBo:order_param rdf:about="{$base}/order_param/{$entry_id_encoded},{$id_encoded},{$order_parameter_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_order_param rdf:resource="{$base}/order_param/{$entry_id_encoded},{$id_encoded},{$order_parameter_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_197_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:order_param>
      </BMRBo:has_order_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:order_parameter_experimentCategory/BMRBx:order_parameter_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="order_parameter_list_id_truncated"><xsl:choose><xsl:when test="string-length(@order_parameter_list_id)&lt;64"><xsl:value-of select="@order_parameter_list_id"/></xsl:when><xsl:when test="contains(@order_parameter_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@order_parameter_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@order_parameter_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="order_parameter_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($order_parameter_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_order_parameter_experiment>
      <BMRBo:order_parameter_experiment rdf:about="{$base}/order_parameter_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$order_parameter_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_order_parameter_experiment rdf:resource="{$base}/order_parameter_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$order_parameter_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_198_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:order_parameter_experiment>
      </BMRBo:has_order_parameter_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:order_parameter_experimentCategory/BMRBx:order_parameter_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="order_parameter_list_id_truncated"><xsl:choose><xsl:when test="string-length(@order_parameter_list_id)&lt;64"><xsl:value-of select="@order_parameter_list_id"/></xsl:when><xsl:when test="contains(@order_parameter_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@order_parameter_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@order_parameter_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="order_parameter_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($order_parameter_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_order_parameter_experiment>
      <BMRBo:order_parameter_experiment rdf:about="{$base}/order_parameter_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$order_parameter_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_order_parameter_experiment rdf:resource="{$base}/order_parameter_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$order_parameter_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_198_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:order_parameter_experiment>
      </BMRBo:has_order_parameter_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:order_parameter_listCategory/BMRBx:order_parameter_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_order_parameter_list>
      <BMRBo:order_parameter_list rdf:about="{$base}/order_parameter_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_order_parameter_list rdf:resource="{$base}/order_parameter_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_199_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:order_parameter_list>
      </BMRBo:has_order_parameter_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:order_parameter_listCategory/BMRBx:order_parameter_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_order_parameter_list>
      <BMRBo:order_parameter_list rdf:about="{$base}/order_parameter_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_order_parameter_list rdf:resource="{$base}/order_parameter_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_199_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:order_parameter_list>
      </BMRBo:has_order_parameter_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:order_parameter_softwareCategory/BMRBx:order_parameter_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="order_parameter_list_id_truncated"><xsl:choose><xsl:when test="string-length(@order_parameter_list_id)&lt;64"><xsl:value-of select="@order_parameter_list_id"/></xsl:when><xsl:when test="contains(@order_parameter_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@order_parameter_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@order_parameter_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="order_parameter_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($order_parameter_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_order_parameter_software>
      <BMRBo:order_parameter_software rdf:about="{$base}/order_parameter_software/{$entry_id_encoded},{$order_parameter_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_order_parameter_software rdf:resource="{$base}/order_parameter_software/{$entry_id_encoded},{$order_parameter_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_200_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:order_parameter_software>
      </BMRBo:has_order_parameter_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:order_parameter_softwareCategory/BMRBx:order_parameter_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="order_parameter_list_id_truncated"><xsl:choose><xsl:when test="string-length(@order_parameter_list_id)&lt;64"><xsl:value-of select="@order_parameter_list_id"/></xsl:when><xsl:when test="contains(@order_parameter_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@order_parameter_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@order_parameter_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="order_parameter_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($order_parameter_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_order_parameter_software>
      <BMRBo:order_parameter_software rdf:about="{$base}/order_parameter_software/{$entry_id_encoded},{$order_parameter_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_order_parameter_software rdf:resource="{$base}/order_parameter_software/{$entry_id_encoded},{$order_parameter_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_200_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:order_parameter_software>
      </BMRBo:has_order_parameter_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:org_constr_file_commentCategory/BMRBx:org_constr_file_comment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_org_constr_file_comment>
      <BMRBo:org_constr_file_comment rdf:about="{$base}/org_constr_file_comment/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_org_constr_file_comment rdf:resource="{$base}/org_constr_file_comment/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_201_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:org_constr_file_comment>
      </BMRBo:has_org_constr_file_comment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:org_constr_file_commentCategory/BMRBx:org_constr_file_comment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_org_constr_file_comment>
      <BMRBo:org_constr_file_comment rdf:about="{$base}/org_constr_file_comment/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_org_constr_file_comment rdf:resource="{$base}/org_constr_file_comment/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_201_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:org_constr_file_comment>
      </BMRBo:has_org_constr_file_comment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_constraint_exptCategory/BMRBx:other_constraint_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="other_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@other_constraint_list_id)&lt;64"><xsl:value-of select="@other_constraint_list_id"/></xsl:when><xsl:when test="contains(@other_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@other_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@other_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="other_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($other_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_constraint_expt>
      <BMRBo:other_constraint_expt rdf:about="{$base}/other_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$other_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_constraint_expt rdf:resource="{$base}/other_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$other_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_202_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_constraint_expt>
      </BMRBo:has_other_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_constraint_exptCategory/BMRBx:other_constraint_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="other_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@other_constraint_list_id)&lt;64"><xsl:value-of select="@other_constraint_list_id"/></xsl:when><xsl:when test="contains(@other_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@other_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@other_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="other_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($other_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_constraint_expt>
      <BMRBo:other_constraint_expt rdf:about="{$base}/other_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$other_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_constraint_expt rdf:resource="{$base}/other_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$other_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_202_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_constraint_expt>
      </BMRBo:has_other_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_constraint_listCategory/BMRBx:other_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_constraint_list>
      <BMRBo:other_constraint_list rdf:about="{$base}/other_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_constraint_list rdf:resource="{$base}/other_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_203_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_constraint_list>
      </BMRBo:has_other_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_constraint_listCategory/BMRBx:other_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_constraint_list>
      <BMRBo:other_constraint_list rdf:about="{$base}/other_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_constraint_list rdf:resource="{$base}/other_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_203_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_constraint_list>
      </BMRBo:has_other_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_constraint_softwareCategory/BMRBx:other_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="other_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@other_constraint_list_id)&lt;64"><xsl:value-of select="@other_constraint_list_id"/></xsl:when><xsl:when test="contains(@other_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@other_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@other_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="other_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($other_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_constraint_software>
      <BMRBo:other_constraint_software rdf:about="{$base}/other_constraint_software/{$entry_id_encoded},{$other_constraint_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_constraint_software rdf:resource="{$base}/other_constraint_software/{$entry_id_encoded},{$other_constraint_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_204_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_constraint_software>
      </BMRBo:has_other_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_constraint_softwareCategory/BMRBx:other_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="other_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@other_constraint_list_id)&lt;64"><xsl:value-of select="@other_constraint_list_id"/></xsl:when><xsl:when test="contains(@other_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@other_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@other_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="other_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($other_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_constraint_software>
      <BMRBo:other_constraint_software rdf:about="{$base}/other_constraint_software/{$entry_id_encoded},{$other_constraint_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_constraint_software rdf:resource="{$base}/other_constraint_software/{$entry_id_encoded},{$other_constraint_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_204_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_constraint_software>
      </BMRBo:has_other_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_dataCategory/BMRBx:other_data">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="other_data_type_list_id_truncated"><xsl:choose><xsl:when test="string-length(@other_data_type_list_id)&lt;64"><xsl:value-of select="@other_data_type_list_id"/></xsl:when><xsl:when test="contains(@other_data_type_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@other_data_type_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@other_data_type_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="other_data_type_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($other_data_type_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_data>
      <BMRBo:other_data rdf:about="{$base}/other_data/{$entry_id_encoded},{$id_encoded},{$other_data_type_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_data rdf:resource="{$base}/other_data/{$entry_id_encoded},{$id_encoded},{$other_data_type_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_205_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_data>
      </BMRBo:has_other_data>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_dataCategory/BMRBx:other_data">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="other_data_type_list_id_truncated"><xsl:choose><xsl:when test="string-length(@other_data_type_list_id)&lt;64"><xsl:value-of select="@other_data_type_list_id"/></xsl:when><xsl:when test="contains(@other_data_type_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@other_data_type_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@other_data_type_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="other_data_type_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($other_data_type_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_data>
      <BMRBo:other_data rdf:about="{$base}/other_data/{$entry_id_encoded},{$id_encoded},{$other_data_type_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_data rdf:resource="{$base}/other_data/{$entry_id_encoded},{$id_encoded},{$other_data_type_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_205_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_data>
      </BMRBo:has_other_data>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_data_experimentCategory/BMRBx:other_data_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="other_data_type_list_id_truncated"><xsl:choose><xsl:when test="string-length(@other_data_type_list_id)&lt;64"><xsl:value-of select="@other_data_type_list_id"/></xsl:when><xsl:when test="contains(@other_data_type_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@other_data_type_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@other_data_type_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="other_data_type_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($other_data_type_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_data_experiment>
      <BMRBo:other_data_experiment rdf:about="{$base}/other_data_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$other_data_type_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_data_experiment rdf:resource="{$base}/other_data_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$other_data_type_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_206_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_data_experiment>
      </BMRBo:has_other_data_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_data_experimentCategory/BMRBx:other_data_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="other_data_type_list_id_truncated"><xsl:choose><xsl:when test="string-length(@other_data_type_list_id)&lt;64"><xsl:value-of select="@other_data_type_list_id"/></xsl:when><xsl:when test="contains(@other_data_type_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@other_data_type_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@other_data_type_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="other_data_type_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($other_data_type_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_data_experiment>
      <BMRBo:other_data_experiment rdf:about="{$base}/other_data_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$other_data_type_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_data_experiment rdf:resource="{$base}/other_data_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$other_data_type_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_206_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_data_experiment>
      </BMRBo:has_other_data_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_data_softwareCategory/BMRBx:other_data_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="other_data_type_list_id_truncated"><xsl:choose><xsl:when test="string-length(@other_data_type_list_id)&lt;64"><xsl:value-of select="@other_data_type_list_id"/></xsl:when><xsl:when test="contains(@other_data_type_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@other_data_type_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@other_data_type_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="other_data_type_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($other_data_type_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_data_software>
      <BMRBo:other_data_software rdf:about="{$base}/other_data_software/{$entry_id_encoded},{$other_data_type_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_data_software rdf:resource="{$base}/other_data_software/{$entry_id_encoded},{$other_data_type_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_207_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_data_software>
      </BMRBo:has_other_data_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_data_softwareCategory/BMRBx:other_data_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="other_data_type_list_id_truncated"><xsl:choose><xsl:when test="string-length(@other_data_type_list_id)&lt;64"><xsl:value-of select="@other_data_type_list_id"/></xsl:when><xsl:when test="contains(@other_data_type_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@other_data_type_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@other_data_type_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="other_data_type_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($other_data_type_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_data_software>
      <BMRBo:other_data_software rdf:about="{$base}/other_data_software/{$entry_id_encoded},{$other_data_type_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_data_software rdf:resource="{$base}/other_data_software/{$entry_id_encoded},{$other_data_type_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_207_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_data_software>
      </BMRBo:has_other_data_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_data_type_listCategory/BMRBx:other_data_type_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_data_type_list>
      <BMRBo:other_data_type_list rdf:about="{$base}/other_data_type_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_data_type_list rdf:resource="{$base}/other_data_type_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_208_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_data_type_list>
      </BMRBo:has_other_data_type_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_data_type_listCategory/BMRBx:other_data_type_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_data_type_list>
      <BMRBo:other_data_type_list rdf:about="{$base}/other_data_type_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_data_type_list rdf:resource="{$base}/other_data_type_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_208_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_data_type_list>
      </BMRBo:has_other_data_type_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_struct_featureCategory/BMRBx:other_struct_feature">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="other_struct_feature_list_id_truncated"><xsl:choose><xsl:when test="string-length(@other_struct_feature_list_id)&lt;64"><xsl:value-of select="@other_struct_feature_list_id"/></xsl:when><xsl:when test="contains(@other_struct_feature_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@other_struct_feature_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@other_struct_feature_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="other_struct_feature_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($other_struct_feature_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_struct_feature>
      <BMRBo:other_struct_feature rdf:about="{$base}/other_struct_feature/{$entry_id_encoded},{$id_encoded},{$other_struct_feature_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_struct_feature rdf:resource="{$base}/other_struct_feature/{$entry_id_encoded},{$id_encoded},{$other_struct_feature_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_209_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_struct_feature>
      </BMRBo:has_other_struct_feature>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_struct_featureCategory/BMRBx:other_struct_feature">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="other_struct_feature_list_id_truncated"><xsl:choose><xsl:when test="string-length(@other_struct_feature_list_id)&lt;64"><xsl:value-of select="@other_struct_feature_list_id"/></xsl:when><xsl:when test="contains(@other_struct_feature_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@other_struct_feature_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@other_struct_feature_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="other_struct_feature_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($other_struct_feature_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_struct_feature>
      <BMRBo:other_struct_feature rdf:about="{$base}/other_struct_feature/{$entry_id_encoded},{$id_encoded},{$other_struct_feature_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_struct_feature rdf:resource="{$base}/other_struct_feature/{$entry_id_encoded},{$id_encoded},{$other_struct_feature_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_209_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_struct_feature>
      </BMRBo:has_other_struct_feature>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_struct_feature_listCategory/BMRBx:other_struct_feature_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_struct_feature_list>
      <BMRBo:other_struct_feature_list rdf:about="{$base}/other_struct_feature_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_struct_feature_list rdf:resource="{$base}/other_struct_feature_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_210_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_struct_feature_list>
      </BMRBo:has_other_struct_feature_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:other_struct_feature_listCategory/BMRBx:other_struct_feature_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_other_struct_feature_list>
      <BMRBo:other_struct_feature_list rdf:about="{$base}/other_struct_feature_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_other_struct_feature_list rdf:resource="{$base}/other_struct_feature_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_210_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:other_struct_feature_list>
      </BMRBo:has_other_struct_feature_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:pb_charCategory/BMRBx:pb_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="pb_list_id_truncated"><xsl:choose><xsl:when test="string-length(@pb_list_id)&lt;64"><xsl:value-of select="@pb_list_id"/></xsl:when><xsl:when test="contains(@pb_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@pb_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@pb_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="pb_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($pb_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_pb_char>
      <BMRBo:pb_char rdf:about="{$base}/pb_char/{$entry_id_encoded},{$id_encoded},{$pb_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_pb_char rdf:resource="{$base}/pb_char/{$entry_id_encoded},{$id_encoded},{$pb_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_211_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:pb_char>
      </BMRBo:has_pb_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:pb_charCategory/BMRBx:pb_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="pb_list_id_truncated"><xsl:choose><xsl:when test="string-length(@pb_list_id)&lt;64"><xsl:value-of select="@pb_list_id"/></xsl:when><xsl:when test="contains(@pb_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@pb_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@pb_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="pb_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($pb_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_pb_char>
      <BMRBo:pb_char rdf:about="{$base}/pb_char/{$entry_id_encoded},{$id_encoded},{$pb_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_pb_char rdf:resource="{$base}/pb_char/{$entry_id_encoded},{$id_encoded},{$pb_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_211_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:pb_char>
      </BMRBo:has_pb_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:pb_listCategory/BMRBx:pb_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_pb_list>
      <BMRBo:pb_list rdf:about="{$base}/pb_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_pb_list rdf:resource="{$base}/pb_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_212_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:pb_list>
      </BMRBo:has_pb_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:pb_listCategory/BMRBx:pb_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_pb_list>
      <BMRBo:pb_list rdf:about="{$base}/pb_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_pb_list rdf:resource="{$base}/pb_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_212_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:pb_list>
      </BMRBo:has_pb_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:pdbx_chem_comp_featureCategory/BMRBx:pdbx_chem_comp_feature">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="source_truncated"><xsl:choose><xsl:when test="string-length(@source)&lt;64"><xsl:value-of select="@source"/></xsl:when><xsl:when test="contains(@source,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@source,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@source,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="source_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($source_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="value_truncated"><xsl:choose><xsl:when test="string-length(@value)&lt;64"><xsl:value-of select="@value"/></xsl:when><xsl:when test="contains(@value,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@value,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@value,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="value_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($value_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_pdbx_chem_comp_feature>
      <BMRBo:pdbx_chem_comp_feature rdf:about="{$base}/pdbx_chem_comp_feature/{$comp_id_encoded},{$entry_id_encoded},{$source_encoded},{$type_encoded},{$value_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:pdbx_chem_comp_feature>
      </BMRBo:has_pdbx_chem_comp_feature>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:pdbx_chem_comp_featureCategory/BMRBx:pdbx_chem_comp_feature">
      <xsl:variable name="comp_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_id)&lt;64"><xsl:value-of select="@comp_id"/></xsl:when><xsl:when test="contains(@comp_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="source_truncated"><xsl:choose><xsl:when test="string-length(@source)&lt;64"><xsl:value-of select="@source"/></xsl:when><xsl:when test="contains(@source,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@source,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@source,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="source_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($source_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="value_truncated"><xsl:choose><xsl:when test="string-length(@value)&lt;64"><xsl:value-of select="@value"/></xsl:when><xsl:when test="contains(@value,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@value,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@value,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="value_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($value_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_pdbx_chem_comp_feature>
      <BMRBo:pdbx_chem_comp_feature rdf:about="{$base}/pdbx_chem_comp_feature/{$comp_id_encoded},{$entry_id_encoded},{$source_encoded},{$type_encoded},{$value_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:pdbx_chem_comp_feature>
      </BMRBo:has_pdbx_chem_comp_feature>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:pdbx_nonpoly_schemeCategory/BMRBx:pdbx_nonpoly_scheme">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_pdbx_nonpoly_scheme>
      <BMRBo:pdbx_nonpoly_scheme rdf:about="{$base}/pdbx_nonpoly_scheme/{$assembly_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:pdbx_nonpoly_scheme>
      </BMRBo:has_pdbx_nonpoly_scheme>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:pdbx_nonpoly_schemeCategory/BMRBx:pdbx_nonpoly_scheme">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_pdbx_nonpoly_scheme>
      <BMRBo:pdbx_nonpoly_scheme rdf:about="{$base}/pdbx_nonpoly_scheme/{$assembly_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:pdbx_nonpoly_scheme>
      </BMRBo:has_pdbx_nonpoly_scheme>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:pdbx_poly_seq_schemeCategory/BMRBx:pdbx_poly_seq_scheme">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_pdbx_poly_seq_scheme>
      <BMRBo:pdbx_poly_seq_scheme rdf:about="{$base}/pdbx_poly_seq_scheme/{$assembly_id_encoded},{$comp_index_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:pdbx_poly_seq_scheme>
      </BMRBo:has_pdbx_poly_seq_scheme>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:pdbx_poly_seq_schemeCategory/BMRBx:pdbx_poly_seq_scheme">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_pdbx_poly_seq_scheme>
      <BMRBo:pdbx_poly_seq_scheme rdf:about="{$base}/pdbx_poly_seq_scheme/{$assembly_id_encoded},{$comp_index_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:pdbx_poly_seq_scheme>
      </BMRBo:has_pdbx_poly_seq_scheme>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:peakCategory/BMRBx:peak">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_peak>
      <BMRBo:peak rdf:about="{$base}/peak/{$entry_id_encoded},{$id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:peak>
      </BMRBo:has_peak>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:peakCategory/BMRBx:peak">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_peak>
      <BMRBo:peak rdf:about="{$base}/peak/{$entry_id_encoded},{$id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:peak>
      </BMRBo:has_peak>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:peak_charCategory/BMRBx:peak_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="peak_id_truncated"><xsl:choose><xsl:when test="string-length(@peak_id)&lt;64"><xsl:value-of select="@peak_id"/></xsl:when><xsl:when test="contains(@peak_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@peak_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@peak_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="peak_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($peak_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_dim_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_dim_id)&lt;64"><xsl:value-of select="@spectral_dim_id"/></xsl:when><xsl:when test="contains(@spectral_dim_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_dim_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_dim_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_dim_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_dim_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_peak_char>
      <BMRBo:peak_char rdf:about="{$base}/peak_char/{$entry_id_encoded},{$peak_id_encoded},{$spectral_dim_id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:peak_char>
      </BMRBo:has_peak_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:peak_charCategory/BMRBx:peak_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="peak_id_truncated"><xsl:choose><xsl:when test="string-length(@peak_id)&lt;64"><xsl:value-of select="@peak_id"/></xsl:when><xsl:when test="contains(@peak_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@peak_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@peak_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="peak_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($peak_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_dim_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_dim_id)&lt;64"><xsl:value-of select="@spectral_dim_id"/></xsl:when><xsl:when test="contains(@spectral_dim_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_dim_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_dim_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_dim_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_dim_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_peak_char>
      <BMRBo:peak_char rdf:about="{$base}/peak_char/{$entry_id_encoded},{$peak_id_encoded},{$spectral_dim_id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:peak_char>
      </BMRBo:has_peak_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:peak_constraint_linkCategory/BMRBx:peak_constraint_link">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="peak_constraint_link_list_id_truncated"><xsl:choose><xsl:when test="string-length(@peak_constraint_link_list_id)&lt;64"><xsl:value-of select="@peak_constraint_link_list_id"/></xsl:when><xsl:when test="contains(@peak_constraint_link_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@peak_constraint_link_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@peak_constraint_link_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="peak_constraint_link_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($peak_constraint_link_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_peak_constraint_link>
      <BMRBo:peak_constraint_link rdf:about="{$base}/peak_constraint_link/{$entry_id_encoded},{$id_encoded},{$peak_constraint_link_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_peak_constraint_link rdf:resource="{$base}/peak_constraint_link/{$entry_id_encoded},{$id_encoded},{$peak_constraint_link_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_213_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:peak_constraint_link>
      </BMRBo:has_peak_constraint_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:peak_constraint_linkCategory/BMRBx:peak_constraint_link">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="peak_constraint_link_list_id_truncated"><xsl:choose><xsl:when test="string-length(@peak_constraint_link_list_id)&lt;64"><xsl:value-of select="@peak_constraint_link_list_id"/></xsl:when><xsl:when test="contains(@peak_constraint_link_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@peak_constraint_link_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@peak_constraint_link_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="peak_constraint_link_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($peak_constraint_link_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_peak_constraint_link>
      <BMRBo:peak_constraint_link rdf:about="{$base}/peak_constraint_link/{$entry_id_encoded},{$id_encoded},{$peak_constraint_link_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_peak_constraint_link rdf:resource="{$base}/peak_constraint_link/{$entry_id_encoded},{$id_encoded},{$peak_constraint_link_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_213_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:peak_constraint_link>
      </BMRBo:has_peak_constraint_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:peak_constraint_link_listCategory/BMRBx:peak_constraint_link_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_peak_constraint_link_list>
      <BMRBo:peak_constraint_link_list rdf:about="{$base}/peak_constraint_link_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_peak_constraint_link_list rdf:resource="{$base}/peak_constraint_link_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_214_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:peak_constraint_link_list>
      </BMRBo:has_peak_constraint_link_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:peak_constraint_link_listCategory/BMRBx:peak_constraint_link_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_peak_constraint_link_list>
      <BMRBo:peak_constraint_link_list rdf:about="{$base}/peak_constraint_link_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_peak_constraint_link_list rdf:resource="{$base}/peak_constraint_link_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_214_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:peak_constraint_link_list>
      </BMRBo:has_peak_constraint_link_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:peak_general_charCategory/BMRBx:peak_general_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="intensity_val_truncated"><xsl:choose><xsl:when test="string-length(@intensity_val)&lt;64"><xsl:value-of select="@intensity_val"/></xsl:when><xsl:when test="contains(@intensity_val,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@intensity_val,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@intensity_val,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="intensity_val_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($intensity_val_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="peak_id_truncated"><xsl:choose><xsl:when test="string-length(@peak_id)&lt;64"><xsl:value-of select="@peak_id"/></xsl:when><xsl:when test="contains(@peak_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@peak_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@peak_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="peak_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($peak_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_peak_general_char>
      <BMRBo:peak_general_char rdf:about="{$base}/peak_general_char/{$entry_id_encoded},{$intensity_val_encoded},{$peak_id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:peak_general_char>
      </BMRBo:has_peak_general_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:peak_general_charCategory/BMRBx:peak_general_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="intensity_val_truncated"><xsl:choose><xsl:when test="string-length(@intensity_val)&lt;64"><xsl:value-of select="@intensity_val"/></xsl:when><xsl:when test="contains(@intensity_val,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@intensity_val,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@intensity_val,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="intensity_val_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($intensity_val_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="peak_id_truncated"><xsl:choose><xsl:when test="string-length(@peak_id)&lt;64"><xsl:value-of select="@peak_id"/></xsl:when><xsl:when test="contains(@peak_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@peak_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@peak_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="peak_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($peak_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_peak_general_char>
      <BMRBo:peak_general_char rdf:about="{$base}/peak_general_char/{$entry_id_encoded},{$intensity_val_encoded},{$peak_id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:peak_general_char>
      </BMRBo:has_peak_general_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:peak_row_formatCategory/BMRBx:peak_row_format">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_peak_row_format>
      <BMRBo:peak_row_format rdf:about="{$base}/peak_row_format/{$entry_id_encoded},{$id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:peak_row_format>
      </BMRBo:has_peak_row_format>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:peak_row_formatCategory/BMRBx:peak_row_format">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_peak_row_format>
      <BMRBo:peak_row_format rdf:about="{$base}/peak_row_format/{$entry_id_encoded},{$id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:peak_row_format>
      </BMRBo:has_peak_row_format>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ph_paramCategory/BMRBx:ph_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ph_param_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ph_param_list_id)&lt;64"><xsl:value-of select="@ph_param_list_id"/></xsl:when><xsl:when test="contains(@ph_param_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ph_param_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ph_param_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ph_param_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ph_param_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ph_param>
      <BMRBo:ph_param rdf:about="{$base}/ph_param/{$entry_id_encoded},{$id_encoded},{$ph_param_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ph_param rdf:resource="{$base}/ph_param/{$entry_id_encoded},{$id_encoded},{$ph_param_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_215_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ph_param>
      </BMRBo:has_ph_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ph_paramCategory/BMRBx:ph_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ph_param_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ph_param_list_id)&lt;64"><xsl:value-of select="@ph_param_list_id"/></xsl:when><xsl:when test="contains(@ph_param_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ph_param_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ph_param_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ph_param_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ph_param_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ph_param>
      <BMRBo:ph_param rdf:about="{$base}/ph_param/{$entry_id_encoded},{$id_encoded},{$ph_param_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ph_param rdf:resource="{$base}/ph_param/{$entry_id_encoded},{$id_encoded},{$ph_param_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_215_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ph_param>
      </BMRBo:has_ph_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ph_param_listCategory/BMRBx:ph_param_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ph_param_list>
      <BMRBo:ph_param_list rdf:about="{$base}/ph_param_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ph_param_list rdf:resource="{$base}/ph_param_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_216_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ph_param_list>
      </BMRBo:has_ph_param_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ph_param_listCategory/BMRBx:ph_param_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ph_param_list>
      <BMRBo:ph_param_list rdf:about="{$base}/ph_param_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ph_param_list rdf:resource="{$base}/ph_param_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_216_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ph_param_list>
      </BMRBo:has_ph_param_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ph_titr_resultCategory/BMRBx:ph_titr_result">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ph_titration_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ph_titration_list_id)&lt;64"><xsl:value-of select="@ph_titration_list_id"/></xsl:when><xsl:when test="contains(@ph_titration_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ph_titration_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ph_titration_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ph_titration_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ph_titration_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ph_titr_result>
      <BMRBo:ph_titr_result rdf:about="{$base}/ph_titr_result/{$entry_id_encoded},{$id_encoded},{$ph_titration_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ph_titr_result rdf:resource="{$base}/ph_titr_result/{$entry_id_encoded},{$id_encoded},{$ph_titration_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_217_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ph_titr_result>
      </BMRBo:has_ph_titr_result>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ph_titr_resultCategory/BMRBx:ph_titr_result">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ph_titration_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ph_titration_list_id)&lt;64"><xsl:value-of select="@ph_titration_list_id"/></xsl:when><xsl:when test="contains(@ph_titration_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ph_titration_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ph_titration_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ph_titration_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ph_titration_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ph_titr_result>
      <BMRBo:ph_titr_result rdf:about="{$base}/ph_titr_result/{$entry_id_encoded},{$id_encoded},{$ph_titration_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ph_titr_result rdf:resource="{$base}/ph_titr_result/{$entry_id_encoded},{$id_encoded},{$ph_titration_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_217_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ph_titr_result>
      </BMRBo:has_ph_titr_result>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ph_titration_experimentCategory/BMRBx:ph_titration_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ph_titration_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ph_titration_list_id)&lt;64"><xsl:value-of select="@ph_titration_list_id"/></xsl:when><xsl:when test="contains(@ph_titration_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ph_titration_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ph_titration_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ph_titration_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ph_titration_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ph_titration_experiment>
      <BMRBo:ph_titration_experiment rdf:about="{$base}/ph_titration_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$ph_titration_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ph_titration_experiment rdf:resource="{$base}/ph_titration_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$ph_titration_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_218_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ph_titration_experiment>
      </BMRBo:has_ph_titration_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ph_titration_experimentCategory/BMRBx:ph_titration_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ph_titration_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ph_titration_list_id)&lt;64"><xsl:value-of select="@ph_titration_list_id"/></xsl:when><xsl:when test="contains(@ph_titration_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ph_titration_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ph_titration_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ph_titration_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ph_titration_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ph_titration_experiment>
      <BMRBo:ph_titration_experiment rdf:about="{$base}/ph_titration_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$ph_titration_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ph_titration_experiment rdf:resource="{$base}/ph_titration_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$ph_titration_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_218_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ph_titration_experiment>
      </BMRBo:has_ph_titration_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ph_titration_listCategory/BMRBx:ph_titration_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ph_titration_list>
      <BMRBo:ph_titration_list rdf:about="{$base}/ph_titration_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ph_titration_list rdf:resource="{$base}/ph_titration_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_219_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ph_titration_list>
      </BMRBo:has_ph_titration_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ph_titration_listCategory/BMRBx:ph_titration_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ph_titration_list>
      <BMRBo:ph_titration_list rdf:about="{$base}/ph_titration_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ph_titration_list rdf:resource="{$base}/ph_titration_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_219_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ph_titration_list>
      </BMRBo:has_ph_titration_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ph_titration_softwareCategory/BMRBx:ph_titration_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ph_titration_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ph_titration_list_id)&lt;64"><xsl:value-of select="@ph_titration_list_id"/></xsl:when><xsl:when test="contains(@ph_titration_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ph_titration_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ph_titration_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ph_titration_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ph_titration_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ph_titration_software>
      <BMRBo:ph_titration_software rdf:about="{$base}/ph_titration_software/{$entry_id_encoded},{$ph_titration_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ph_titration_software rdf:resource="{$base}/ph_titration_software/{$entry_id_encoded},{$ph_titration_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_220_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ph_titration_software>
      </BMRBo:has_ph_titration_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ph_titration_softwareCategory/BMRBx:ph_titration_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="ph_titration_list_id_truncated"><xsl:choose><xsl:when test="string-length(@ph_titration_list_id)&lt;64"><xsl:value-of select="@ph_titration_list_id"/></xsl:when><xsl:when test="contains(@ph_titration_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@ph_titration_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@ph_titration_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="ph_titration_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($ph_titration_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ph_titration_software>
      <BMRBo:ph_titration_software rdf:about="{$base}/ph_titration_software/{$entry_id_encoded},{$ph_titration_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ph_titration_software rdf:resource="{$base}/ph_titration_software/{$entry_id_encoded},{$ph_titration_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_220_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ph_titration_software>
      </BMRBo:has_ph_titration_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdcCategory/BMRBx:rdc">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_list_id)&lt;64"><xsl:value-of select="@rdc_list_id"/></xsl:when><xsl:when test="contains(@rdc_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc>
      <BMRBo:rdc rdf:about="{$base}/rdc/{$entry_id_encoded},{$id_encoded},{$rdc_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc rdf:resource="{$base}/rdc/{$entry_id_encoded},{$id_encoded},{$rdc_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_221_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc>
      </BMRBo:has_rdc>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdcCategory/BMRBx:rdc">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_list_id)&lt;64"><xsl:value-of select="@rdc_list_id"/></xsl:when><xsl:when test="contains(@rdc_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc>
      <BMRBo:rdc rdf:about="{$base}/rdc/{$entry_id_encoded},{$id_encoded},{$rdc_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc rdf:resource="{$base}/rdc/{$entry_id_encoded},{$id_encoded},{$rdc_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_221_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc>
      </BMRBo:has_rdc>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraintCategory/BMRBx:rdc_constraint">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="index_id_truncated"><xsl:choose><xsl:when test="string-length(@index_id)&lt;64"><xsl:value-of select="@index_id"/></xsl:when><xsl:when test="contains(@index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint>
      <BMRBo:rdc_constraint rdf:about="{$base}/rdc_constraint/{$entry_id_encoded},{$index_id_encoded},{$rdc_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint rdf:resource="{$base}/rdc_constraint/{$entry_id_encoded},{$index_id_encoded},{$rdc_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_222_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint>
      </BMRBo:has_rdc_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraintCategory/BMRBx:rdc_constraint">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="index_id_truncated"><xsl:choose><xsl:when test="string-length(@index_id)&lt;64"><xsl:value-of select="@index_id"/></xsl:when><xsl:when test="contains(@index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint>
      <BMRBo:rdc_constraint rdf:about="{$base}/rdc_constraint/{$entry_id_encoded},{$index_id_encoded},{$rdc_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint rdf:resource="{$base}/rdc_constraint/{$entry_id_encoded},{$index_id_encoded},{$rdc_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_222_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint>
      </BMRBo:has_rdc_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_comment_orgCategory/BMRBx:rdc_constraint_comment_org">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_comment_org>
      <BMRBo:rdc_constraint_comment_org rdf:about="{$base}/rdc_constraint_comment_org/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_comment_org rdf:resource="{$base}/rdc_constraint_comment_org/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_223_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_comment_org>
      </BMRBo:has_rdc_constraint_comment_org>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_comment_orgCategory/BMRBx:rdc_constraint_comment_org">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_comment_org>
      <BMRBo:rdc_constraint_comment_org rdf:about="{$base}/rdc_constraint_comment_org/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_comment_org rdf:resource="{$base}/rdc_constraint_comment_org/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_223_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_comment_org>
      </BMRBo:has_rdc_constraint_comment_org>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_conv_errCategory/BMRBx:rdc_constraint_conv_err">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_conv_err>
      <BMRBo:rdc_constraint_conv_err rdf:about="{$base}/rdc_constraint_conv_err/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_conv_err rdf:resource="{$base}/rdc_constraint_conv_err/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_224_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_conv_err>
      </BMRBo:has_rdc_constraint_conv_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_conv_errCategory/BMRBx:rdc_constraint_conv_err">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_conv_err>
      <BMRBo:rdc_constraint_conv_err rdf:about="{$base}/rdc_constraint_conv_err/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_conv_err rdf:resource="{$base}/rdc_constraint_conv_err/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_224_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_conv_err>
      </BMRBo:has_rdc_constraint_conv_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_exptCategory/BMRBx:rdc_constraint_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_expt>
      <BMRBo:rdc_constraint_expt rdf:about="{$base}/rdc_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$rdc_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_expt rdf:resource="{$base}/rdc_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$rdc_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_225_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_expt>
      </BMRBo:has_rdc_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_exptCategory/BMRBx:rdc_constraint_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_expt>
      <BMRBo:rdc_constraint_expt rdf:about="{$base}/rdc_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$rdc_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_expt rdf:resource="{$base}/rdc_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$rdc_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_225_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_expt>
      </BMRBo:has_rdc_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_listCategory/BMRBx:rdc_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_list>
      <BMRBo:rdc_constraint_list rdf:about="{$base}/rdc_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_list rdf:resource="{$base}/rdc_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_226_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_list>
      </BMRBo:has_rdc_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_listCategory/BMRBx:rdc_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_list>
      <BMRBo:rdc_constraint_list rdf:about="{$base}/rdc_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_list rdf:resource="{$base}/rdc_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_226_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_list>
      </BMRBo:has_rdc_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_parse_errCategory/BMRBx:rdc_constraint_parse_err">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_parse_err>
      <BMRBo:rdc_constraint_parse_err rdf:about="{$base}/rdc_constraint_parse_err/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_parse_err rdf:resource="{$base}/rdc_constraint_parse_err/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_227_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_parse_err>
      </BMRBo:has_rdc_constraint_parse_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_parse_errCategory/BMRBx:rdc_constraint_parse_err">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_parse_err>
      <BMRBo:rdc_constraint_parse_err rdf:about="{$base}/rdc_constraint_parse_err/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_parse_err rdf:resource="{$base}/rdc_constraint_parse_err/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_227_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_parse_err>
      </BMRBo:has_rdc_constraint_parse_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_parse_fileCategory/BMRBx:rdc_constraint_parse_file">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_parse_file>
      <BMRBo:rdc_constraint_parse_file rdf:about="{$base}/rdc_constraint_parse_file/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_parse_file rdf:resource="{$base}/rdc_constraint_parse_file/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_228_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_parse_file>
      </BMRBo:has_rdc_constraint_parse_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_parse_fileCategory/BMRBx:rdc_constraint_parse_file">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_parse_file>
      <BMRBo:rdc_constraint_parse_file rdf:about="{$base}/rdc_constraint_parse_file/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_parse_file rdf:resource="{$base}/rdc_constraint_parse_file/{$entry_id_encoded},{$id_encoded},{$rdc_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_228_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_parse_file>
      </BMRBo:has_rdc_constraint_parse_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_softwareCategory/BMRBx:rdc_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_software>
      <BMRBo:rdc_constraint_software rdf:about="{$base}/rdc_constraint_software/{$entry_id_encoded},{$rdc_constraint_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_software rdf:resource="{$base}/rdc_constraint_software/{$entry_id_encoded},{$rdc_constraint_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_229_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_software>
      </BMRBo:has_rdc_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_constraint_softwareCategory/BMRBx:rdc_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_constraint_list_id)&lt;64"><xsl:value-of select="@rdc_constraint_list_id"/></xsl:when><xsl:when test="contains(@rdc_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_constraint_software>
      <BMRBo:rdc_constraint_software rdf:about="{$base}/rdc_constraint_software/{$entry_id_encoded},{$rdc_constraint_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_constraint_software rdf:resource="{$base}/rdc_constraint_software/{$entry_id_encoded},{$rdc_constraint_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_229_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_constraint_software>
      </BMRBo:has_rdc_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_experimentCategory/BMRBx:rdc_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_list_id)&lt;64"><xsl:value-of select="@rdc_list_id"/></xsl:when><xsl:when test="contains(@rdc_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_experiment>
      <BMRBo:rdc_experiment rdf:about="{$base}/rdc_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$rdc_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_experiment rdf:resource="{$base}/rdc_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$rdc_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_230_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_experiment>
      </BMRBo:has_rdc_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_experimentCategory/BMRBx:rdc_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_list_id)&lt;64"><xsl:value-of select="@rdc_list_id"/></xsl:when><xsl:when test="contains(@rdc_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_experiment>
      <BMRBo:rdc_experiment rdf:about="{$base}/rdc_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$rdc_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_experiment rdf:resource="{$base}/rdc_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$rdc_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_230_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_experiment>
      </BMRBo:has_rdc_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_listCategory/BMRBx:rdc_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_list>
      <BMRBo:rdc_list rdf:about="{$base}/rdc_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_list rdf:resource="{$base}/rdc_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_231_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_list>
      </BMRBo:has_rdc_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_listCategory/BMRBx:rdc_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_list>
      <BMRBo:rdc_list rdf:about="{$base}/rdc_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_list rdf:resource="{$base}/rdc_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_231_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_list>
      </BMRBo:has_rdc_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_softwareCategory/BMRBx:rdc_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_list_id)&lt;64"><xsl:value-of select="@rdc_list_id"/></xsl:when><xsl:when test="contains(@rdc_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_software>
      <BMRBo:rdc_software rdf:about="{$base}/rdc_software/{$entry_id_encoded},{$rdc_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_software rdf:resource="{$base}/rdc_software/{$entry_id_encoded},{$rdc_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_232_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_software>
      </BMRBo:has_rdc_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rdc_softwareCategory/BMRBx:rdc_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="rdc_list_id_truncated"><xsl:choose><xsl:when test="string-length(@rdc_list_id)&lt;64"><xsl:value-of select="@rdc_list_id"/></xsl:when><xsl:when test="contains(@rdc_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@rdc_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@rdc_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="rdc_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($rdc_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rdc_software>
      <BMRBo:rdc_software rdf:about="{$base}/rdc_software/{$entry_id_encoded},{$rdc_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rdc_software rdf:resource="{$base}/rdc_software/{$entry_id_encoded},{$rdc_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_232_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rdc_software>
      </BMRBo:has_rdc_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:recoupling_pulse_sequenceCategory/BMRBx:recoupling_pulse_sequence">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spec_expt_id)&lt;64"><xsl:value-of select="@nmr_spec_expt_id"/></xsl:when><xsl:when test="contains(@nmr_spec_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spec_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spec_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spec_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="time_period_truncated"><xsl:choose><xsl:when test="string-length(@time_period)&lt;64"><xsl:value-of select="@time_period"/></xsl:when><xsl:when test="contains(@time_period,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@time_period,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@time_period,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="time_period_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($time_period_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_recoupling_pulse_sequence>
      <BMRBo:recoupling_pulse_sequence rdf:about="{$base}/recoupling_pulse_sequence/{$entry_id_encoded},{$name_encoded},{$nmr_spec_expt_id_encoded},{$time_period_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:recoupling_pulse_sequence>
      </BMRBo:has_recoupling_pulse_sequence>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:recoupling_pulse_sequenceCategory/BMRBx:recoupling_pulse_sequence">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spec_expt_id)&lt;64"><xsl:value-of select="@nmr_spec_expt_id"/></xsl:when><xsl:when test="contains(@nmr_spec_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spec_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spec_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spec_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="time_period_truncated"><xsl:choose><xsl:when test="string-length(@time_period)&lt;64"><xsl:value-of select="@time_period"/></xsl:when><xsl:when test="contains(@time_period,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@time_period,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@time_period,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="time_period_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($time_period_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_recoupling_pulse_sequence>
      <BMRBo:recoupling_pulse_sequence rdf:about="{$base}/recoupling_pulse_sequence/{$entry_id_encoded},{$name_encoded},{$nmr_spec_expt_id_encoded},{$time_period_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:recoupling_pulse_sequence>
      </BMRBo:has_recoupling_pulse_sequence>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:related_entriesCategory/BMRBx:related_entries">
      <xsl:variable name="database_accession_code_truncated"><xsl:choose><xsl:when test="string-length(@database_accession_code)&lt;64"><xsl:value-of select="@database_accession_code"/></xsl:when><xsl:when test="contains(@database_accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="database_name_truncated"><xsl:choose><xsl:when test="string-length(@database_name)&lt;64"><xsl:value-of select="@database_name"/></xsl:when><xsl:when test="contains(@database_name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_related_entries>
      <BMRBo:related_entries rdf:about="{$base}/related_entries/{$database_accession_code_encoded},{$database_name_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_related_entries rdf:resource="{$base}/related_entries/{$database_accession_code_encoded},{$database_name_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_233_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:related_entries>
      </BMRBo:has_related_entries>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:related_entriesCategory/BMRBx:related_entries">
      <xsl:variable name="database_accession_code_truncated"><xsl:choose><xsl:when test="string-length(@database_accession_code)&lt;64"><xsl:value-of select="@database_accession_code"/></xsl:when><xsl:when test="contains(@database_accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="database_name_truncated"><xsl:choose><xsl:when test="string-length(@database_name)&lt;64"><xsl:value-of select="@database_name"/></xsl:when><xsl:when test="contains(@database_name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_related_entries>
      <BMRBo:related_entries rdf:about="{$base}/related_entries/{$database_accession_code_encoded},{$database_name_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_related_entries rdf:resource="{$base}/related_entries/{$database_accession_code_encoded},{$database_name_encoded},{$entry_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_233_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:related_entries>
      </BMRBo:has_related_entries>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:releaseCategory/BMRBx:release">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="release_number_truncated"><xsl:choose><xsl:when test="string-length(@release_number)&lt;64"><xsl:value-of select="@release_number"/></xsl:when><xsl:when test="contains(@release_number,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@release_number,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@release_number,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="release_number_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($release_number_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_release>
      <BMRBo:release rdf:about="{$base}/release/{$entry_id_encoded},{$release_number_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_release rdf:resource="{$base}/release/{$entry_id_encoded},{$release_number_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_234_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:release>
      </BMRBo:has_release>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:releaseCategory/BMRBx:release">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="release_number_truncated"><xsl:choose><xsl:when test="string-length(@release_number)&lt;64"><xsl:value-of select="@release_number"/></xsl:when><xsl:when test="contains(@release_number,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@release_number,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@release_number,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="release_number_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($release_number_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_release>
      <BMRBo:release rdf:about="{$base}/release/{$entry_id_encoded},{$release_number_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_release rdf:resource="{$base}/release/{$entry_id_encoded},{$release_number_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_234_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:release>
      </BMRBo:has_release>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rep_confCategory/BMRBx:rep_conf">
      <xsl:variable name="atom_coordinate_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_coordinate_id)&lt;64"><xsl:value-of select="@atom_coordinate_id"/></xsl:when><xsl:when test="contains(@atom_coordinate_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_coordinate_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_coordinate_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_coordinate_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_coordinate_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="representative_conformer_id_truncated"><xsl:choose><xsl:when test="string-length(@representative_conformer_id)&lt;64"><xsl:value-of select="@representative_conformer_id"/></xsl:when><xsl:when test="contains(@representative_conformer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@representative_conformer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@representative_conformer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="representative_conformer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($representative_conformer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rep_conf>
      <BMRBo:rep_conf rdf:about="{$base}/rep_conf/{$atom_coordinate_id_encoded},{$entry_id_encoded},{$representative_conformer_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rep_conf rdf:resource="{$base}/rep_conf/{$atom_coordinate_id_encoded},{$entry_id_encoded},{$representative_conformer_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_235_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rep_conf>
      </BMRBo:has_rep_conf>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rep_confCategory/BMRBx:rep_conf">
      <xsl:variable name="atom_coordinate_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_coordinate_id)&lt;64"><xsl:value-of select="@atom_coordinate_id"/></xsl:when><xsl:when test="contains(@atom_coordinate_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_coordinate_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_coordinate_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_coordinate_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_coordinate_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="representative_conformer_id_truncated"><xsl:choose><xsl:when test="string-length(@representative_conformer_id)&lt;64"><xsl:value-of select="@representative_conformer_id"/></xsl:when><xsl:when test="contains(@representative_conformer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@representative_conformer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@representative_conformer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="representative_conformer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($representative_conformer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rep_conf>
      <BMRBo:rep_conf rdf:about="{$base}/rep_conf/{$atom_coordinate_id_encoded},{$entry_id_encoded},{$representative_conformer_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rep_conf rdf:resource="{$base}/rep_conf/{$atom_coordinate_id_encoded},{$entry_id_encoded},{$representative_conformer_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_235_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rep_conf>
      </BMRBo:has_rep_conf>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rep_conf_refinementCategory/BMRBx:rep_conf_refinement">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="refine_method_truncated"><xsl:choose><xsl:when test="string-length(@refine_method)&lt;64"><xsl:value-of select="@refine_method"/></xsl:when><xsl:when test="contains(@refine_method,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@refine_method,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@refine_method,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="refine_method_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($refine_method_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="representative_conformer_id_truncated"><xsl:choose><xsl:when test="string-length(@representative_conformer_id)&lt;64"><xsl:value-of select="@representative_conformer_id"/></xsl:when><xsl:when test="contains(@representative_conformer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@representative_conformer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@representative_conformer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="representative_conformer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($representative_conformer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rep_conf_refinement>
      <BMRBo:rep_conf_refinement rdf:about="{$base}/rep_conf_refinement/{$entry_id_encoded},{$refine_method_encoded},{$representative_conformer_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rep_conf_refinement rdf:resource="{$base}/rep_conf_refinement/{$entry_id_encoded},{$refine_method_encoded},{$representative_conformer_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_236_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rep_conf_refinement>
      </BMRBo:has_rep_conf_refinement>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rep_conf_refinementCategory/BMRBx:rep_conf_refinement">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="refine_method_truncated"><xsl:choose><xsl:when test="string-length(@refine_method)&lt;64"><xsl:value-of select="@refine_method"/></xsl:when><xsl:when test="contains(@refine_method,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@refine_method,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@refine_method,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="refine_method_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($refine_method_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="representative_conformer_id_truncated"><xsl:choose><xsl:when test="string-length(@representative_conformer_id)&lt;64"><xsl:value-of select="@representative_conformer_id"/></xsl:when><xsl:when test="contains(@representative_conformer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@representative_conformer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@representative_conformer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="representative_conformer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($representative_conformer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rep_conf_refinement>
      <BMRBo:rep_conf_refinement rdf:about="{$base}/rep_conf_refinement/{$entry_id_encoded},{$refine_method_encoded},{$representative_conformer_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rep_conf_refinement rdf:resource="{$base}/rep_conf_refinement/{$entry_id_encoded},{$refine_method_encoded},{$representative_conformer_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_236_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rep_conf_refinement>
      </BMRBo:has_rep_conf_refinement>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rep_conf_softwareCategory/BMRBx:rep_conf_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="representative_conformer_id_truncated"><xsl:choose><xsl:when test="string-length(@representative_conformer_id)&lt;64"><xsl:value-of select="@representative_conformer_id"/></xsl:when><xsl:when test="contains(@representative_conformer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@representative_conformer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@representative_conformer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="representative_conformer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($representative_conformer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rep_conf_software>
      <BMRBo:rep_conf_software rdf:about="{$base}/rep_conf_software/{$entry_id_encoded},{$representative_conformer_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rep_conf_software rdf:resource="{$base}/rep_conf_software/{$entry_id_encoded},{$representative_conformer_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_237_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rep_conf_software>
      </BMRBo:has_rep_conf_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rep_conf_softwareCategory/BMRBx:rep_conf_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="representative_conformer_id_truncated"><xsl:choose><xsl:when test="string-length(@representative_conformer_id)&lt;64"><xsl:value-of select="@representative_conformer_id"/></xsl:when><xsl:when test="contains(@representative_conformer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@representative_conformer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@representative_conformer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="representative_conformer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($representative_conformer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rep_conf_software>
      <BMRBo:rep_conf_software rdf:about="{$base}/rep_conf_software/{$entry_id_encoded},{$representative_conformer_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rep_conf_software rdf:resource="{$base}/rep_conf_software/{$entry_id_encoded},{$representative_conformer_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_237_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rep_conf_software>
      </BMRBo:has_rep_conf_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rep_coordinate_detailsCategory/BMRBx:rep_coordinate_details">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="footnote_id_truncated"><xsl:choose><xsl:when test="string-length(@footnote_id)&lt;64"><xsl:value-of select="@footnote_id"/></xsl:when><xsl:when test="contains(@footnote_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@footnote_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@footnote_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="footnote_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($footnote_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="representative_conformer_id_truncated"><xsl:choose><xsl:when test="string-length(@representative_conformer_id)&lt;64"><xsl:value-of select="@representative_conformer_id"/></xsl:when><xsl:when test="contains(@representative_conformer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@representative_conformer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@representative_conformer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="representative_conformer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($representative_conformer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rep_coordinate_details>
      <BMRBo:rep_coordinate_details rdf:about="{$base}/rep_coordinate_details/{$entry_id_encoded},{$footnote_id_encoded},{$representative_conformer_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rep_coordinate_details rdf:resource="{$base}/rep_coordinate_details/{$entry_id_encoded},{$footnote_id_encoded},{$representative_conformer_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_238_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rep_coordinate_details>
      </BMRBo:has_rep_coordinate_details>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:rep_coordinate_detailsCategory/BMRBx:rep_coordinate_details">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="footnote_id_truncated"><xsl:choose><xsl:when test="string-length(@footnote_id)&lt;64"><xsl:value-of select="@footnote_id"/></xsl:when><xsl:when test="contains(@footnote_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@footnote_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@footnote_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="footnote_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($footnote_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="representative_conformer_id_truncated"><xsl:choose><xsl:when test="string-length(@representative_conformer_id)&lt;64"><xsl:value-of select="@representative_conformer_id"/></xsl:when><xsl:when test="contains(@representative_conformer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@representative_conformer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@representative_conformer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="representative_conformer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($representative_conformer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_rep_coordinate_details>
      <BMRBo:rep_coordinate_details rdf:about="{$base}/rep_coordinate_details/{$entry_id_encoded},{$footnote_id_encoded},{$representative_conformer_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_rep_coordinate_details rdf:resource="{$base}/rep_coordinate_details/{$entry_id_encoded},{$footnote_id_encoded},{$representative_conformer_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_238_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:rep_coordinate_details>
      </BMRBo:has_rep_coordinate_details>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:representative_conformerCategory/BMRBx:representative_conformer">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_representative_conformer>
      <BMRBo:representative_conformer rdf:about="{$base}/representative_conformer/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_representative_conformer rdf:resource="{$base}/representative_conformer/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_239_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:representative_conformer>
      </BMRBo:has_representative_conformer>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:representative_conformerCategory/BMRBx:representative_conformer">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_representative_conformer>
      <BMRBo:representative_conformer rdf:about="{$base}/representative_conformer/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_representative_conformer rdf:resource="{$base}/representative_conformer/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_239_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:representative_conformer>
      </BMRBo:has_representative_conformer>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:resonanceCategory/BMRBx:resonance">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_truncated"><xsl:choose><xsl:when test="string-length(@resonance_linker_list_id)&lt;64"><xsl:value-of select="@resonance_linker_list_id"/></xsl:when><xsl:when test="contains(@resonance_linker_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_linker_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_linker_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_linker_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_resonance>
      <BMRBo:resonance rdf:about="{$base}/resonance/{$entry_id_encoded},{$id_encoded},{$resonance_linker_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:resonance>
      </BMRBo:has_resonance>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:resonanceCategory/BMRBx:resonance">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_truncated"><xsl:choose><xsl:when test="string-length(@resonance_linker_list_id)&lt;64"><xsl:value-of select="@resonance_linker_list_id"/></xsl:when><xsl:when test="contains(@resonance_linker_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_linker_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_linker_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_linker_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_resonance>
      <BMRBo:resonance rdf:about="{$base}/resonance/{$entry_id_encoded},{$id_encoded},{$resonance_linker_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:resonance>
      </BMRBo:has_resonance>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:resonance_assignmentCategory/BMRBx:resonance_assignment">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_truncated"><xsl:choose><xsl:when test="string-length(@resonance_linker_list_id)&lt;64"><xsl:value-of select="@resonance_linker_list_id"/></xsl:when><xsl:when test="contains(@resonance_linker_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_linker_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_linker_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_linker_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_set_id_truncated"><xsl:choose><xsl:when test="string-length(@resonance_set_id)&lt;64"><xsl:value-of select="@resonance_set_id"/></xsl:when><xsl:when test="contains(@resonance_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_resonance_assignment>
      <BMRBo:resonance_assignment rdf:about="{$base}/resonance_assignment/{$atom_id_encoded},{$comp_index_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded},{$resonance_linker_list_id_encoded},{$resonance_set_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_resonance_assignment rdf:resource="{$base}/resonance_assignment/{$atom_id_encoded},{$comp_index_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded},{$resonance_linker_list_id_encoded},{$resonance_set_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_240_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:resonance_assignment>
      </BMRBo:has_resonance_assignment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:resonance_assignmentCategory/BMRBx:resonance_assignment">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_truncated"><xsl:choose><xsl:when test="string-length(@resonance_linker_list_id)&lt;64"><xsl:value-of select="@resonance_linker_list_id"/></xsl:when><xsl:when test="contains(@resonance_linker_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_linker_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_linker_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_linker_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_set_id_truncated"><xsl:choose><xsl:when test="string-length(@resonance_set_id)&lt;64"><xsl:value-of select="@resonance_set_id"/></xsl:when><xsl:when test="contains(@resonance_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_resonance_assignment>
      <BMRBo:resonance_assignment rdf:about="{$base}/resonance_assignment/{$atom_id_encoded},{$comp_index_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded},{$resonance_linker_list_id_encoded},{$resonance_set_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_resonance_assignment rdf:resource="{$base}/resonance_assignment/{$atom_id_encoded},{$comp_index_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded},{$resonance_linker_list_id_encoded},{$resonance_set_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_240_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:resonance_assignment>
      </BMRBo:has_resonance_assignment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:resonance_covalent_linkCategory/BMRBx:resonance_covalent_link">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_id_1_truncated"><xsl:choose><xsl:when test="string-length(@resonance_id_1)&lt;64"><xsl:value-of select="@resonance_id_1"/></xsl:when><xsl:when test="contains(@resonance_id_1,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_id_1,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_id_1,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_id_1_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_id_1_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_id_2_truncated"><xsl:choose><xsl:when test="string-length(@resonance_id_2)&lt;64"><xsl:value-of select="@resonance_id_2"/></xsl:when><xsl:when test="contains(@resonance_id_2,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_id_2,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_id_2,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_id_2_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_id_2_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_truncated"><xsl:choose><xsl:when test="string-length(@resonance_linker_list_id)&lt;64"><xsl:value-of select="@resonance_linker_list_id"/></xsl:when><xsl:when test="contains(@resonance_linker_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_linker_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_linker_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_linker_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_resonance_covalent_link>
      <BMRBo:resonance_covalent_link rdf:about="{$base}/resonance_covalent_link/{$entry_id_encoded},{$resonance_id_1_encoded},{$resonance_id_2_encoded},{$resonance_linker_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:resonance_covalent_link>
      </BMRBo:has_resonance_covalent_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:resonance_covalent_linkCategory/BMRBx:resonance_covalent_link">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_id_1_truncated"><xsl:choose><xsl:when test="string-length(@resonance_id_1)&lt;64"><xsl:value-of select="@resonance_id_1"/></xsl:when><xsl:when test="contains(@resonance_id_1,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_id_1,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_id_1,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_id_1_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_id_1_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_id_2_truncated"><xsl:choose><xsl:when test="string-length(@resonance_id_2)&lt;64"><xsl:value-of select="@resonance_id_2"/></xsl:when><xsl:when test="contains(@resonance_id_2,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_id_2,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_id_2,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_id_2_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_id_2_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_truncated"><xsl:choose><xsl:when test="string-length(@resonance_linker_list_id)&lt;64"><xsl:value-of select="@resonance_linker_list_id"/></xsl:when><xsl:when test="contains(@resonance_linker_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_linker_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_linker_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_linker_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_resonance_covalent_link>
      <BMRBo:resonance_covalent_link rdf:about="{$base}/resonance_covalent_link/{$entry_id_encoded},{$resonance_id_1_encoded},{$resonance_id_2_encoded},{$resonance_linker_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:resonance_covalent_link>
      </BMRBo:has_resonance_covalent_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:resonance_linker_listCategory/BMRBx:resonance_linker_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_resonance_linker_list>
      <BMRBo:resonance_linker_list rdf:about="{$base}/resonance_linker_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_resonance_linker_list rdf:resource="{$base}/resonance_linker_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_241_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:resonance_linker_list>
      </BMRBo:has_resonance_linker_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:resonance_linker_listCategory/BMRBx:resonance_linker_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_resonance_linker_list>
      <BMRBo:resonance_linker_list rdf:about="{$base}/resonance_linker_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_resonance_linker_list rdf:resource="{$base}/resonance_linker_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_241_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:resonance_linker_list>
      </BMRBo:has_resonance_linker_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sampleCategory/BMRBx:sample">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample>
      <BMRBo:sample rdf:about="{$base}/sample/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_sample rdf:resource="{$base}/sample/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_242_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample>
      </BMRBo:has_sample>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sampleCategory/BMRBx:sample">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample>
      <BMRBo:sample rdf:about="{$base}/sample/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_sample rdf:resource="{$base}/sample/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_242_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample>
      </BMRBo:has_sample>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sample_citationCategory/BMRBx:sample_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_id)&lt;64"><xsl:value-of select="@sample_id"/></xsl:when><xsl:when test="contains(@sample_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample_citation>
      <BMRBo:sample_citation rdf:about="{$base}/sample_citation/{$citation_id_encoded},{$entry_id_encoded},{$sample_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample_citation>
      </BMRBo:has_sample_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sample_citationCategory/BMRBx:sample_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_id)&lt;64"><xsl:value-of select="@sample_id"/></xsl:when><xsl:when test="contains(@sample_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample_citation>
      <BMRBo:sample_citation rdf:about="{$base}/sample_citation/{$citation_id_encoded},{$entry_id_encoded},{$sample_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample_citation>
      </BMRBo:has_sample_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sample_componentCategory/BMRBx:sample_component">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_id)&lt;64"><xsl:value-of select="@sample_id"/></xsl:when><xsl:when test="contains(@sample_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample_component>
      <BMRBo:sample_component rdf:about="{$base}/sample_component/{$entry_id_encoded},{$id_encoded},{$sample_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample_component>
      </BMRBo:has_sample_component>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sample_componentCategory/BMRBx:sample_component">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_id)&lt;64"><xsl:value-of select="@sample_id"/></xsl:when><xsl:when test="contains(@sample_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample_component>
      <BMRBo:sample_component rdf:about="{$base}/sample_component/{$entry_id_encoded},{$id_encoded},{$sample_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample_component>
      </BMRBo:has_sample_component>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sample_component_atom_isotopeCategory/BMRBx:sample_component_atom_isotope">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="atom_isotope_number_truncated"><xsl:choose><xsl:when test="string-length(@atom_isotope_number)&lt;64"><xsl:value-of select="@atom_isotope_number"/></xsl:when><xsl:when test="contains(@atom_isotope_number,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_isotope_number,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_isotope_number,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_isotope_number_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_isotope_number_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_component_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_component_id)&lt;64"><xsl:value-of select="@sample_component_id"/></xsl:when><xsl:when test="contains(@sample_component_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_component_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_component_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_component_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_component_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_id)&lt;64"><xsl:value-of select="@sample_id"/></xsl:when><xsl:when test="contains(@sample_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample_component_atom_isotope>
      <BMRBo:sample_component_atom_isotope rdf:about="{$base}/sample_component_atom_isotope/{$atom_id_encoded},{$atom_isotope_number_encoded},{$comp_index_id_encoded},{$entity_id_encoded},{$entry_id_encoded},{$sample_component_id_encoded},{$sample_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample_component_atom_isotope>
      </BMRBo:has_sample_component_atom_isotope>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sample_component_atom_isotopeCategory/BMRBx:sample_component_atom_isotope">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="atom_isotope_number_truncated"><xsl:choose><xsl:when test="string-length(@atom_isotope_number)&lt;64"><xsl:value-of select="@atom_isotope_number"/></xsl:when><xsl:when test="contains(@atom_isotope_number,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_isotope_number,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_isotope_number,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_isotope_number_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_isotope_number_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_component_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_component_id)&lt;64"><xsl:value-of select="@sample_component_id"/></xsl:when><xsl:when test="contains(@sample_component_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_component_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_component_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_component_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_component_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_id)&lt;64"><xsl:value-of select="@sample_id"/></xsl:when><xsl:when test="contains(@sample_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample_component_atom_isotope>
      <BMRBo:sample_component_atom_isotope rdf:about="{$base}/sample_component_atom_isotope/{$atom_id_encoded},{$atom_isotope_number_encoded},{$comp_index_id_encoded},{$entity_id_encoded},{$entry_id_encoded},{$sample_component_id_encoded},{$sample_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample_component_atom_isotope>
      </BMRBo:has_sample_component_atom_isotope>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sample_condition_citationCategory/BMRBx:sample_condition_citation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_condition_list_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_condition_list_id)&lt;64"><xsl:value-of select="@sample_condition_list_id"/></xsl:when><xsl:when test="contains(@sample_condition_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_condition_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_condition_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_condition_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_condition_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample_condition_citation>
      <BMRBo:sample_condition_citation rdf:about="{$base}/sample_condition_citation/{$entry_id_encoded},{$sample_condition_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample_condition_citation>
      </BMRBo:has_sample_condition_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sample_condition_citationCategory/BMRBx:sample_condition_citation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_condition_list_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_condition_list_id)&lt;64"><xsl:value-of select="@sample_condition_list_id"/></xsl:when><xsl:when test="contains(@sample_condition_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_condition_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_condition_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_condition_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_condition_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample_condition_citation>
      <BMRBo:sample_condition_citation rdf:about="{$base}/sample_condition_citation/{$entry_id_encoded},{$sample_condition_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample_condition_citation>
      </BMRBo:has_sample_condition_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sample_condition_listCategory/BMRBx:sample_condition_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample_condition_list>
      <BMRBo:sample_condition_list rdf:about="{$base}/sample_condition_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_sample_condition_list rdf:resource="{$base}/sample_condition_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_243_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample_condition_list>
      </BMRBo:has_sample_condition_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sample_condition_listCategory/BMRBx:sample_condition_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample_condition_list>
      <BMRBo:sample_condition_list rdf:about="{$base}/sample_condition_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_sample_condition_list rdf:resource="{$base}/sample_condition_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_243_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample_condition_list>
      </BMRBo:has_sample_condition_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sample_condition_variableCategory/BMRBx:sample_condition_variable">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_condition_list_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_condition_list_id)&lt;64"><xsl:value-of select="@sample_condition_list_id"/></xsl:when><xsl:when test="contains(@sample_condition_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_condition_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_condition_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_condition_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_condition_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample_condition_variable>
      <BMRBo:sample_condition_variable rdf:about="{$base}/sample_condition_variable/{$entry_id_encoded},{$sample_condition_list_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample_condition_variable>
      </BMRBo:has_sample_condition_variable>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sample_condition_variableCategory/BMRBx:sample_condition_variable">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_condition_list_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_condition_list_id)&lt;64"><xsl:value-of select="@sample_condition_list_id"/></xsl:when><xsl:when test="contains(@sample_condition_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_condition_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_condition_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_condition_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_condition_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sample_condition_variable>
      <BMRBo:sample_condition_variable rdf:about="{$base}/sample_condition_variable/{$entry_id_encoded},{$sample_condition_list_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sample_condition_variable>
      </BMRBo:has_sample_condition_variable>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:saxs_constraintCategory/BMRBx:saxs_constraint">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="saxs_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@saxs_constraint_list_id)&lt;64"><xsl:value-of select="@saxs_constraint_list_id"/></xsl:when><xsl:when test="contains(@saxs_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@saxs_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@saxs_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="saxs_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($saxs_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_saxs_constraint>
      <BMRBo:saxs_constraint rdf:about="{$base}/saxs_constraint/{$entry_id_encoded},{$id_encoded},{$saxs_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_saxs_constraint rdf:resource="{$base}/saxs_constraint/{$entry_id_encoded},{$id_encoded},{$saxs_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_244_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:saxs_constraint>
      </BMRBo:has_saxs_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:saxs_constraintCategory/BMRBx:saxs_constraint">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="saxs_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@saxs_constraint_list_id)&lt;64"><xsl:value-of select="@saxs_constraint_list_id"/></xsl:when><xsl:when test="contains(@saxs_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@saxs_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@saxs_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="saxs_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($saxs_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_saxs_constraint>
      <BMRBo:saxs_constraint rdf:about="{$base}/saxs_constraint/{$entry_id_encoded},{$id_encoded},{$saxs_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_saxs_constraint rdf:resource="{$base}/saxs_constraint/{$entry_id_encoded},{$id_encoded},{$saxs_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_244_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:saxs_constraint>
      </BMRBo:has_saxs_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:saxs_constraint_exptCategory/BMRBx:saxs_constraint_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_id)&lt;64"><xsl:value-of select="@sample_id"/></xsl:when><xsl:when test="contains(@sample_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="saxs_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@saxs_constraint_list_id)&lt;64"><xsl:value-of select="@saxs_constraint_list_id"/></xsl:when><xsl:when test="contains(@saxs_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@saxs_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@saxs_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="saxs_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($saxs_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_saxs_constraint_expt>
      <BMRBo:saxs_constraint_expt rdf:about="{$base}/saxs_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$sample_id_encoded},{$saxs_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_saxs_constraint_expt rdf:resource="{$base}/saxs_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$sample_id_encoded},{$saxs_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_245_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:saxs_constraint_expt>
      </BMRBo:has_saxs_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:saxs_constraint_exptCategory/BMRBx:saxs_constraint_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sample_id_truncated"><xsl:choose><xsl:when test="string-length(@sample_id)&lt;64"><xsl:value-of select="@sample_id"/></xsl:when><xsl:when test="contains(@sample_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sample_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sample_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sample_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sample_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="saxs_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@saxs_constraint_list_id)&lt;64"><xsl:value-of select="@saxs_constraint_list_id"/></xsl:when><xsl:when test="contains(@saxs_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@saxs_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@saxs_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="saxs_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($saxs_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_saxs_constraint_expt>
      <BMRBo:saxs_constraint_expt rdf:about="{$base}/saxs_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$sample_id_encoded},{$saxs_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_saxs_constraint_expt rdf:resource="{$base}/saxs_constraint_expt/{$entry_id_encoded},{$experiment_id_encoded},{$sample_id_encoded},{$saxs_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_245_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:saxs_constraint_expt>
      </BMRBo:has_saxs_constraint_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:saxs_constraint_listCategory/BMRBx:saxs_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_saxs_constraint_list>
      <BMRBo:saxs_constraint_list rdf:about="{$base}/saxs_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_saxs_constraint_list rdf:resource="{$base}/saxs_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_246_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:saxs_constraint_list>
      </BMRBo:has_saxs_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:saxs_constraint_listCategory/BMRBx:saxs_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_saxs_constraint_list>
      <BMRBo:saxs_constraint_list rdf:about="{$base}/saxs_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_saxs_constraint_list rdf:resource="{$base}/saxs_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_246_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:saxs_constraint_list>
      </BMRBo:has_saxs_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:saxs_constraint_softwareCategory/BMRBx:saxs_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="saxs_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@saxs_constraint_list_id)&lt;64"><xsl:value-of select="@saxs_constraint_list_id"/></xsl:when><xsl:when test="contains(@saxs_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@saxs_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@saxs_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="saxs_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($saxs_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_saxs_constraint_software>
      <BMRBo:saxs_constraint_software rdf:about="{$base}/saxs_constraint_software/{$entry_id_encoded},{$saxs_constraint_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_saxs_constraint_software rdf:resource="{$base}/saxs_constraint_software/{$entry_id_encoded},{$saxs_constraint_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_247_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:saxs_constraint_software>
      </BMRBo:has_saxs_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:saxs_constraint_softwareCategory/BMRBx:saxs_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="saxs_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@saxs_constraint_list_id)&lt;64"><xsl:value-of select="@saxs_constraint_list_id"/></xsl:when><xsl:when test="contains(@saxs_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@saxs_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@saxs_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="saxs_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($saxs_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_saxs_constraint_software>
      <BMRBo:saxs_constraint_software rdf:about="{$base}/saxs_constraint_software/{$entry_id_encoded},{$saxs_constraint_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_saxs_constraint_software rdf:resource="{$base}/saxs_constraint_software/{$entry_id_encoded},{$saxs_constraint_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_247_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:saxs_constraint_software>
      </BMRBo:has_saxs_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:saxs_exptCategory/BMRBx:saxs_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_saxs_expt>
      <BMRBo:saxs_expt rdf:about="{$base}/saxs_expt/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:saxs_expt>
      </BMRBo:has_saxs_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:saxs_exptCategory/BMRBx:saxs_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_saxs_expt>
      <BMRBo:saxs_expt rdf:about="{$base}/saxs_expt/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:saxs_expt>
      </BMRBo:has_saxs_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:secondary_structCategory/BMRBx:secondary_struct">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="secondary_struct_list_id_truncated"><xsl:choose><xsl:when test="string-length(@secondary_struct_list_id)&lt;64"><xsl:value-of select="@secondary_struct_list_id"/></xsl:when><xsl:when test="contains(@secondary_struct_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@secondary_struct_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@secondary_struct_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="secondary_struct_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($secondary_struct_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_secondary_struct>
      <BMRBo:secondary_struct rdf:about="{$base}/secondary_struct/{$entry_id_encoded},{$id_encoded},{$secondary_struct_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_secondary_struct rdf:resource="{$base}/secondary_struct/{$entry_id_encoded},{$id_encoded},{$secondary_struct_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_248_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:secondary_struct>
      </BMRBo:has_secondary_struct>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:secondary_structCategory/BMRBx:secondary_struct">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="secondary_struct_list_id_truncated"><xsl:choose><xsl:when test="string-length(@secondary_struct_list_id)&lt;64"><xsl:value-of select="@secondary_struct_list_id"/></xsl:when><xsl:when test="contains(@secondary_struct_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@secondary_struct_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@secondary_struct_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="secondary_struct_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($secondary_struct_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_secondary_struct>
      <BMRBo:secondary_struct rdf:about="{$base}/secondary_struct/{$entry_id_encoded},{$id_encoded},{$secondary_struct_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_secondary_struct rdf:resource="{$base}/secondary_struct/{$entry_id_encoded},{$id_encoded},{$secondary_struct_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_248_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:secondary_struct>
      </BMRBo:has_secondary_struct>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:secondary_struct_listCategory/BMRBx:secondary_struct_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_secondary_struct_list>
      <BMRBo:secondary_struct_list rdf:about="{$base}/secondary_struct_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_secondary_struct_list rdf:resource="{$base}/secondary_struct_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_249_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:secondary_struct_list>
      </BMRBo:has_secondary_struct_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:secondary_struct_listCategory/BMRBx:secondary_struct_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_secondary_struct_list>
      <BMRBo:secondary_struct_list rdf:about="{$base}/secondary_struct_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_secondary_struct_list rdf:resource="{$base}/secondary_struct_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_249_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:secondary_struct_list>
      </BMRBo:has_secondary_struct_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:secondary_struct_selCategory/BMRBx:secondary_struct_sel">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="method_id_truncated"><xsl:choose><xsl:when test="string-length(@method_id)&lt;64"><xsl:value-of select="@method_id"/></xsl:when><xsl:when test="contains(@method_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@method_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@method_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="method_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($method_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="secondary_struct_list_id_truncated"><xsl:choose><xsl:when test="string-length(@secondary_struct_list_id)&lt;64"><xsl:value-of select="@secondary_struct_list_id"/></xsl:when><xsl:when test="contains(@secondary_struct_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@secondary_struct_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@secondary_struct_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="secondary_struct_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($secondary_struct_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_secondary_struct_sel>
      <BMRBo:secondary_struct_sel rdf:about="{$base}/secondary_struct_sel/{$entry_id_encoded},{$method_id_encoded},{$secondary_struct_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_secondary_struct_sel rdf:resource="{$base}/secondary_struct_sel/{$entry_id_encoded},{$method_id_encoded},{$secondary_struct_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_250_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:secondary_struct_sel>
      </BMRBo:has_secondary_struct_sel>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:secondary_struct_selCategory/BMRBx:secondary_struct_sel">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="method_id_truncated"><xsl:choose><xsl:when test="string-length(@method_id)&lt;64"><xsl:value-of select="@method_id"/></xsl:when><xsl:when test="contains(@method_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@method_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@method_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="method_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($method_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="secondary_struct_list_id_truncated"><xsl:choose><xsl:when test="string-length(@secondary_struct_list_id)&lt;64"><xsl:value-of select="@secondary_struct_list_id"/></xsl:when><xsl:when test="contains(@secondary_struct_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@secondary_struct_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@secondary_struct_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="secondary_struct_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($secondary_struct_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_secondary_struct_sel>
      <BMRBo:secondary_struct_sel rdf:about="{$base}/secondary_struct_sel/{$entry_id_encoded},{$method_id_encoded},{$secondary_struct_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_secondary_struct_sel rdf:resource="{$base}/secondary_struct_sel/{$entry_id_encoded},{$method_id_encoded},{$secondary_struct_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_250_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:secondary_struct_sel>
      </BMRBo:has_secondary_struct_sel>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sg_projectCategory/BMRBx:sg_project">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sg_project_id_truncated"><xsl:choose><xsl:when test="string-length(@sg_project_id)&lt;64"><xsl:value-of select="@sg_project_id"/></xsl:when><xsl:when test="contains(@sg_project_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sg_project_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sg_project_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sg_project_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sg_project_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sg_project>
      <BMRBo:sg_project rdf:about="{$base}/sg_project/{$entry_id_encoded},{$sg_project_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_sg_project rdf:resource="{$base}/sg_project/{$entry_id_encoded},{$sg_project_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_251_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sg_project>
      </BMRBo:has_sg_project>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:sg_projectCategory/BMRBx:sg_project">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="sg_project_id_truncated"><xsl:choose><xsl:when test="string-length(@sg_project_id)&lt;64"><xsl:value-of select="@sg_project_id"/></xsl:when><xsl:when test="contains(@sg_project_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@sg_project_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@sg_project_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="sg_project_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($sg_project_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_sg_project>
      <BMRBo:sg_project rdf:about="{$base}/sg_project/{$entry_id_encoded},{$sg_project_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_sg_project rdf:resource="{$base}/sg_project/{$entry_id_encoded},{$sg_project_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_251_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:sg_project>
      </BMRBo:has_sg_project>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:softwareCategory/BMRBx:software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software>
      <BMRBo:software rdf:about="{$base}/software/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_software rdf:resource="{$base}/software/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_252_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software>
      </BMRBo:has_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:softwareCategory/BMRBx:software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software>
      <BMRBo:software rdf:about="{$base}/software/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_software rdf:resource="{$base}/software/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_252_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software>
      </BMRBo:has_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:software_applied_historyCategory/BMRBx:software_applied_history">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software_applied_history>
      <BMRBo:software_applied_history rdf:about="{$base}/software_applied_history/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_software_applied_history rdf:resource="{$base}/software_applied_history/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_253_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software_applied_history>
      </BMRBo:has_software_applied_history>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:software_applied_historyCategory/BMRBx:software_applied_history">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software_applied_history>
      <BMRBo:software_applied_history rdf:about="{$base}/software_applied_history/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_software_applied_history rdf:resource="{$base}/software_applied_history/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_253_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software_applied_history>
      </BMRBo:has_software_applied_history>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:software_applied_listCategory/BMRBx:software_applied_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software_applied_list>
      <BMRBo:software_applied_list rdf:about="{$base}/software_applied_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_software_applied_list rdf:resource="{$base}/software_applied_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_254_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software_applied_list>
      </BMRBo:has_software_applied_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:software_applied_listCategory/BMRBx:software_applied_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software_applied_list>
      <BMRBo:software_applied_list rdf:about="{$base}/software_applied_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_software_applied_list rdf:resource="{$base}/software_applied_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_254_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software_applied_list>
      </BMRBo:has_software_applied_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:software_applied_methodsCategory/BMRBx:software_applied_methods">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_applied_list_id_truncated"><xsl:choose><xsl:when test="string-length(@software_applied_list_id)&lt;64"><xsl:value-of select="@software_applied_list_id"/></xsl:when><xsl:when test="contains(@software_applied_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_applied_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_applied_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_applied_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_applied_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software_applied_methods>
      <BMRBo:software_applied_methods rdf:about="{$base}/software_applied_methods/{$entry_id_encoded},{$software_applied_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_software_applied_methods rdf:resource="{$base}/software_applied_methods/{$entry_id_encoded},{$software_applied_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_255_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software_applied_methods>
      </BMRBo:has_software_applied_methods>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:software_applied_methodsCategory/BMRBx:software_applied_methods">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_applied_list_id_truncated"><xsl:choose><xsl:when test="string-length(@software_applied_list_id)&lt;64"><xsl:value-of select="@software_applied_list_id"/></xsl:when><xsl:when test="contains(@software_applied_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_applied_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_applied_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_applied_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_applied_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software_applied_methods>
      <BMRBo:software_applied_methods rdf:about="{$base}/software_applied_methods/{$entry_id_encoded},{$software_applied_list_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_software_applied_methods rdf:resource="{$base}/software_applied_methods/{$entry_id_encoded},{$software_applied_list_id_encoded},{$software_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_255_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software_applied_methods>
      </BMRBo:has_software_applied_methods>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:software_citationCategory/BMRBx:software_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software_citation>
      <BMRBo:software_citation rdf:about="{$base}/software_citation/{$citation_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software_citation>
      </BMRBo:has_software_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:software_citationCategory/BMRBx:software_citation">
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software_citation>
      <BMRBo:software_citation rdf:about="{$base}/software_citation/{$citation_id_encoded},{$entry_id_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software_citation>
      </BMRBo:has_software_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:software_specific_infoCategory/BMRBx:software_specific_info">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_saveframe_id_truncated"><xsl:choose><xsl:when test="string-length(@software_saveframe_id)&lt;64"><xsl:value-of select="@software_saveframe_id"/></xsl:when><xsl:when test="contains(@software_saveframe_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_saveframe_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_saveframe_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_saveframe_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_saveframe_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_specific_info_list_id_truncated"><xsl:choose><xsl:when test="string-length(@software_specific_info_list_id)&lt;64"><xsl:value-of select="@software_specific_info_list_id"/></xsl:when><xsl:when test="contains(@software_specific_info_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_specific_info_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_specific_info_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_specific_info_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_specific_info_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software_specific_info>
      <BMRBo:software_specific_info rdf:about="{$base}/software_specific_info/{$entry_id_encoded},{$software_saveframe_id_encoded},{$software_specific_info_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_software_specific_info rdf:resource="{$base}/software_specific_info/{$entry_id_encoded},{$software_saveframe_id_encoded},{$software_specific_info_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_256_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software_specific_info>
      </BMRBo:has_software_specific_info>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:software_specific_infoCategory/BMRBx:software_specific_info">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_saveframe_id_truncated"><xsl:choose><xsl:when test="string-length(@software_saveframe_id)&lt;64"><xsl:value-of select="@software_saveframe_id"/></xsl:when><xsl:when test="contains(@software_saveframe_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_saveframe_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_saveframe_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_saveframe_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_saveframe_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_specific_info_list_id_truncated"><xsl:choose><xsl:when test="string-length(@software_specific_info_list_id)&lt;64"><xsl:value-of select="@software_specific_info_list_id"/></xsl:when><xsl:when test="contains(@software_specific_info_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_specific_info_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_specific_info_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_specific_info_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_specific_info_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software_specific_info>
      <BMRBo:software_specific_info rdf:about="{$base}/software_specific_info/{$entry_id_encoded},{$software_saveframe_id_encoded},{$software_specific_info_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_software_specific_info rdf:resource="{$base}/software_specific_info/{$entry_id_encoded},{$software_saveframe_id_encoded},{$software_specific_info_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_256_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software_specific_info>
      </BMRBo:has_software_specific_info>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:software_specific_info_listCategory/BMRBx:software_specific_info_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software_specific_info_list>
      <BMRBo:software_specific_info_list rdf:about="{$base}/software_specific_info_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_software_specific_info_list rdf:resource="{$base}/software_specific_info_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_257_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software_specific_info_list>
      </BMRBo:has_software_specific_info_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:software_specific_info_listCategory/BMRBx:software_specific_info_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_software_specific_info_list>
      <BMRBo:software_specific_info_list rdf:about="{$base}/software_specific_info_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_software_specific_info_list rdf:resource="{$base}/software_specific_info_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_257_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:software_specific_info_list>
      </BMRBo:has_software_specific_info_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_acq_paramCategory/BMRBx:spectral_acq_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spec_expt_id)&lt;64"><xsl:value-of select="@nmr_spec_expt_id"/></xsl:when><xsl:when test="contains(@nmr_spec_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spec_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spec_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spec_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_acq_param>
      <BMRBo:spectral_acq_param rdf:about="{$base}/spectral_acq_param/{$entry_id_encoded},{$id_encoded},{$nmr_spec_expt_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_acq_param>
      </BMRBo:has_spectral_acq_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_acq_paramCategory/BMRBx:spectral_acq_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spec_expt_id)&lt;64"><xsl:value-of select="@nmr_spec_expt_id"/></xsl:when><xsl:when test="contains(@nmr_spec_expt_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spec_expt_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spec_expt_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spec_expt_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spec_expt_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_acq_param>
      <BMRBo:spectral_acq_param rdf:about="{$base}/spectral_acq_param/{$entry_id_encoded},{$id_encoded},{$nmr_spec_expt_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_acq_param>
      </BMRBo:has_spectral_acq_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_densityCategory/BMRBx:spectral_density">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_density_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_density_list_id)&lt;64"><xsl:value-of select="@spectral_density_list_id"/></xsl:when><xsl:when test="contains(@spectral_density_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_density_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_density_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_density_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_density_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_density>
      <BMRBo:spectral_density rdf:about="{$base}/spectral_density/{$entry_id_encoded},{$id_encoded},{$spectral_density_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_spectral_density rdf:resource="{$base}/spectral_density/{$entry_id_encoded},{$id_encoded},{$spectral_density_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_258_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_density>
      </BMRBo:has_spectral_density>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_densityCategory/BMRBx:spectral_density">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_density_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_density_list_id)&lt;64"><xsl:value-of select="@spectral_density_list_id"/></xsl:when><xsl:when test="contains(@spectral_density_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_density_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_density_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_density_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_density_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_density>
      <BMRBo:spectral_density rdf:about="{$base}/spectral_density/{$entry_id_encoded},{$id_encoded},{$spectral_density_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_spectral_density rdf:resource="{$base}/spectral_density/{$entry_id_encoded},{$id_encoded},{$spectral_density_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_258_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_density>
      </BMRBo:has_spectral_density>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_density_experimentCategory/BMRBx:spectral_density_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_density_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_density_list_id)&lt;64"><xsl:value-of select="@spectral_density_list_id"/></xsl:when><xsl:when test="contains(@spectral_density_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_density_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_density_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_density_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_density_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_density_experiment>
      <BMRBo:spectral_density_experiment rdf:about="{$base}/spectral_density_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$spectral_density_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_spectral_density_experiment rdf:resource="{$base}/spectral_density_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$spectral_density_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_259_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_density_experiment>
      </BMRBo:has_spectral_density_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_density_experimentCategory/BMRBx:spectral_density_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_density_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_density_list_id)&lt;64"><xsl:value-of select="@spectral_density_list_id"/></xsl:when><xsl:when test="contains(@spectral_density_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_density_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_density_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_density_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_density_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_density_experiment>
      <BMRBo:spectral_density_experiment rdf:about="{$base}/spectral_density_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$spectral_density_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_spectral_density_experiment rdf:resource="{$base}/spectral_density_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$spectral_density_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_259_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_density_experiment>
      </BMRBo:has_spectral_density_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_density_listCategory/BMRBx:spectral_density_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_density_list>
      <BMRBo:spectral_density_list rdf:about="{$base}/spectral_density_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_spectral_density_list rdf:resource="{$base}/spectral_density_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_260_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_density_list>
      </BMRBo:has_spectral_density_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_density_listCategory/BMRBx:spectral_density_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_density_list>
      <BMRBo:spectral_density_list rdf:about="{$base}/spectral_density_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_spectral_density_list rdf:resource="{$base}/spectral_density_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_260_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_density_list>
      </BMRBo:has_spectral_density_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_density_softwareCategory/BMRBx:spectral_density_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_density_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_density_list_id)&lt;64"><xsl:value-of select="@spectral_density_list_id"/></xsl:when><xsl:when test="contains(@spectral_density_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_density_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_density_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_density_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_density_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_density_software>
      <BMRBo:spectral_density_software rdf:about="{$base}/spectral_density_software/{$entry_id_encoded},{$software_id_encoded},{$spectral_density_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_spectral_density_software rdf:resource="{$base}/spectral_density_software/{$entry_id_encoded},{$software_id_encoded},{$spectral_density_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_261_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_density_software>
      </BMRBo:has_spectral_density_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_density_softwareCategory/BMRBx:spectral_density_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_density_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_density_list_id)&lt;64"><xsl:value-of select="@spectral_density_list_id"/></xsl:when><xsl:when test="contains(@spectral_density_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_density_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_density_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_density_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_density_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_density_software>
      <BMRBo:spectral_density_software rdf:about="{$base}/spectral_density_software/{$entry_id_encoded},{$software_id_encoded},{$spectral_density_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_spectral_density_software rdf:resource="{$base}/spectral_density_software/{$entry_id_encoded},{$software_id_encoded},{$spectral_density_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_261_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_density_software>
      </BMRBo:has_spectral_density_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_dimCategory/BMRBx:spectral_dim">
      <xsl:variable name="atom_type_truncated"><xsl:choose><xsl:when test="string-length(@atom_type)&lt;64"><xsl:value-of select="@atom_type"/></xsl:when><xsl:when test="contains(@atom_type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_region_truncated"><xsl:choose><xsl:when test="string-length(@spectral_region)&lt;64"><xsl:value-of select="@spectral_region"/></xsl:when><xsl:when test="contains(@spectral_region,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_region,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_region,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_region_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_region_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_dim>
      <BMRBo:spectral_dim rdf:about="{$base}/spectral_dim/{$atom_type_encoded},{$entry_id_encoded},{$id_encoded},{$spectral_peak_list_id_encoded},{$spectral_region_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_dim>
      </BMRBo:has_spectral_dim>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_dimCategory/BMRBx:spectral_dim">
      <xsl:variable name="atom_type_truncated"><xsl:choose><xsl:when test="string-length(@atom_type)&lt;64"><xsl:value-of select="@atom_type"/></xsl:when><xsl:when test="contains(@atom_type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_region_truncated"><xsl:choose><xsl:when test="string-length(@spectral_region)&lt;64"><xsl:value-of select="@spectral_region"/></xsl:when><xsl:when test="contains(@spectral_region,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_region,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_region,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_region_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_region_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_dim>
      <BMRBo:spectral_dim rdf:about="{$base}/spectral_dim/{$atom_type_encoded},{$entry_id_encoded},{$id_encoded},{$spectral_peak_list_id_encoded},{$spectral_region_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_dim>
      </BMRBo:has_spectral_dim>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_dim_transferCategory/BMRBx:spectral_dim_transfer">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_dim_id_1_truncated"><xsl:choose><xsl:when test="string-length(@spectral_dim_id_1)&lt;64"><xsl:value-of select="@spectral_dim_id_1"/></xsl:when><xsl:when test="contains(@spectral_dim_id_1,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_dim_id_1,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_dim_id_1,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_dim_id_1_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_dim_id_1_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_dim_id_2_truncated"><xsl:choose><xsl:when test="string-length(@spectral_dim_id_2)&lt;64"><xsl:value-of select="@spectral_dim_id_2"/></xsl:when><xsl:when test="contains(@spectral_dim_id_2,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_dim_id_2,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_dim_id_2,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_dim_id_2_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_dim_id_2_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_dim_transfer>
      <BMRBo:spectral_dim_transfer rdf:about="{$base}/spectral_dim_transfer/{$entry_id_encoded},{$spectral_dim_id_1_encoded},{$spectral_dim_id_2_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_dim_transfer>
      </BMRBo:has_spectral_dim_transfer>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_dim_transferCategory/BMRBx:spectral_dim_transfer">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_dim_id_1_truncated"><xsl:choose><xsl:when test="string-length(@spectral_dim_id_1)&lt;64"><xsl:value-of select="@spectral_dim_id_1"/></xsl:when><xsl:when test="contains(@spectral_dim_id_1,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_dim_id_1,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_dim_id_1,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_dim_id_1_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_dim_id_1_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_dim_id_2_truncated"><xsl:choose><xsl:when test="string-length(@spectral_dim_id_2)&lt;64"><xsl:value-of select="@spectral_dim_id_2"/></xsl:when><xsl:when test="contains(@spectral_dim_id_2,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_dim_id_2,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_dim_id_2,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_dim_id_2_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_dim_id_2_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_dim_transfer>
      <BMRBo:spectral_dim_transfer rdf:about="{$base}/spectral_dim_transfer/{$entry_id_encoded},{$spectral_dim_id_1_encoded},{$spectral_dim_id_2_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_dim_transfer>
      </BMRBo:has_spectral_dim_transfer>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_peak_listCategory/BMRBx:spectral_peak_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_peak_list>
      <BMRBo:spectral_peak_list rdf:about="{$base}/spectral_peak_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_spectral_peak_list rdf:resource="{$base}/spectral_peak_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_262_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_peak_list>
      </BMRBo:has_spectral_peak_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_peak_listCategory/BMRBx:spectral_peak_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_peak_list>
      <BMRBo:spectral_peak_list rdf:about="{$base}/spectral_peak_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_spectral_peak_list rdf:resource="{$base}/spectral_peak_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_262_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_peak_list>
      </BMRBo:has_spectral_peak_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_peak_softwareCategory/BMRBx:spectral_peak_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_peak_software>
      <BMRBo:spectral_peak_software rdf:about="{$base}/spectral_peak_software/{$entry_id_encoded},{$software_id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_peak_software>
      </BMRBo:has_spectral_peak_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_peak_softwareCategory/BMRBx:spectral_peak_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_peak_software>
      <BMRBo:spectral_peak_software rdf:about="{$base}/spectral_peak_software/{$entry_id_encoded},{$software_id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_peak_software>
      </BMRBo:has_spectral_peak_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_processing_paramCategory/BMRBx:spectral_processing_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spectral_processing_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spectral_processing_id)&lt;64"><xsl:value-of select="@nmr_spectral_processing_id"/></xsl:when><xsl:when test="contains(@nmr_spectral_processing_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spectral_processing_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spectral_processing_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spectral_processing_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spectral_processing_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_processing_param>
      <BMRBo:spectral_processing_param rdf:about="{$base}/spectral_processing_param/{$entry_id_encoded},{$id_encoded},{$nmr_spectral_processing_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_processing_param>
      </BMRBo:has_spectral_processing_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_processing_paramCategory/BMRBx:spectral_processing_param">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="nmr_spectral_processing_id_truncated"><xsl:choose><xsl:when test="string-length(@nmr_spectral_processing_id)&lt;64"><xsl:value-of select="@nmr_spectral_processing_id"/></xsl:when><xsl:when test="contains(@nmr_spectral_processing_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@nmr_spectral_processing_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@nmr_spectral_processing_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="nmr_spectral_processing_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($nmr_spectral_processing_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_processing_param>
      <BMRBo:spectral_processing_param rdf:about="{$base}/spectral_processing_param/{$entry_id_encoded},{$id_encoded},{$nmr_spectral_processing_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_processing_param>
      </BMRBo:has_spectral_processing_param>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_transitionCategory/BMRBx:spectral_transition">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_transition>
      <BMRBo:spectral_transition rdf:about="{$base}/spectral_transition/{$entry_id_encoded},{$id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_transition>
      </BMRBo:has_spectral_transition>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_transitionCategory/BMRBx:spectral_transition">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_transition>
      <BMRBo:spectral_transition rdf:about="{$base}/spectral_transition/{$entry_id_encoded},{$id_encoded},{$spectral_peak_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_transition>
      </BMRBo:has_spectral_transition>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_transition_charCategory/BMRBx:spectral_transition_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_dim_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_dim_id)&lt;64"><xsl:value-of select="@spectral_dim_id"/></xsl:when><xsl:when test="contains(@spectral_dim_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_dim_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_dim_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_dim_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_dim_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_transition_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_transition_id)&lt;64"><xsl:value-of select="@spectral_transition_id"/></xsl:when><xsl:when test="contains(@spectral_transition_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_transition_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_transition_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_transition_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_transition_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_transition_char>
      <BMRBo:spectral_transition_char rdf:about="{$base}/spectral_transition_char/{$entry_id_encoded},{$spectral_dim_id_encoded},{$spectral_peak_list_id_encoded},{$spectral_transition_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_transition_char>
      </BMRBo:has_spectral_transition_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_transition_charCategory/BMRBx:spectral_transition_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_dim_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_dim_id)&lt;64"><xsl:value-of select="@spectral_dim_id"/></xsl:when><xsl:when test="contains(@spectral_dim_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_dim_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_dim_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_dim_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_dim_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_transition_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_transition_id)&lt;64"><xsl:value-of select="@spectral_transition_id"/></xsl:when><xsl:when test="contains(@spectral_transition_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_transition_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_transition_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_transition_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_transition_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_transition_char>
      <BMRBo:spectral_transition_char rdf:about="{$base}/spectral_transition_char/{$entry_id_encoded},{$spectral_dim_id_encoded},{$spectral_peak_list_id_encoded},{$spectral_transition_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_transition_char>
      </BMRBo:has_spectral_transition_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_transition_general_charCategory/BMRBx:spectral_transition_general_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="intensity_val_truncated"><xsl:choose><xsl:when test="string-length(@intensity_val)&lt;64"><xsl:value-of select="@intensity_val"/></xsl:when><xsl:when test="contains(@intensity_val,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@intensity_val,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@intensity_val,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="intensity_val_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($intensity_val_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_transition_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_transition_id)&lt;64"><xsl:value-of select="@spectral_transition_id"/></xsl:when><xsl:when test="contains(@spectral_transition_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_transition_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_transition_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_transition_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_transition_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_transition_general_char>
      <BMRBo:spectral_transition_general_char rdf:about="{$base}/spectral_transition_general_char/{$entry_id_encoded},{$intensity_val_encoded},{$spectral_peak_list_id_encoded},{$spectral_transition_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_transition_general_char>
      </BMRBo:has_spectral_transition_general_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spectral_transition_general_charCategory/BMRBx:spectral_transition_general_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="intensity_val_truncated"><xsl:choose><xsl:when test="string-length(@intensity_val)&lt;64"><xsl:value-of select="@intensity_val"/></xsl:when><xsl:when test="contains(@intensity_val,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@intensity_val,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@intensity_val,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="intensity_val_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($intensity_val_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_peak_list_id)&lt;64"><xsl:value-of select="@spectral_peak_list_id"/></xsl:when><xsl:when test="contains(@spectral_peak_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_peak_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_peak_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_peak_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_peak_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="spectral_transition_id_truncated"><xsl:choose><xsl:when test="string-length(@spectral_transition_id)&lt;64"><xsl:value-of select="@spectral_transition_id"/></xsl:when><xsl:when test="contains(@spectral_transition_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@spectral_transition_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@spectral_transition_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="spectral_transition_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($spectral_transition_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spectral_transition_general_char>
      <BMRBo:spectral_transition_general_char rdf:about="{$base}/spectral_transition_general_char/{$entry_id_encoded},{$intensity_val_encoded},{$spectral_peak_list_id_encoded},{$spectral_transition_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spectral_transition_general_char>
      </BMRBo:has_spectral_transition_general_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spin_systemCategory/BMRBx:spin_system">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_truncated"><xsl:choose><xsl:when test="string-length(@resonance_linker_list_id)&lt;64"><xsl:value-of select="@resonance_linker_list_id"/></xsl:when><xsl:when test="contains(@resonance_linker_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_linker_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_linker_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_linker_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spin_system>
      <BMRBo:spin_system rdf:about="{$base}/spin_system/{$entry_id_encoded},{$id_encoded},{$resonance_linker_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spin_system>
      </BMRBo:has_spin_system>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spin_systemCategory/BMRBx:spin_system">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_truncated"><xsl:choose><xsl:when test="string-length(@resonance_linker_list_id)&lt;64"><xsl:value-of select="@resonance_linker_list_id"/></xsl:when><xsl:when test="contains(@resonance_linker_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_linker_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_linker_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_linker_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spin_system>
      <BMRBo:spin_system rdf:about="{$base}/spin_system/{$entry_id_encoded},{$id_encoded},{$resonance_linker_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spin_system>
      </BMRBo:has_spin_system>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spin_system_linkCategory/BMRBx:spin_system_link">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="from_spin_system_id_truncated"><xsl:choose><xsl:when test="string-length(@from_spin_system_id)&lt;64"><xsl:value-of select="@from_spin_system_id"/></xsl:when><xsl:when test="contains(@from_spin_system_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@from_spin_system_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@from_spin_system_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="from_spin_system_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($from_spin_system_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_truncated"><xsl:choose><xsl:when test="string-length(@resonance_linker_list_id)&lt;64"><xsl:value-of select="@resonance_linker_list_id"/></xsl:when><xsl:when test="contains(@resonance_linker_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_linker_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_linker_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_linker_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="to_spin_system_id_truncated"><xsl:choose><xsl:when test="string-length(@to_spin_system_id)&lt;64"><xsl:value-of select="@to_spin_system_id"/></xsl:when><xsl:when test="contains(@to_spin_system_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@to_spin_system_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@to_spin_system_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="to_spin_system_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($to_spin_system_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spin_system_link>
      <BMRBo:spin_system_link rdf:about="{$base}/spin_system_link/{$entry_id_encoded},{$from_spin_system_id_encoded},{$resonance_linker_list_id_encoded},{$to_spin_system_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spin_system_link>
      </BMRBo:has_spin_system_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:spin_system_linkCategory/BMRBx:spin_system_link">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="from_spin_system_id_truncated"><xsl:choose><xsl:when test="string-length(@from_spin_system_id)&lt;64"><xsl:value-of select="@from_spin_system_id"/></xsl:when><xsl:when test="contains(@from_spin_system_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@from_spin_system_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@from_spin_system_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="from_spin_system_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($from_spin_system_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_truncated"><xsl:choose><xsl:when test="string-length(@resonance_linker_list_id)&lt;64"><xsl:value-of select="@resonance_linker_list_id"/></xsl:when><xsl:when test="contains(@resonance_linker_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@resonance_linker_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@resonance_linker_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="resonance_linker_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($resonance_linker_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="to_spin_system_id_truncated"><xsl:choose><xsl:when test="string-length(@to_spin_system_id)&lt;64"><xsl:value-of select="@to_spin_system_id"/></xsl:when><xsl:when test="contains(@to_spin_system_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@to_spin_system_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@to_spin_system_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="to_spin_system_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($to_spin_system_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_spin_system_link>
      <BMRBo:spin_system_link rdf:about="{$base}/spin_system_link/{$entry_id_encoded},{$from_spin_system_id_encoded},{$resonance_linker_list_id_encoded},{$to_spin_system_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:spin_system_link>
      </BMRBo:has_spin_system_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:struct_anno_charCategory/BMRBx:struct_anno_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="structure_annotation_id_truncated"><xsl:choose><xsl:when test="string-length(@structure_annotation_id)&lt;64"><xsl:value-of select="@structure_annotation_id"/></xsl:when><xsl:when test="contains(@structure_annotation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@structure_annotation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@structure_annotation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="structure_annotation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($structure_annotation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_struct_anno_char>
      <BMRBo:struct_anno_char rdf:about="{$base}/struct_anno_char/{$entry_id_encoded},{$id_encoded},{$structure_annotation_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_struct_anno_char rdf:resource="{$base}/struct_anno_char/{$entry_id_encoded},{$id_encoded},{$structure_annotation_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_263_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:struct_anno_char>
      </BMRBo:has_struct_anno_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:struct_anno_charCategory/BMRBx:struct_anno_char">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="structure_annotation_id_truncated"><xsl:choose><xsl:when test="string-length(@structure_annotation_id)&lt;64"><xsl:value-of select="@structure_annotation_id"/></xsl:when><xsl:when test="contains(@structure_annotation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@structure_annotation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@structure_annotation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="structure_annotation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($structure_annotation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_struct_anno_char>
      <BMRBo:struct_anno_char rdf:about="{$base}/struct_anno_char/{$entry_id_encoded},{$id_encoded},{$structure_annotation_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_struct_anno_char rdf:resource="{$base}/struct_anno_char/{$entry_id_encoded},{$id_encoded},{$structure_annotation_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_263_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:struct_anno_char>
      </BMRBo:has_struct_anno_char>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:struct_anno_softwareCategory/BMRBx:struct_anno_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="structure_annotation_id_truncated"><xsl:choose><xsl:when test="string-length(@structure_annotation_id)&lt;64"><xsl:value-of select="@structure_annotation_id"/></xsl:when><xsl:when test="contains(@structure_annotation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@structure_annotation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@structure_annotation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="structure_annotation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($structure_annotation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_struct_anno_software>
      <BMRBo:struct_anno_software rdf:about="{$base}/struct_anno_software/{$entry_id_encoded},{$software_id_encoded},{$structure_annotation_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_struct_anno_software rdf:resource="{$base}/struct_anno_software/{$entry_id_encoded},{$software_id_encoded},{$structure_annotation_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_264_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:struct_anno_software>
      </BMRBo:has_struct_anno_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:struct_anno_softwareCategory/BMRBx:struct_anno_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="structure_annotation_id_truncated"><xsl:choose><xsl:when test="string-length(@structure_annotation_id)&lt;64"><xsl:value-of select="@structure_annotation_id"/></xsl:when><xsl:when test="contains(@structure_annotation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@structure_annotation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@structure_annotation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="structure_annotation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($structure_annotation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_struct_anno_software>
      <BMRBo:struct_anno_software rdf:about="{$base}/struct_anno_software/{$entry_id_encoded},{$software_id_encoded},{$structure_annotation_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_struct_anno_software rdf:resource="{$base}/struct_anno_software/{$entry_id_encoded},{$software_id_encoded},{$structure_annotation_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_264_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:struct_anno_software>
      </BMRBo:has_struct_anno_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:struct_asymCategory/BMRBx:struct_asym">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_struct_asym>
      <BMRBo:struct_asym rdf:about="{$base}/struct_asym/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:struct_asym>
      </BMRBo:has_struct_asym>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:struct_asymCategory/BMRBx:struct_asym">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_struct_asym>
      <BMRBo:struct_asym rdf:about="{$base}/struct_asym/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:struct_asym>
      </BMRBo:has_struct_asym>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:struct_classificationCategory/BMRBx:struct_classification">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="structure_annotation_id_truncated"><xsl:choose><xsl:when test="string-length(@structure_annotation_id)&lt;64"><xsl:value-of select="@structure_annotation_id"/></xsl:when><xsl:when test="contains(@structure_annotation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@structure_annotation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@structure_annotation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="structure_annotation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($structure_annotation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_struct_classification>
      <BMRBo:struct_classification rdf:about="{$base}/struct_classification/{$entry_id_encoded},{$id_encoded},{$structure_annotation_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_struct_classification rdf:resource="{$base}/struct_classification/{$entry_id_encoded},{$id_encoded},{$structure_annotation_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_265_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:struct_classification>
      </BMRBo:has_struct_classification>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:struct_classificationCategory/BMRBx:struct_classification">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="structure_annotation_id_truncated"><xsl:choose><xsl:when test="string-length(@structure_annotation_id)&lt;64"><xsl:value-of select="@structure_annotation_id"/></xsl:when><xsl:when test="contains(@structure_annotation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@structure_annotation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@structure_annotation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="structure_annotation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($structure_annotation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_struct_classification>
      <BMRBo:struct_classification rdf:about="{$base}/struct_classification/{$entry_id_encoded},{$id_encoded},{$structure_annotation_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_struct_classification rdf:resource="{$base}/struct_classification/{$entry_id_encoded},{$id_encoded},{$structure_annotation_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_265_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:struct_classification>
      </BMRBo:has_struct_classification>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:struct_imageCategory/BMRBx:struct_image">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="file_name_truncated"><xsl:choose><xsl:when test="string-length(@file_name)&lt;64"><xsl:value-of select="@file_name"/></xsl:when><xsl:when test="contains(@file_name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@file_name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@file_name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="file_name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($file_name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_struct_image>
      <BMRBo:struct_image rdf:about="{$base}/struct_image/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$file_name_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_struct_image rdf:resource="{$base}/struct_image/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$file_name_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_266_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:struct_image>
      </BMRBo:has_struct_image>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:struct_imageCategory/BMRBx:struct_image">
      <xsl:variable name="conformer_family_coord_set_id_truncated"><xsl:choose><xsl:when test="string-length(@conformer_family_coord_set_id)&lt;64"><xsl:value-of select="@conformer_family_coord_set_id"/></xsl:when><xsl:when test="contains(@conformer_family_coord_set_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@conformer_family_coord_set_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@conformer_family_coord_set_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="conformer_family_coord_set_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($conformer_family_coord_set_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="file_name_truncated"><xsl:choose><xsl:when test="string-length(@file_name)&lt;64"><xsl:value-of select="@file_name"/></xsl:when><xsl:when test="contains(@file_name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@file_name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@file_name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="file_name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($file_name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_struct_image>
      <BMRBo:struct_image rdf:about="{$base}/struct_image/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$file_name_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_struct_image rdf:resource="{$base}/struct_image/{$conformer_family_coord_set_id_encoded},{$entry_id_encoded},{$file_name_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_266_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:struct_image>
      </BMRBo:has_struct_image>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:struct_keywordsCategory/BMRBx:struct_keywords">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keywords_truncated"><xsl:choose><xsl:when test="string-length(@keywords)&lt;64"><xsl:value-of select="@keywords"/></xsl:when><xsl:when test="contains(@keywords,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keywords,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keywords,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keywords_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keywords_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_struct_keywords>
      <BMRBo:struct_keywords rdf:about="{$base}/struct_keywords/{$entry_id_encoded},{$keywords_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_struct_keywords rdf:resource="{$base}/struct_keywords/{$entry_id_encoded},{$keywords_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_267_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:struct_keywords>
      </BMRBo:has_struct_keywords>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:struct_keywordsCategory/BMRBx:struct_keywords">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keywords_truncated"><xsl:choose><xsl:when test="string-length(@keywords)&lt;64"><xsl:value-of select="@keywords"/></xsl:when><xsl:when test="contains(@keywords,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keywords,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keywords,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keywords_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keywords_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_struct_keywords>
      <BMRBo:struct_keywords rdf:about="{$base}/struct_keywords/{$entry_id_encoded},{$keywords_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_struct_keywords rdf:resource="{$base}/struct_keywords/{$entry_id_encoded},{$keywords_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_267_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:struct_keywords>
      </BMRBo:has_struct_keywords>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:structure_annotationCategory/BMRBx:structure_annotation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_structure_annotation>
      <BMRBo:structure_annotation rdf:about="{$base}/structure_annotation/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_structure_annotation rdf:resource="{$base}/structure_annotation/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_268_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:structure_annotation>
      </BMRBo:has_structure_annotation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:structure_annotationCategory/BMRBx:structure_annotation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_structure_annotation>
      <BMRBo:structure_annotation rdf:about="{$base}/structure_annotation/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_structure_annotation rdf:resource="{$base}/structure_annotation/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_268_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:structure_annotation>
      </BMRBo:has_structure_annotation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:structure_interactionCategory/BMRBx:structure_interaction">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="structure_interaction_list_id_truncated"><xsl:choose><xsl:when test="string-length(@structure_interaction_list_id)&lt;64"><xsl:value-of select="@structure_interaction_list_id"/></xsl:when><xsl:when test="contains(@structure_interaction_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@structure_interaction_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@structure_interaction_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="structure_interaction_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($structure_interaction_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_structure_interaction>
      <BMRBo:structure_interaction rdf:about="{$base}/structure_interaction/{$entry_id_encoded},{$id_encoded},{$structure_interaction_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_structure_interaction rdf:resource="{$base}/structure_interaction/{$entry_id_encoded},{$id_encoded},{$structure_interaction_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_269_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:structure_interaction>
      </BMRBo:has_structure_interaction>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:structure_interactionCategory/BMRBx:structure_interaction">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="structure_interaction_list_id_truncated"><xsl:choose><xsl:when test="string-length(@structure_interaction_list_id)&lt;64"><xsl:value-of select="@structure_interaction_list_id"/></xsl:when><xsl:when test="contains(@structure_interaction_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@structure_interaction_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@structure_interaction_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="structure_interaction_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($structure_interaction_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_structure_interaction>
      <BMRBo:structure_interaction rdf:about="{$base}/structure_interaction/{$entry_id_encoded},{$id_encoded},{$structure_interaction_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_structure_interaction rdf:resource="{$base}/structure_interaction/{$entry_id_encoded},{$id_encoded},{$structure_interaction_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_269_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:structure_interaction>
      </BMRBo:has_structure_interaction>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:structure_interaction_listCategory/BMRBx:structure_interaction_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_structure_interaction_list>
      <BMRBo:structure_interaction_list rdf:about="{$base}/structure_interaction_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_structure_interaction_list rdf:resource="{$base}/structure_interaction_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_270_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:structure_interaction_list>
      </BMRBo:has_structure_interaction_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:structure_interaction_listCategory/BMRBx:structure_interaction_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_structure_interaction_list>
      <BMRBo:structure_interaction_list rdf:about="{$base}/structure_interaction_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_structure_interaction_list rdf:resource="{$base}/structure_interaction_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_270_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:structure_interaction_list>
      </BMRBo:has_structure_interaction_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:studyCategory/BMRBx:study">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="study_list_id_truncated"><xsl:choose><xsl:when test="string-length(@study_list_id)&lt;64"><xsl:value-of select="@study_list_id"/></xsl:when><xsl:when test="contains(@study_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@study_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@study_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="study_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($study_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_study>
      <BMRBo:study rdf:about="{$base}/study/{$entry_id_encoded},{$id_encoded},{$study_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:study>
      </BMRBo:has_study>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:studyCategory/BMRBx:study">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="study_list_id_truncated"><xsl:choose><xsl:when test="string-length(@study_list_id)&lt;64"><xsl:value-of select="@study_list_id"/></xsl:when><xsl:when test="contains(@study_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@study_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@study_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="study_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($study_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_study>
      <BMRBo:study rdf:about="{$base}/study/{$entry_id_encoded},{$id_encoded},{$study_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:study>
      </BMRBo:has_study>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:study_entry_listCategory/BMRBx:study_entry_list">
      <xsl:variable name="bmrb_accession_code_truncated"><xsl:choose><xsl:when test="string-length(@bmrb_accession_code)&lt;64"><xsl:value-of select="@bmrb_accession_code"/></xsl:when><xsl:when test="contains(@bmrb_accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@bmrb_accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@bmrb_accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="bmrb_accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($bmrb_accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="study_id_truncated"><xsl:choose><xsl:when test="string-length(@study_id)&lt;64"><xsl:value-of select="@study_id"/></xsl:when><xsl:when test="contains(@study_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@study_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@study_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="study_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($study_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="study_list_id_truncated"><xsl:choose><xsl:when test="string-length(@study_list_id)&lt;64"><xsl:value-of select="@study_list_id"/></xsl:when><xsl:when test="contains(@study_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@study_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@study_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="study_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($study_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_study_entry_list>
      <BMRBo:study_entry_list rdf:about="{$base}/study_entry_list/{$bmrb_accession_code_encoded},{$entry_id_encoded},{$study_id_encoded},{$study_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:study_entry_list>
      </BMRBo:has_study_entry_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:study_entry_listCategory/BMRBx:study_entry_list">
      <xsl:variable name="bmrb_accession_code_truncated"><xsl:choose><xsl:when test="string-length(@bmrb_accession_code)&lt;64"><xsl:value-of select="@bmrb_accession_code"/></xsl:when><xsl:when test="contains(@bmrb_accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@bmrb_accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@bmrb_accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="bmrb_accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($bmrb_accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="study_id_truncated"><xsl:choose><xsl:when test="string-length(@study_id)&lt;64"><xsl:value-of select="@study_id"/></xsl:when><xsl:when test="contains(@study_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@study_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@study_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="study_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($study_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="study_list_id_truncated"><xsl:choose><xsl:when test="string-length(@study_list_id)&lt;64"><xsl:value-of select="@study_list_id"/></xsl:when><xsl:when test="contains(@study_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@study_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@study_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="study_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($study_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_study_entry_list>
      <BMRBo:study_entry_list rdf:about="{$base}/study_entry_list/{$bmrb_accession_code_encoded},{$entry_id_encoded},{$study_id_encoded},{$study_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:study_entry_list>
      </BMRBo:has_study_entry_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:study_keywordCategory/BMRBx:study_keyword">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keyword_truncated"><xsl:choose><xsl:when test="string-length(@keyword)&lt;64"><xsl:value-of select="@keyword"/></xsl:when><xsl:when test="contains(@keyword,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keyword,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keyword,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keyword_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keyword_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="study_id_truncated"><xsl:choose><xsl:when test="string-length(@study_id)&lt;64"><xsl:value-of select="@study_id"/></xsl:when><xsl:when test="contains(@study_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@study_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@study_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="study_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($study_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="study_list_id_truncated"><xsl:choose><xsl:when test="string-length(@study_list_id)&lt;64"><xsl:value-of select="@study_list_id"/></xsl:when><xsl:when test="contains(@study_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@study_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@study_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="study_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($study_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_study_keyword>
      <BMRBo:study_keyword rdf:about="{$base}/study_keyword/{$entry_id_encoded},{$keyword_encoded},{$study_id_encoded},{$study_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:study_keyword>
      </BMRBo:has_study_keyword>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:study_keywordCategory/BMRBx:study_keyword">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keyword_truncated"><xsl:choose><xsl:when test="string-length(@keyword)&lt;64"><xsl:value-of select="@keyword"/></xsl:when><xsl:when test="contains(@keyword,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keyword,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keyword,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keyword_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keyword_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="study_id_truncated"><xsl:choose><xsl:when test="string-length(@study_id)&lt;64"><xsl:value-of select="@study_id"/></xsl:when><xsl:when test="contains(@study_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@study_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@study_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="study_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($study_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="study_list_id_truncated"><xsl:choose><xsl:when test="string-length(@study_list_id)&lt;64"><xsl:value-of select="@study_list_id"/></xsl:when><xsl:when test="contains(@study_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@study_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@study_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="study_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($study_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_study_keyword>
      <BMRBo:study_keyword rdf:about="{$base}/study_keyword/{$entry_id_encoded},{$keyword_encoded},{$study_id_encoded},{$study_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:study_keyword>
      </BMRBo:has_study_keyword>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:study_listCategory/BMRBx:study_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_study_list>
      <BMRBo:study_list rdf:about="{$base}/study_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_study_list rdf:resource="{$base}/study_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_271_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:study_list>
      </BMRBo:has_study_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:study_listCategory/BMRBx:study_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_study_list>
      <BMRBo:study_list rdf:about="{$base}/study_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_study_list rdf:resource="{$base}/study_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_271_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:study_list>
      </BMRBo:has_study_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_biological_functionCategory/BMRBx:subsystem_biological_function">
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="biological_function_truncated"><xsl:choose><xsl:when test="string-length(@biological_function)&lt;64"><xsl:value-of select="@biological_function"/></xsl:when><xsl:when test="contains(@biological_function,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@biological_function,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@biological_function,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="biological_function_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($biological_function_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_biological_function>
      <BMRBo:subsystem_biological_function rdf:about="{$base}/subsystem_biological_function/{$assembly_subsystem_id_encoded},{$biological_function_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_biological_function>
      </BMRBo:has_subsystem_biological_function>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_biological_functionCategory/BMRBx:subsystem_biological_function">
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="biological_function_truncated"><xsl:choose><xsl:when test="string-length(@biological_function)&lt;64"><xsl:value-of select="@biological_function"/></xsl:when><xsl:when test="contains(@biological_function,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@biological_function,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@biological_function,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="biological_function_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($biological_function_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_biological_function>
      <BMRBo:subsystem_biological_function rdf:about="{$base}/subsystem_biological_function/{$assembly_subsystem_id_encoded},{$biological_function_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_biological_function>
      </BMRBo:has_subsystem_biological_function>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_citationCategory/BMRBx:subsystem_citation">
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_citation>
      <BMRBo:subsystem_citation rdf:about="{$base}/subsystem_citation/{$assembly_subsystem_id_encoded},{$citation_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_citation>
      </BMRBo:has_subsystem_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_citationCategory/BMRBx:subsystem_citation">
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="citation_id_truncated"><xsl:choose><xsl:when test="string-length(@citation_id)&lt;64"><xsl:value-of select="@citation_id"/></xsl:when><xsl:when test="contains(@citation_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@citation_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@citation_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="citation_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($citation_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_citation>
      <BMRBo:subsystem_citation rdf:about="{$base}/subsystem_citation/{$assembly_subsystem_id_encoded},{$citation_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_citation>
      </BMRBo:has_subsystem_citation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_common_nameCategory/BMRBx:subsystem_common_name">
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_common_name>
      <BMRBo:subsystem_common_name rdf:about="{$base}/subsystem_common_name/{$assembly_subsystem_id_encoded},{$entry_id_encoded},{$name_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_common_name>
      </BMRBo:has_subsystem_common_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_common_nameCategory/BMRBx:subsystem_common_name">
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_common_name>
      <BMRBo:subsystem_common_name rdf:about="{$base}/subsystem_common_name/{$assembly_subsystem_id_encoded},{$entry_id_encoded},{$name_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_common_name>
      </BMRBo:has_subsystem_common_name>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_componentCategory/BMRBx:subsystem_component">
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_component>
      <BMRBo:subsystem_component rdf:about="{$base}/subsystem_component/{$assembly_subsystem_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_component>
      </BMRBo:has_subsystem_component>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_componentCategory/BMRBx:subsystem_component">
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_component>
      <BMRBo:subsystem_component rdf:about="{$base}/subsystem_component/{$assembly_subsystem_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_component>
      </BMRBo:has_subsystem_component>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_db_linkCategory/BMRBx:subsystem_db_link">
      <xsl:variable name="accession_code_truncated"><xsl:choose><xsl:when test="string-length(@accession_code)&lt;64"><xsl:value-of select="@accession_code"/></xsl:when><xsl:when test="contains(@accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="database_code_truncated"><xsl:choose><xsl:when test="string-length(@database_code)&lt;64"><xsl:value-of select="@database_code"/></xsl:when><xsl:when test="contains(@database_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_db_link>
      <BMRBo:subsystem_db_link rdf:about="{$base}/subsystem_db_link/{$accession_code_encoded},{$assembly_subsystem_id_encoded},{$database_code_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_db_link>
      </BMRBo:has_subsystem_db_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_db_linkCategory/BMRBx:subsystem_db_link">
      <xsl:variable name="accession_code_truncated"><xsl:choose><xsl:when test="string-length(@accession_code)&lt;64"><xsl:value-of select="@accession_code"/></xsl:when><xsl:when test="contains(@accession_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@accession_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@accession_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="accession_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($accession_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="database_code_truncated"><xsl:choose><xsl:when test="string-length(@database_code)&lt;64"><xsl:value-of select="@database_code"/></xsl:when><xsl:when test="contains(@database_code,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@database_code,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@database_code,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="database_code_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($database_code_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_db_link>
      <BMRBo:subsystem_db_link rdf:about="{$base}/subsystem_db_link/{$accession_code_encoded},{$assembly_subsystem_id_encoded},{$database_code_encoded},{$entry_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_db_link>
      </BMRBo:has_subsystem_db_link>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_keywordCategory/BMRBx:subsystem_keyword">
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keyword_truncated"><xsl:choose><xsl:when test="string-length(@keyword)&lt;64"><xsl:value-of select="@keyword"/></xsl:when><xsl:when test="contains(@keyword,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keyword,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keyword,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keyword_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keyword_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_keyword>
      <BMRBo:subsystem_keyword rdf:about="{$base}/subsystem_keyword/{$assembly_subsystem_id_encoded},{$entry_id_encoded},{$keyword_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_keyword>
      </BMRBo:has_subsystem_keyword>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_keywordCategory/BMRBx:subsystem_keyword">
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="keyword_truncated"><xsl:choose><xsl:when test="string-length(@keyword)&lt;64"><xsl:value-of select="@keyword"/></xsl:when><xsl:when test="contains(@keyword,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@keyword,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@keyword,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="keyword_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($keyword_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_keyword>
      <BMRBo:subsystem_keyword rdf:about="{$base}/subsystem_keyword/{$assembly_subsystem_id_encoded},{$entry_id_encoded},{$keyword_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_keyword>
      </BMRBo:has_subsystem_keyword>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_typeCategory/BMRBx:subsystem_type">
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_type>
      <BMRBo:subsystem_type rdf:about="{$base}/subsystem_type/{$assembly_subsystem_id_encoded},{$entry_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_type>
      </BMRBo:has_subsystem_type>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:subsystem_typeCategory/BMRBx:subsystem_type">
      <xsl:variable name="assembly_subsystem_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_subsystem_id)&lt;64"><xsl:value-of select="@assembly_subsystem_id"/></xsl:when><xsl:when test="contains(@assembly_subsystem_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_subsystem_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_subsystem_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_subsystem_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_subsystem_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_subsystem_type>
      <BMRBo:subsystem_type rdf:about="{$base}/subsystem_type/{$assembly_subsystem_id_encoded},{$entry_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:subsystem_type>
      </BMRBo:has_subsystem_type>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:systematic_chem_shift_offsetCategory/BMRBx:systematic_chem_shift_offset">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_systematic_chem_shift_offset>
      <BMRBo:systematic_chem_shift_offset rdf:about="{$base}/systematic_chem_shift_offset/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:systematic_chem_shift_offset>
      </BMRBo:has_systematic_chem_shift_offset>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:systematic_chem_shift_offsetCategory/BMRBx:systematic_chem_shift_offset">
      <xsl:variable name="assigned_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@assigned_chem_shift_list_id)&lt;64"><xsl:value-of select="@assigned_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@assigned_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assigned_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assigned_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assigned_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assigned_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="type_truncated"><xsl:choose><xsl:when test="string-length(@type)&lt;64"><xsl:value-of select="@type"/></xsl:when><xsl:when test="contains(@type,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@type,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@type,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="type_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($type_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_systematic_chem_shift_offset>
      <BMRBo:systematic_chem_shift_offset rdf:about="{$base}/systematic_chem_shift_offset/{$assigned_chem_shift_list_id_encoded},{$entry_id_encoded},{$type_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:systematic_chem_shift_offset>
      </BMRBo:has_systematic_chem_shift_offset>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:t1Category/BMRBx:t1">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t1_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t1_list_id)&lt;64"><xsl:value-of select="@heteronucl_t1_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t1_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t1_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t1_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t1_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t1_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_t1>
      <BMRBo:t1 rdf:about="{$base}/t1/{$entry_id_encoded},{$heteronucl_t1_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_t1 rdf:resource="{$base}/t1/{$entry_id_encoded},{$heteronucl_t1_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_272_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:t1>
      </BMRBo:has_t1>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:t1Category/BMRBx:t1">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t1_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t1_list_id)&lt;64"><xsl:value-of select="@heteronucl_t1_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t1_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t1_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t1_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t1_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t1_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_t1>
      <BMRBo:t1 rdf:about="{$base}/t1/{$entry_id_encoded},{$heteronucl_t1_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_t1 rdf:resource="{$base}/t1/{$entry_id_encoded},{$heteronucl_t1_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_272_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:t1>
      </BMRBo:has_t1>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:t1rhoCategory/BMRBx:t1rho">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t1rho_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t1rho_list_id)&lt;64"><xsl:value-of select="@heteronucl_t1rho_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t1rho_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t1rho_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t1rho_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t1rho_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t1rho_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_t1rho>
      <BMRBo:t1rho rdf:about="{$base}/t1rho/{$entry_id_encoded},{$heteronucl_t1rho_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_t1rho rdf:resource="{$base}/t1rho/{$entry_id_encoded},{$heteronucl_t1rho_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_273_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:t1rho>
      </BMRBo:has_t1rho>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:t1rhoCategory/BMRBx:t1rho">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t1rho_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t1rho_list_id)&lt;64"><xsl:value-of select="@heteronucl_t1rho_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t1rho_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t1rho_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t1rho_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t1rho_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t1rho_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_t1rho>
      <BMRBo:t1rho rdf:about="{$base}/t1rho/{$entry_id_encoded},{$heteronucl_t1rho_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_t1rho rdf:resource="{$base}/t1rho/{$entry_id_encoded},{$heteronucl_t1rho_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_273_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:t1rho>
      </BMRBo:has_t1rho>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:t2Category/BMRBx:t2">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t2_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t2_list_id)&lt;64"><xsl:value-of select="@heteronucl_t2_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t2_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t2_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t2_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t2_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t2_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_t2>
      <BMRBo:t2 rdf:about="{$base}/t2/{$entry_id_encoded},{$heteronucl_t2_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_t2 rdf:resource="{$base}/t2/{$entry_id_encoded},{$heteronucl_t2_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_274_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:t2>
      </BMRBo:has_t2>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:t2Category/BMRBx:t2">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="heteronucl_t2_list_id_truncated"><xsl:choose><xsl:when test="string-length(@heteronucl_t2_list_id)&lt;64"><xsl:value-of select="@heteronucl_t2_list_id"/></xsl:when><xsl:when test="contains(@heteronucl_t2_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@heteronucl_t2_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@heteronucl_t2_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="heteronucl_t2_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($heteronucl_t2_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_t2>
      <BMRBo:t2 rdf:about="{$base}/t2/{$entry_id_encoded},{$heteronucl_t2_list_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_t2 rdf:resource="{$base}/t2/{$entry_id_encoded},{$heteronucl_t2_list_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_274_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:t2>
      </BMRBo:has_t2>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ta_constraint_comment_orgCategory/BMRBx:ta_constraint_comment_org">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ta_constraint_comment_org>
      <BMRBo:ta_constraint_comment_org rdf:about="{$base}/ta_constraint_comment_org/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ta_constraint_comment_org rdf:resource="{$base}/ta_constraint_comment_org/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_275_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ta_constraint_comment_org>
      </BMRBo:has_ta_constraint_comment_org>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ta_constraint_comment_orgCategory/BMRBx:ta_constraint_comment_org">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ta_constraint_comment_org>
      <BMRBo:ta_constraint_comment_org rdf:about="{$base}/ta_constraint_comment_org/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ta_constraint_comment_org rdf:resource="{$base}/ta_constraint_comment_org/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_275_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ta_constraint_comment_org>
      </BMRBo:has_ta_constraint_comment_org>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ta_constraint_conv_errCategory/BMRBx:ta_constraint_conv_err">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ta_constraint_conv_err>
      <BMRBo:ta_constraint_conv_err rdf:about="{$base}/ta_constraint_conv_err/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ta_constraint_conv_err rdf:resource="{$base}/ta_constraint_conv_err/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_276_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ta_constraint_conv_err>
      </BMRBo:has_ta_constraint_conv_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ta_constraint_conv_errCategory/BMRBx:ta_constraint_conv_err">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ta_constraint_conv_err>
      <BMRBo:ta_constraint_conv_err rdf:about="{$base}/ta_constraint_conv_err/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ta_constraint_conv_err rdf:resource="{$base}/ta_constraint_conv_err/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_276_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ta_constraint_conv_err>
      </BMRBo:has_ta_constraint_conv_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ta_constraint_parse_errCategory/BMRBx:ta_constraint_parse_err">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ta_constraint_parse_err>
      <BMRBo:ta_constraint_parse_err rdf:about="{$base}/ta_constraint_parse_err/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ta_constraint_parse_err rdf:resource="{$base}/ta_constraint_parse_err/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_277_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ta_constraint_parse_err>
      </BMRBo:has_ta_constraint_parse_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ta_constraint_parse_errCategory/BMRBx:ta_constraint_parse_err">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ta_constraint_parse_err>
      <BMRBo:ta_constraint_parse_err rdf:about="{$base}/ta_constraint_parse_err/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ta_constraint_parse_err rdf:resource="{$base}/ta_constraint_parse_err/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_277_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ta_constraint_parse_err>
      </BMRBo:has_ta_constraint_parse_err>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ta_constraint_parse_fileCategory/BMRBx:ta_constraint_parse_file">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ta_constraint_parse_file>
      <BMRBo:ta_constraint_parse_file rdf:about="{$base}/ta_constraint_parse_file/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ta_constraint_parse_file rdf:resource="{$base}/ta_constraint_parse_file/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_278_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ta_constraint_parse_file>
      </BMRBo:has_ta_constraint_parse_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:ta_constraint_parse_fileCategory/BMRBx:ta_constraint_parse_file">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_ta_constraint_parse_file>
      <BMRBo:ta_constraint_parse_file rdf:about="{$base}/ta_constraint_parse_file/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_ta_constraint_parse_file rdf:resource="{$base}/ta_constraint_parse_file/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_278_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:ta_constraint_parse_file>
      </BMRBo:has_ta_constraint_parse_file>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:taskCategory/BMRBx:task">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="task_truncated"><xsl:choose><xsl:when test="string-length(@task)&lt;64"><xsl:value-of select="@task"/></xsl:when><xsl:when test="contains(@task,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@task,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@task,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="task_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($task_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_task>
      <BMRBo:task rdf:about="{$base}/task/{$entry_id_encoded},{$software_id_encoded},{$task_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:task>
      </BMRBo:has_task>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:taskCategory/BMRBx:task">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="task_truncated"><xsl:choose><xsl:when test="string-length(@task)&lt;64"><xsl:value-of select="@task"/></xsl:when><xsl:when test="contains(@task,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@task,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@task,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="task_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($task_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_task>
      <BMRBo:task rdf:about="{$base}/task/{$entry_id_encoded},{$software_id_encoded},{$task_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:task>
      </BMRBo:has_task>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:tensorCategory/BMRBx:tensor">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="tensor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@tensor_list_id)&lt;64"><xsl:value-of select="@tensor_list_id"/></xsl:when><xsl:when test="contains(@tensor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@tensor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@tensor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="tensor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($tensor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_tensor>
      <BMRBo:tensor rdf:about="{$base}/tensor/{$entry_id_encoded},{$id_encoded},{$tensor_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:tensor>
      </BMRBo:has_tensor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:tensorCategory/BMRBx:tensor">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="tensor_list_id_truncated"><xsl:choose><xsl:when test="string-length(@tensor_list_id)&lt;64"><xsl:value-of select="@tensor_list_id"/></xsl:when><xsl:when test="contains(@tensor_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@tensor_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@tensor_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="tensor_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($tensor_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_tensor>
      <BMRBo:tensor rdf:about="{$base}/tensor/{$entry_id_encoded},{$id_encoded},{$tensor_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:tensor>
      </BMRBo:has_tensor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:tensor_listCategory/BMRBx:tensor_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_tensor_list>
      <BMRBo:tensor_list rdf:about="{$base}/tensor_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_tensor_list rdf:resource="{$base}/tensor_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_279_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:tensor_list>
      </BMRBo:has_tensor_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:tensor_listCategory/BMRBx:tensor_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_tensor_list>
      <BMRBo:tensor_list rdf:about="{$base}/tensor_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_tensor_list rdf:resource="{$base}/tensor_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_279_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:tensor_list>
      </BMRBo:has_tensor_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:terminal_residueCategory/BMRBx:terminal_residue">
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="representative_conformer_id_truncated"><xsl:choose><xsl:when test="string-length(@representative_conformer_id)&lt;64"><xsl:value-of select="@representative_conformer_id"/></xsl:when><xsl:when test="contains(@representative_conformer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@representative_conformer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@representative_conformer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="representative_conformer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($representative_conformer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_terminal_residue>
      <BMRBo:terminal_residue rdf:about="{$base}/terminal_residue/{$comp_index_id_encoded},{$entity_id_encoded},{$entry_id_encoded},{$representative_conformer_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_terminal_residue rdf:resource="{$base}/terminal_residue/{$comp_index_id_encoded},{$entity_id_encoded},{$entry_id_encoded},{$representative_conformer_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_280_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:terminal_residue>
      </BMRBo:has_terminal_residue>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:terminal_residueCategory/BMRBx:terminal_residue">
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_id)&lt;64"><xsl:value-of select="@entity_id"/></xsl:when><xsl:when test="contains(@entity_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="representative_conformer_id_truncated"><xsl:choose><xsl:when test="string-length(@representative_conformer_id)&lt;64"><xsl:value-of select="@representative_conformer_id"/></xsl:when><xsl:when test="contains(@representative_conformer_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@representative_conformer_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@representative_conformer_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="representative_conformer_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($representative_conformer_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_terminal_residue>
      <BMRBo:terminal_residue rdf:about="{$base}/terminal_residue/{$comp_index_id_encoded},{$entity_id_encoded},{$entry_id_encoded},{$representative_conformer_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_terminal_residue rdf:resource="{$base}/terminal_residue/{$comp_index_id_encoded},{$entity_id_encoded},{$entry_id_encoded},{$representative_conformer_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_280_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:terminal_residue>
      </BMRBo:has_terminal_residue>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:tertiary_structCategory/BMRBx:tertiary_struct">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="tertiary_struct_element_list_id_truncated"><xsl:choose><xsl:when test="string-length(@tertiary_struct_element_list_id)&lt;64"><xsl:value-of select="@tertiary_struct_element_list_id"/></xsl:when><xsl:when test="contains(@tertiary_struct_element_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@tertiary_struct_element_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@tertiary_struct_element_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="tertiary_struct_element_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($tertiary_struct_element_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_tertiary_struct>
      <BMRBo:tertiary_struct rdf:about="{$base}/tertiary_struct/{$atom_id_encoded},{$comp_index_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded},{$id_encoded},{$tertiary_struct_element_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_tertiary_struct rdf:resource="{$base}/tertiary_struct/{$atom_id_encoded},{$comp_index_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded},{$id_encoded},{$tertiary_struct_element_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_281_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:tertiary_struct>
      </BMRBo:has_tertiary_struct>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:tertiary_structCategory/BMRBx:tertiary_struct">
      <xsl:variable name="atom_id_truncated"><xsl:choose><xsl:when test="string-length(@atom_id)&lt;64"><xsl:value-of select="@atom_id"/></xsl:when><xsl:when test="contains(@atom_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@atom_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@atom_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="atom_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($atom_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="comp_index_id_truncated"><xsl:choose><xsl:when test="string-length(@comp_index_id)&lt;64"><xsl:value-of select="@comp_index_id"/></xsl:when><xsl:when test="contains(@comp_index_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@comp_index_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@comp_index_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="comp_index_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($comp_index_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entity_assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@entity_assembly_id)&lt;64"><xsl:value-of select="@entity_assembly_id"/></xsl:when><xsl:when test="contains(@entity_assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entity_assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entity_assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entity_assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entity_assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="tertiary_struct_element_list_id_truncated"><xsl:choose><xsl:when test="string-length(@tertiary_struct_element_list_id)&lt;64"><xsl:value-of select="@tertiary_struct_element_list_id"/></xsl:when><xsl:when test="contains(@tertiary_struct_element_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@tertiary_struct_element_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@tertiary_struct_element_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="tertiary_struct_element_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($tertiary_struct_element_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_tertiary_struct>
      <BMRBo:tertiary_struct rdf:about="{$base}/tertiary_struct/{$atom_id_encoded},{$comp_index_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded},{$id_encoded},{$tertiary_struct_element_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_tertiary_struct rdf:resource="{$base}/tertiary_struct/{$atom_id_encoded},{$comp_index_id_encoded},{$entity_assembly_id_encoded},{$entry_id_encoded},{$id_encoded},{$tertiary_struct_element_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_281_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:tertiary_struct>
      </BMRBo:has_tertiary_struct>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:tertiary_struct_element_listCategory/BMRBx:tertiary_struct_element_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_tertiary_struct_element_list>
      <BMRBo:tertiary_struct_element_list rdf:about="{$base}/tertiary_struct_element_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_tertiary_struct_element_list rdf:resource="{$base}/tertiary_struct_element_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_282_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:tertiary_struct_element_list>
      </BMRBo:has_tertiary_struct_element_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:tertiary_struct_element_listCategory/BMRBx:tertiary_struct_element_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_tertiary_struct_element_list>
      <BMRBo:tertiary_struct_element_list rdf:about="{$base}/tertiary_struct_element_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_tertiary_struct_element_list rdf:resource="{$base}/tertiary_struct_element_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_282_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:tertiary_struct_element_list>
      </BMRBo:has_tertiary_struct_element_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:tertiary_struct_element_selCategory/BMRBx:tertiary_struct_element_sel">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="method_id_truncated"><xsl:choose><xsl:when test="string-length(@method_id)&lt;64"><xsl:value-of select="@method_id"/></xsl:when><xsl:when test="contains(@method_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@method_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@method_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="method_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($method_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="tertiary_struct_element_list_id_truncated"><xsl:choose><xsl:when test="string-length(@tertiary_struct_element_list_id)&lt;64"><xsl:value-of select="@tertiary_struct_element_list_id"/></xsl:when><xsl:when test="contains(@tertiary_struct_element_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@tertiary_struct_element_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@tertiary_struct_element_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="tertiary_struct_element_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($tertiary_struct_element_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_tertiary_struct_element_sel>
      <BMRBo:tertiary_struct_element_sel rdf:about="{$base}/tertiary_struct_element_sel/{$entry_id_encoded},{$method_id_encoded},{$tertiary_struct_element_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_tertiary_struct_element_sel rdf:resource="{$base}/tertiary_struct_element_sel/{$entry_id_encoded},{$method_id_encoded},{$tertiary_struct_element_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_283_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:tertiary_struct_element_sel>
      </BMRBo:has_tertiary_struct_element_sel>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:tertiary_struct_element_selCategory/BMRBx:tertiary_struct_element_sel">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="method_id_truncated"><xsl:choose><xsl:when test="string-length(@method_id)&lt;64"><xsl:value-of select="@method_id"/></xsl:when><xsl:when test="contains(@method_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@method_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@method_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="method_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($method_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="tertiary_struct_element_list_id_truncated"><xsl:choose><xsl:when test="string-length(@tertiary_struct_element_list_id)&lt;64"><xsl:value-of select="@tertiary_struct_element_list_id"/></xsl:when><xsl:when test="contains(@tertiary_struct_element_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@tertiary_struct_element_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@tertiary_struct_element_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="tertiary_struct_element_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($tertiary_struct_element_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_tertiary_struct_element_sel>
      <BMRBo:tertiary_struct_element_sel rdf:about="{$base}/tertiary_struct_element_sel/{$entry_id_encoded},{$method_id_encoded},{$tertiary_struct_element_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_tertiary_struct_element_sel rdf:resource="{$base}/tertiary_struct_element_sel/{$entry_id_encoded},{$method_id_encoded},{$tertiary_struct_element_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_283_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:tertiary_struct_element_sel>
      </BMRBo:has_tertiary_struct_element_sel>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_auto_relaxationCategory/BMRBx:theoretical_auto_relaxation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_auto_relaxation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_auto_relaxation_list_id)&lt;64"><xsl:value-of select="@theoretical_auto_relaxation_list_id"/></xsl:when><xsl:when test="contains(@theoretical_auto_relaxation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_auto_relaxation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_auto_relaxation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_auto_relaxation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_auto_relaxation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_auto_relaxation>
      <BMRBo:theoretical_auto_relaxation rdf:about="{$base}/theoretical_auto_relaxation/{$entry_id_encoded},{$id_encoded},{$theoretical_auto_relaxation_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_auto_relaxation rdf:resource="{$base}/theoretical_auto_relaxation/{$entry_id_encoded},{$id_encoded},{$theoretical_auto_relaxation_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_284_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_auto_relaxation>
      </BMRBo:has_theoretical_auto_relaxation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_auto_relaxationCategory/BMRBx:theoretical_auto_relaxation">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_auto_relaxation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_auto_relaxation_list_id)&lt;64"><xsl:value-of select="@theoretical_auto_relaxation_list_id"/></xsl:when><xsl:when test="contains(@theoretical_auto_relaxation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_auto_relaxation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_auto_relaxation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_auto_relaxation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_auto_relaxation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_auto_relaxation>
      <BMRBo:theoretical_auto_relaxation rdf:about="{$base}/theoretical_auto_relaxation/{$entry_id_encoded},{$id_encoded},{$theoretical_auto_relaxation_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_auto_relaxation rdf:resource="{$base}/theoretical_auto_relaxation/{$entry_id_encoded},{$id_encoded},{$theoretical_auto_relaxation_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_284_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_auto_relaxation>
      </BMRBo:has_theoretical_auto_relaxation>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_auto_relaxation_experimentCategory/BMRBx:theoretical_auto_relaxation_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_auto_relaxation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_auto_relaxation_list_id)&lt;64"><xsl:value-of select="@theoretical_auto_relaxation_list_id"/></xsl:when><xsl:when test="contains(@theoretical_auto_relaxation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_auto_relaxation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_auto_relaxation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_auto_relaxation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_auto_relaxation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_auto_relaxation_experiment>
      <BMRBo:theoretical_auto_relaxation_experiment rdf:about="{$base}/theoretical_auto_relaxation_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_auto_relaxation_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_auto_relaxation_experiment rdf:resource="{$base}/theoretical_auto_relaxation_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_auto_relaxation_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_285_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_auto_relaxation_experiment>
      </BMRBo:has_theoretical_auto_relaxation_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_auto_relaxation_experimentCategory/BMRBx:theoretical_auto_relaxation_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_auto_relaxation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_auto_relaxation_list_id)&lt;64"><xsl:value-of select="@theoretical_auto_relaxation_list_id"/></xsl:when><xsl:when test="contains(@theoretical_auto_relaxation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_auto_relaxation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_auto_relaxation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_auto_relaxation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_auto_relaxation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_auto_relaxation_experiment>
      <BMRBo:theoretical_auto_relaxation_experiment rdf:about="{$base}/theoretical_auto_relaxation_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_auto_relaxation_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_auto_relaxation_experiment rdf:resource="{$base}/theoretical_auto_relaxation_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_auto_relaxation_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_285_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_auto_relaxation_experiment>
      </BMRBo:has_theoretical_auto_relaxation_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_auto_relaxation_listCategory/BMRBx:theoretical_auto_relaxation_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_auto_relaxation_list>
      <BMRBo:theoretical_auto_relaxation_list rdf:about="{$base}/theoretical_auto_relaxation_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_auto_relaxation_list rdf:resource="{$base}/theoretical_auto_relaxation_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_286_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_auto_relaxation_list>
      </BMRBo:has_theoretical_auto_relaxation_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_auto_relaxation_listCategory/BMRBx:theoretical_auto_relaxation_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_auto_relaxation_list>
      <BMRBo:theoretical_auto_relaxation_list rdf:about="{$base}/theoretical_auto_relaxation_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_auto_relaxation_list rdf:resource="{$base}/theoretical_auto_relaxation_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_286_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_auto_relaxation_list>
      </BMRBo:has_theoretical_auto_relaxation_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_auto_relaxation_softwareCategory/BMRBx:theoretical_auto_relaxation_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_auto_relaxation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_auto_relaxation_list_id)&lt;64"><xsl:value-of select="@theoretical_auto_relaxation_list_id"/></xsl:when><xsl:when test="contains(@theoretical_auto_relaxation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_auto_relaxation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_auto_relaxation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_auto_relaxation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_auto_relaxation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_auto_relaxation_software>
      <BMRBo:theoretical_auto_relaxation_software rdf:about="{$base}/theoretical_auto_relaxation_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_auto_relaxation_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_auto_relaxation_software rdf:resource="{$base}/theoretical_auto_relaxation_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_auto_relaxation_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_287_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_auto_relaxation_software>
      </BMRBo:has_theoretical_auto_relaxation_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_auto_relaxation_softwareCategory/BMRBx:theoretical_auto_relaxation_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_auto_relaxation_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_auto_relaxation_list_id)&lt;64"><xsl:value-of select="@theoretical_auto_relaxation_list_id"/></xsl:when><xsl:when test="contains(@theoretical_auto_relaxation_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_auto_relaxation_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_auto_relaxation_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_auto_relaxation_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_auto_relaxation_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_auto_relaxation_software>
      <BMRBo:theoretical_auto_relaxation_software rdf:about="{$base}/theoretical_auto_relaxation_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_auto_relaxation_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_auto_relaxation_software rdf:resource="{$base}/theoretical_auto_relaxation_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_auto_relaxation_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_287_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_auto_relaxation_software>
      </BMRBo:has_theoretical_auto_relaxation_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_chem_shiftCategory/BMRBx:theoretical_chem_shift">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_chem_shift_list_id)&lt;64"><xsl:value-of select="@theoretical_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@theoretical_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_chem_shift>
      <BMRBo:theoretical_chem_shift rdf:about="{$base}/theoretical_chem_shift/{$entry_id_encoded},{$id_encoded},{$theoretical_chem_shift_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_chem_shift rdf:resource="{$base}/theoretical_chem_shift/{$entry_id_encoded},{$id_encoded},{$theoretical_chem_shift_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_288_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_chem_shift>
      </BMRBo:has_theoretical_chem_shift>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_chem_shiftCategory/BMRBx:theoretical_chem_shift">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_chem_shift_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_chem_shift_list_id)&lt;64"><xsl:value-of select="@theoretical_chem_shift_list_id"/></xsl:when><xsl:when test="contains(@theoretical_chem_shift_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_chem_shift_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_chem_shift_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_chem_shift_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_chem_shift_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_chem_shift>
      <BMRBo:theoretical_chem_shift rdf:about="{$base}/theoretical_chem_shift/{$entry_id_encoded},{$id_encoded},{$theoretical_chem_shift_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_chem_shift rdf:resource="{$base}/theoretical_chem_shift/{$entry_id_encoded},{$id_encoded},{$theoretical_chem_shift_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_288_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_chem_shift>
      </BMRBo:has_theoretical_chem_shift>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_chem_shift_listCategory/BMRBx:theoretical_chem_shift_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_chem_shift_list>
      <BMRBo:theoretical_chem_shift_list rdf:about="{$base}/theoretical_chem_shift_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_chem_shift_list rdf:resource="{$base}/theoretical_chem_shift_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_289_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_chem_shift_list>
      </BMRBo:has_theoretical_chem_shift_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_chem_shift_listCategory/BMRBx:theoretical_chem_shift_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_chem_shift_list>
      <BMRBo:theoretical_chem_shift_list rdf:about="{$base}/theoretical_chem_shift_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_chem_shift_list rdf:resource="{$base}/theoretical_chem_shift_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_289_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_chem_shift_list>
      </BMRBo:has_theoretical_chem_shift_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_coupling_constantCategory/BMRBx:theoretical_coupling_constant">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_coupling_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_coupling_constant_list_id)&lt;64"><xsl:value-of select="@theoretical_coupling_constant_list_id"/></xsl:when><xsl:when test="contains(@theoretical_coupling_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_coupling_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_coupling_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_coupling_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_coupling_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_coupling_constant>
      <BMRBo:theoretical_coupling_constant rdf:about="{$base}/theoretical_coupling_constant/{$entry_id_encoded},{$id_encoded},{$theoretical_coupling_constant_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_coupling_constant>
      </BMRBo:has_theoretical_coupling_constant>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_coupling_constantCategory/BMRBx:theoretical_coupling_constant">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_coupling_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_coupling_constant_list_id)&lt;64"><xsl:value-of select="@theoretical_coupling_constant_list_id"/></xsl:when><xsl:when test="contains(@theoretical_coupling_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_coupling_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_coupling_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_coupling_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_coupling_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_coupling_constant>
      <BMRBo:theoretical_coupling_constant rdf:about="{$base}/theoretical_coupling_constant/{$entry_id_encoded},{$id_encoded},{$theoretical_coupling_constant_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_coupling_constant>
      </BMRBo:has_theoretical_coupling_constant>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_coupling_constant_experimentCategory/BMRBx:theoretical_coupling_constant_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_coupling_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_coupling_constant_list_id)&lt;64"><xsl:value-of select="@theoretical_coupling_constant_list_id"/></xsl:when><xsl:when test="contains(@theoretical_coupling_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_coupling_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_coupling_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_coupling_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_coupling_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_coupling_constant_experiment>
      <BMRBo:theoretical_coupling_constant_experiment rdf:about="{$base}/theoretical_coupling_constant_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_coupling_constant_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_coupling_constant_experiment>
      </BMRBo:has_theoretical_coupling_constant_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_coupling_constant_experimentCategory/BMRBx:theoretical_coupling_constant_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_coupling_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_coupling_constant_list_id)&lt;64"><xsl:value-of select="@theoretical_coupling_constant_list_id"/></xsl:when><xsl:when test="contains(@theoretical_coupling_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_coupling_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_coupling_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_coupling_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_coupling_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_coupling_constant_experiment>
      <BMRBo:theoretical_coupling_constant_experiment rdf:about="{$base}/theoretical_coupling_constant_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_coupling_constant_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_coupling_constant_experiment>
      </BMRBo:has_theoretical_coupling_constant_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_coupling_constant_listCategory/BMRBx:theoretical_coupling_constant_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_coupling_constant_list>
      <BMRBo:theoretical_coupling_constant_list rdf:about="{$base}/theoretical_coupling_constant_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_coupling_constant_list rdf:resource="{$base}/theoretical_coupling_constant_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_290_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_coupling_constant_list>
      </BMRBo:has_theoretical_coupling_constant_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_coupling_constant_listCategory/BMRBx:theoretical_coupling_constant_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_coupling_constant_list>
      <BMRBo:theoretical_coupling_constant_list rdf:about="{$base}/theoretical_coupling_constant_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_coupling_constant_list rdf:resource="{$base}/theoretical_coupling_constant_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_290_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_coupling_constant_list>
      </BMRBo:has_theoretical_coupling_constant_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_coupling_constant_softwareCategory/BMRBx:theoretical_coupling_constant_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_coupling_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_coupling_constant_list_id)&lt;64"><xsl:value-of select="@theoretical_coupling_constant_list_id"/></xsl:when><xsl:when test="contains(@theoretical_coupling_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_coupling_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_coupling_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_coupling_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_coupling_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_coupling_constant_software>
      <BMRBo:theoretical_coupling_constant_software rdf:about="{$base}/theoretical_coupling_constant_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_coupling_constant_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_coupling_constant_software>
      </BMRBo:has_theoretical_coupling_constant_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_coupling_constant_softwareCategory/BMRBx:theoretical_coupling_constant_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_coupling_constant_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_coupling_constant_list_id)&lt;64"><xsl:value-of select="@theoretical_coupling_constant_list_id"/></xsl:when><xsl:when test="contains(@theoretical_coupling_constant_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_coupling_constant_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_coupling_constant_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_coupling_constant_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_coupling_constant_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_coupling_constant_software>
      <BMRBo:theoretical_coupling_constant_software rdf:about="{$base}/theoretical_coupling_constant_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_coupling_constant_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_coupling_constant_software>
      </BMRBo:has_theoretical_coupling_constant_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_cross_correlation_ddCategory/BMRBx:theoretical_cross_correlation_dd">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_cross_correlation_dd_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_cross_correlation_dd_list_id)&lt;64"><xsl:value-of select="@theoretical_cross_correlation_dd_list_id"/></xsl:when><xsl:when test="contains(@theoretical_cross_correlation_dd_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_cross_correlation_dd_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_cross_correlation_dd_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_cross_correlation_dd_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_cross_correlation_dd_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_cross_correlation_dd>
      <BMRBo:theoretical_cross_correlation_dd rdf:about="{$base}/theoretical_cross_correlation_dd/{$entry_id_encoded},{$id_encoded},{$theoretical_cross_correlation_dd_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_cross_correlation_dd rdf:resource="{$base}/theoretical_cross_correlation_dd/{$entry_id_encoded},{$id_encoded},{$theoretical_cross_correlation_dd_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_291_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_cross_correlation_dd>
      </BMRBo:has_theoretical_cross_correlation_dd>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_cross_correlation_ddCategory/BMRBx:theoretical_cross_correlation_dd">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_cross_correlation_dd_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_cross_correlation_dd_list_id)&lt;64"><xsl:value-of select="@theoretical_cross_correlation_dd_list_id"/></xsl:when><xsl:when test="contains(@theoretical_cross_correlation_dd_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_cross_correlation_dd_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_cross_correlation_dd_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_cross_correlation_dd_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_cross_correlation_dd_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_cross_correlation_dd>
      <BMRBo:theoretical_cross_correlation_dd rdf:about="{$base}/theoretical_cross_correlation_dd/{$entry_id_encoded},{$id_encoded},{$theoretical_cross_correlation_dd_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_cross_correlation_dd rdf:resource="{$base}/theoretical_cross_correlation_dd/{$entry_id_encoded},{$id_encoded},{$theoretical_cross_correlation_dd_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_291_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_cross_correlation_dd>
      </BMRBo:has_theoretical_cross_correlation_dd>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_cross_correlation_dd_experimentCategory/BMRBx:theoretical_cross_correlation_dd_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_cross_correlation_dd_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_cross_correlation_dd_list_id)&lt;64"><xsl:value-of select="@theoretical_cross_correlation_dd_list_id"/></xsl:when><xsl:when test="contains(@theoretical_cross_correlation_dd_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_cross_correlation_dd_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_cross_correlation_dd_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_cross_correlation_dd_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_cross_correlation_dd_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_cross_correlation_dd_experiment>
      <BMRBo:theoretical_cross_correlation_dd_experiment rdf:about="{$base}/theoretical_cross_correlation_dd_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_cross_correlation_dd_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_cross_correlation_dd_experiment rdf:resource="{$base}/theoretical_cross_correlation_dd_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_cross_correlation_dd_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_292_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_cross_correlation_dd_experiment>
      </BMRBo:has_theoretical_cross_correlation_dd_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_cross_correlation_dd_experimentCategory/BMRBx:theoretical_cross_correlation_dd_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_cross_correlation_dd_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_cross_correlation_dd_list_id)&lt;64"><xsl:value-of select="@theoretical_cross_correlation_dd_list_id"/></xsl:when><xsl:when test="contains(@theoretical_cross_correlation_dd_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_cross_correlation_dd_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_cross_correlation_dd_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_cross_correlation_dd_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_cross_correlation_dd_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_cross_correlation_dd_experiment>
      <BMRBo:theoretical_cross_correlation_dd_experiment rdf:about="{$base}/theoretical_cross_correlation_dd_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_cross_correlation_dd_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_cross_correlation_dd_experiment rdf:resource="{$base}/theoretical_cross_correlation_dd_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_cross_correlation_dd_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_292_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_cross_correlation_dd_experiment>
      </BMRBo:has_theoretical_cross_correlation_dd_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_cross_correlation_dd_listCategory/BMRBx:theoretical_cross_correlation_dd_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_cross_correlation_dd_list>
      <BMRBo:theoretical_cross_correlation_dd_list rdf:about="{$base}/theoretical_cross_correlation_dd_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_cross_correlation_dd_list rdf:resource="{$base}/theoretical_cross_correlation_dd_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_293_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_cross_correlation_dd_list>
      </BMRBo:has_theoretical_cross_correlation_dd_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_cross_correlation_dd_listCategory/BMRBx:theoretical_cross_correlation_dd_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_cross_correlation_dd_list>
      <BMRBo:theoretical_cross_correlation_dd_list rdf:about="{$base}/theoretical_cross_correlation_dd_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_cross_correlation_dd_list rdf:resource="{$base}/theoretical_cross_correlation_dd_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_293_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_cross_correlation_dd_list>
      </BMRBo:has_theoretical_cross_correlation_dd_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_cross_correlation_dd_softwareCategory/BMRBx:theoretical_cross_correlation_dd_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_cross_correlation_dd_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_cross_correlation_dd_list_id)&lt;64"><xsl:value-of select="@theoretical_cross_correlation_dd_list_id"/></xsl:when><xsl:when test="contains(@theoretical_cross_correlation_dd_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_cross_correlation_dd_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_cross_correlation_dd_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_cross_correlation_dd_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_cross_correlation_dd_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_cross_correlation_dd_software>
      <BMRBo:theoretical_cross_correlation_dd_software rdf:about="{$base}/theoretical_cross_correlation_dd_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_cross_correlation_dd_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_cross_correlation_dd_software rdf:resource="{$base}/theoretical_cross_correlation_dd_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_cross_correlation_dd_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_294_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_cross_correlation_dd_software>
      </BMRBo:has_theoretical_cross_correlation_dd_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_cross_correlation_dd_softwareCategory/BMRBx:theoretical_cross_correlation_dd_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_cross_correlation_dd_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_cross_correlation_dd_list_id)&lt;64"><xsl:value-of select="@theoretical_cross_correlation_dd_list_id"/></xsl:when><xsl:when test="contains(@theoretical_cross_correlation_dd_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_cross_correlation_dd_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_cross_correlation_dd_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_cross_correlation_dd_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_cross_correlation_dd_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_cross_correlation_dd_software>
      <BMRBo:theoretical_cross_correlation_dd_software rdf:about="{$base}/theoretical_cross_correlation_dd_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_cross_correlation_dd_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_cross_correlation_dd_software rdf:resource="{$base}/theoretical_cross_correlation_dd_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_cross_correlation_dd_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_294_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_cross_correlation_dd_software>
      </BMRBo:has_theoretical_cross_correlation_dd_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_noeCategory/BMRBx:theoretical_heteronucl_noe">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_noe_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_noe_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_noe>
      <BMRBo:theoretical_heteronucl_noe rdf:about="{$base}/theoretical_heteronucl_noe/{$entry_id_encoded},{$id_encoded},{$theoretical_heteronucl_noe_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_noe rdf:resource="{$base}/theoretical_heteronucl_noe/{$entry_id_encoded},{$id_encoded},{$theoretical_heteronucl_noe_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_295_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_noe>
      </BMRBo:has_theoretical_heteronucl_noe>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_noeCategory/BMRBx:theoretical_heteronucl_noe">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_noe_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_noe_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_noe>
      <BMRBo:theoretical_heteronucl_noe rdf:about="{$base}/theoretical_heteronucl_noe/{$entry_id_encoded},{$id_encoded},{$theoretical_heteronucl_noe_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_noe rdf:resource="{$base}/theoretical_heteronucl_noe/{$entry_id_encoded},{$id_encoded},{$theoretical_heteronucl_noe_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_295_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_noe>
      </BMRBo:has_theoretical_heteronucl_noe>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_noe_experimentCategory/BMRBx:theoretical_heteronucl_noe_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_noe_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_noe_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_noe_experiment>
      <BMRBo:theoretical_heteronucl_noe_experiment rdf:about="{$base}/theoretical_heteronucl_noe_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_heteronucl_noe_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_noe_experiment rdf:resource="{$base}/theoretical_heteronucl_noe_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_heteronucl_noe_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_296_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_noe_experiment>
      </BMRBo:has_theoretical_heteronucl_noe_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_noe_experimentCategory/BMRBx:theoretical_heteronucl_noe_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_noe_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_noe_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_noe_experiment>
      <BMRBo:theoretical_heteronucl_noe_experiment rdf:about="{$base}/theoretical_heteronucl_noe_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_heteronucl_noe_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_noe_experiment rdf:resource="{$base}/theoretical_heteronucl_noe_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_heteronucl_noe_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_296_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_noe_experiment>
      </BMRBo:has_theoretical_heteronucl_noe_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_noe_listCategory/BMRBx:theoretical_heteronucl_noe_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_noe_list>
      <BMRBo:theoretical_heteronucl_noe_list rdf:about="{$base}/theoretical_heteronucl_noe_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_noe_list rdf:resource="{$base}/theoretical_heteronucl_noe_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_297_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_noe_list>
      </BMRBo:has_theoretical_heteronucl_noe_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_noe_listCategory/BMRBx:theoretical_heteronucl_noe_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_noe_list>
      <BMRBo:theoretical_heteronucl_noe_list rdf:about="{$base}/theoretical_heteronucl_noe_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_noe_list rdf:resource="{$base}/theoretical_heteronucl_noe_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_297_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_noe_list>
      </BMRBo:has_theoretical_heteronucl_noe_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_noe_softwareCategory/BMRBx:theoretical_heteronucl_noe_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_noe_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_noe_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_noe_software>
      <BMRBo:theoretical_heteronucl_noe_software rdf:about="{$base}/theoretical_heteronucl_noe_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_heteronucl_noe_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_noe_software rdf:resource="{$base}/theoretical_heteronucl_noe_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_heteronucl_noe_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_298_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_noe_software>
      </BMRBo:has_theoretical_heteronucl_noe_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_noe_softwareCategory/BMRBx:theoretical_heteronucl_noe_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_noe_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_noe_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_noe_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_noe_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_noe_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_noe_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_noe_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_noe_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_noe_software>
      <BMRBo:theoretical_heteronucl_noe_software rdf:about="{$base}/theoretical_heteronucl_noe_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_heteronucl_noe_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_noe_software rdf:resource="{$base}/theoretical_heteronucl_noe_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_heteronucl_noe_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_298_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_noe_software>
      </BMRBo:has_theoretical_heteronucl_noe_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_t1_experimentCategory/BMRBx:theoretical_heteronucl_t1_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t1_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_t1_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_t1_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_t1_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_t1_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_t1_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t1_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_t1_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_t1_experiment>
      <BMRBo:theoretical_heteronucl_t1_experiment rdf:about="{$base}/theoretical_heteronucl_t1_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_heteronucl_t1_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_t1_experiment rdf:resource="{$base}/theoretical_heteronucl_t1_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_heteronucl_t1_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_299_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_t1_experiment>
      </BMRBo:has_theoretical_heteronucl_t1_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_t1_experimentCategory/BMRBx:theoretical_heteronucl_t1_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t1_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_t1_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_t1_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_t1_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_t1_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_t1_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t1_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_t1_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_t1_experiment>
      <BMRBo:theoretical_heteronucl_t1_experiment rdf:about="{$base}/theoretical_heteronucl_t1_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_heteronucl_t1_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_t1_experiment rdf:resource="{$base}/theoretical_heteronucl_t1_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_heteronucl_t1_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_299_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_t1_experiment>
      </BMRBo:has_theoretical_heteronucl_t1_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_t1_listCategory/BMRBx:theoretical_heteronucl_t1_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_t1_list>
      <BMRBo:theoretical_heteronucl_t1_list rdf:about="{$base}/theoretical_heteronucl_t1_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_t1_list rdf:resource="{$base}/theoretical_heteronucl_t1_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_300_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_t1_list>
      </BMRBo:has_theoretical_heteronucl_t1_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_t1_listCategory/BMRBx:theoretical_heteronucl_t1_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_t1_list>
      <BMRBo:theoretical_heteronucl_t1_list rdf:about="{$base}/theoretical_heteronucl_t1_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_t1_list rdf:resource="{$base}/theoretical_heteronucl_t1_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_300_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_t1_list>
      </BMRBo:has_theoretical_heteronucl_t1_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_t1_softwareCategory/BMRBx:theoretical_heteronucl_t1_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t1_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_t1_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_t1_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_t1_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_t1_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_t1_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t1_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_t1_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_t1_software>
      <BMRBo:theoretical_heteronucl_t1_software rdf:about="{$base}/theoretical_heteronucl_t1_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_heteronucl_t1_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_t1_software rdf:resource="{$base}/theoretical_heteronucl_t1_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_heteronucl_t1_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_301_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_t1_software>
      </BMRBo:has_theoretical_heteronucl_t1_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_t1_softwareCategory/BMRBx:theoretical_heteronucl_t1_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t1_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_t1_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_t1_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_t1_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_t1_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_t1_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t1_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_t1_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_t1_software>
      <BMRBo:theoretical_heteronucl_t1_software rdf:about="{$base}/theoretical_heteronucl_t1_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_heteronucl_t1_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_t1_software rdf:resource="{$base}/theoretical_heteronucl_t1_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_heteronucl_t1_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_301_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_t1_software>
      </BMRBo:has_theoretical_heteronucl_t1_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_t2_experimentCategory/BMRBx:theoretical_heteronucl_t2_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t2_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_t2_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_t2_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_t2_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_t2_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_t2_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t2_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_t2_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_t2_experiment>
      <BMRBo:theoretical_heteronucl_t2_experiment rdf:about="{$base}/theoretical_heteronucl_t2_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_heteronucl_t2_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_t2_experiment rdf:resource="{$base}/theoretical_heteronucl_t2_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_heteronucl_t2_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_302_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_t2_experiment>
      </BMRBo:has_theoretical_heteronucl_t2_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_t2_experimentCategory/BMRBx:theoretical_heteronucl_t2_experiment">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t2_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_t2_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_t2_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_t2_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_t2_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_t2_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t2_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_t2_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_t2_experiment>
      <BMRBo:theoretical_heteronucl_t2_experiment rdf:about="{$base}/theoretical_heteronucl_t2_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_heteronucl_t2_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_t2_experiment rdf:resource="{$base}/theoretical_heteronucl_t2_experiment/{$entry_id_encoded},{$experiment_id_encoded},{$theoretical_heteronucl_t2_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_302_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_t2_experiment>
      </BMRBo:has_theoretical_heteronucl_t2_experiment>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_t2_listCategory/BMRBx:theoretical_heteronucl_t2_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_t2_list>
      <BMRBo:theoretical_heteronucl_t2_list rdf:about="{$base}/theoretical_heteronucl_t2_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_t2_list rdf:resource="{$base}/theoretical_heteronucl_t2_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_303_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_t2_list>
      </BMRBo:has_theoretical_heteronucl_t2_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_t2_listCategory/BMRBx:theoretical_heteronucl_t2_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_t2_list>
      <BMRBo:theoretical_heteronucl_t2_list rdf:about="{$base}/theoretical_heteronucl_t2_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_t2_list rdf:resource="{$base}/theoretical_heteronucl_t2_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_303_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_t2_list>
      </BMRBo:has_theoretical_heteronucl_t2_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_t2_softwareCategory/BMRBx:theoretical_heteronucl_t2_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t2_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_t2_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_t2_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_t2_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_t2_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_t2_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t2_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_t2_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_t2_software>
      <BMRBo:theoretical_heteronucl_t2_software rdf:about="{$base}/theoretical_heteronucl_t2_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_heteronucl_t2_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_t2_software rdf:resource="{$base}/theoretical_heteronucl_t2_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_heteronucl_t2_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_304_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_t2_software>
      </BMRBo:has_theoretical_heteronucl_t2_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_heteronucl_t2_softwareCategory/BMRBx:theoretical_heteronucl_t2_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t2_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_t2_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_t2_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_t2_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_t2_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_t2_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t2_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_t2_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_heteronucl_t2_software>
      <BMRBo:theoretical_heteronucl_t2_software rdf:about="{$base}/theoretical_heteronucl_t2_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_heteronucl_t2_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_heteronucl_t2_software rdf:resource="{$base}/theoretical_heteronucl_t2_software/{$entry_id_encoded},{$software_id_encoded},{$theoretical_heteronucl_t2_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_304_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_heteronucl_t2_software>
      </BMRBo:has_theoretical_heteronucl_t2_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_t1Category/BMRBx:theoretical_t1">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t1_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_t1_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_t1_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_t1_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_t1_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_t1_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t1_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_t1_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_t1>
      <BMRBo:theoretical_t1 rdf:about="{$base}/theoretical_t1/{$entry_id_encoded},{$id_encoded},{$theoretical_heteronucl_t1_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_t1 rdf:resource="{$base}/theoretical_t1/{$entry_id_encoded},{$id_encoded},{$theoretical_heteronucl_t1_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_305_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_t1>
      </BMRBo:has_theoretical_t1>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_t1Category/BMRBx:theoretical_t1">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t1_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_t1_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_t1_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_t1_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_t1_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_t1_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t1_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_t1_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_t1>
      <BMRBo:theoretical_t1 rdf:about="{$base}/theoretical_t1/{$entry_id_encoded},{$id_encoded},{$theoretical_heteronucl_t1_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_t1 rdf:resource="{$base}/theoretical_t1/{$entry_id_encoded},{$id_encoded},{$theoretical_heteronucl_t1_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_305_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_t1>
      </BMRBo:has_theoretical_t1>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_t2Category/BMRBx:theoretical_t2">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t2_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_t2_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_t2_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_t2_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_t2_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_t2_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t2_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_t2_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_t2>
      <BMRBo:theoretical_t2 rdf:about="{$base}/theoretical_t2/{$entry_id_encoded},{$id_encoded},{$theoretical_heteronucl_t2_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_t2 rdf:resource="{$base}/theoretical_t2/{$entry_id_encoded},{$id_encoded},{$theoretical_heteronucl_t2_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_306_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_t2>
      </BMRBo:has_theoretical_t2>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:theoretical_t2Category/BMRBx:theoretical_t2">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t2_list_id_truncated"><xsl:choose><xsl:when test="string-length(@theoretical_heteronucl_t2_list_id)&lt;64"><xsl:value-of select="@theoretical_heteronucl_t2_list_id"/></xsl:when><xsl:when test="contains(@theoretical_heteronucl_t2_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@theoretical_heteronucl_t2_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@theoretical_heteronucl_t2_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="theoretical_heteronucl_t2_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($theoretical_heteronucl_t2_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_theoretical_t2>
      <BMRBo:theoretical_t2 rdf:about="{$base}/theoretical_t2/{$entry_id_encoded},{$id_encoded},{$theoretical_heteronucl_t2_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_theoretical_t2 rdf:resource="{$base}/theoretical_t2/{$entry_id_encoded},{$id_encoded},{$theoretical_heteronucl_t2_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_306_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:theoretical_t2>
      </BMRBo:has_theoretical_t2>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:torsion_angleCategory/BMRBx:torsion_angle">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_torsion_angle>
      <BMRBo:torsion_angle rdf:about="{$base}/torsion_angle/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:torsion_angle>
      </BMRBo:has_torsion_angle>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:torsion_angleCategory/BMRBx:torsion_angle">
      <xsl:variable name="assembly_id_truncated"><xsl:choose><xsl:when test="string-length(@assembly_id)&lt;64"><xsl:value-of select="@assembly_id"/></xsl:when><xsl:when test="contains(@assembly_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@assembly_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@assembly_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="assembly_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($assembly_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_torsion_angle>
      <BMRBo:torsion_angle rdf:about="{$base}/torsion_angle/{$assembly_id_encoded},{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:torsion_angle>
      </BMRBo:has_torsion_angle>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:torsion_angle_constraintCategory/BMRBx:torsion_angle_constraint">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_torsion_angle_constraint>
      <BMRBo:torsion_angle_constraint rdf:about="{$base}/torsion_angle_constraint/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_torsion_angle_constraint rdf:resource="{$base}/torsion_angle_constraint/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_307_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:torsion_angle_constraint>
      </BMRBo:has_torsion_angle_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:torsion_angle_constraintCategory/BMRBx:torsion_angle_constraint">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_torsion_angle_constraint>
      <BMRBo:torsion_angle_constraint rdf:about="{$base}/torsion_angle_constraint/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_torsion_angle_constraint rdf:resource="{$base}/torsion_angle_constraint/{$entry_id_encoded},{$id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_307_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:torsion_angle_constraint>
      </BMRBo:has_torsion_angle_constraint>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:torsion_angle_constraint_listCategory/BMRBx:torsion_angle_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_torsion_angle_constraint_list>
      <BMRBo:torsion_angle_constraint_list rdf:about="{$base}/torsion_angle_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_torsion_angle_constraint_list rdf:resource="{$base}/torsion_angle_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_308_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:torsion_angle_constraint_list>
      </BMRBo:has_torsion_angle_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:torsion_angle_constraint_listCategory/BMRBx:torsion_angle_constraint_list">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_torsion_angle_constraint_list>
      <BMRBo:torsion_angle_constraint_list rdf:about="{$base}/torsion_angle_constraint_list/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_torsion_angle_constraint_list rdf:resource="{$base}/torsion_angle_constraint_list/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_308_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:torsion_angle_constraint_list>
      </BMRBo:has_torsion_angle_constraint_list>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:torsion_angle_constraint_softwareCategory/BMRBx:torsion_angle_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_torsion_angle_constraint_software>
      <BMRBo:torsion_angle_constraint_software rdf:about="{$base}/torsion_angle_constraint_software/{$entry_id_encoded},{$software_id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_torsion_angle_constraint_software rdf:resource="{$base}/torsion_angle_constraint_software/{$entry_id_encoded},{$software_id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_309_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:torsion_angle_constraint_software>
      </BMRBo:has_torsion_angle_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:torsion_angle_constraint_softwareCategory/BMRBx:torsion_angle_constraint_software">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_torsion_angle_constraint_software>
      <BMRBo:torsion_angle_constraint_software rdf:about="{$base}/torsion_angle_constraint_software/{$entry_id_encoded},{$software_id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_torsion_angle_constraint_software rdf:resource="{$base}/torsion_angle_constraint_software/{$entry_id_encoded},{$software_id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_309_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:torsion_angle_constraint_software>
      </BMRBo:has_torsion_angle_constraint_software>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:torsion_angle_constraints_exptCategory/BMRBx:torsion_angle_constraints_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_torsion_angle_constraints_expt>
      <BMRBo:torsion_angle_constraints_expt rdf:about="{$base}/torsion_angle_constraints_expt/{$entry_id_encoded},{$experiment_id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_torsion_angle_constraints_expt rdf:resource="{$base}/torsion_angle_constraints_expt/{$entry_id_encoded},{$experiment_id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_310_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:torsion_angle_constraints_expt>
      </BMRBo:has_torsion_angle_constraints_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:torsion_angle_constraints_exptCategory/BMRBx:torsion_angle_constraints_expt">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="experiment_id_truncated"><xsl:choose><xsl:when test="string-length(@experiment_id)&lt;64"><xsl:value-of select="@experiment_id"/></xsl:when><xsl:when test="contains(@experiment_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@experiment_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@experiment_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="experiment_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($experiment_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_truncated"><xsl:choose><xsl:when test="string-length(@torsion_angle_constraint_list_id)&lt;64"><xsl:value-of select="@torsion_angle_constraint_list_id"/></xsl:when><xsl:when test="contains(@torsion_angle_constraint_list_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@torsion_angle_constraint_list_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@torsion_angle_constraint_list_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="torsion_angle_constraint_list_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($torsion_angle_constraint_list_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_torsion_angle_constraints_expt>
      <BMRBo:torsion_angle_constraints_expt rdf:about="{$base}/torsion_angle_constraints_expt/{$entry_id_encoded},{$experiment_id_encoded},{$torsion_angle_constraint_list_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_torsion_angle_constraints_expt rdf:resource="{$base}/torsion_angle_constraints_expt/{$entry_id_encoded},{$experiment_id_encoded},{$torsion_angle_constraint_list_id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_310_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:torsion_angle_constraints_expt>
      </BMRBo:has_torsion_angle_constraints_expt>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:vendorCategory/BMRBx:vendor">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_vendor>
      <BMRBo:vendor rdf:about="{$base}/vendor/{$entry_id_encoded},{$name_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:vendor>
      </BMRBo:has_vendor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:vendorCategory/BMRBx:vendor">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="name_truncated"><xsl:choose><xsl:when test="string-length(@name)&lt;64"><xsl:value-of select="@name"/></xsl:when><xsl:when test="contains(@name,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@name,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@name,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="name_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($name_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="software_id_truncated"><xsl:choose><xsl:when test="string-length(@software_id)&lt;64"><xsl:value-of select="@software_id"/></xsl:when><xsl:when test="contains(@software_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@software_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@software_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="software_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($software_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_vendor>
      <BMRBo:vendor rdf:about="{$base}/vendor/{$entry_id_encoded},{$name_encoded},{$software_id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:vendor>
      </BMRBo:has_vendor>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:xray_instrumentCategory/BMRBx:xray_instrument">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_xray_instrument>
      <BMRBo:xray_instrument rdf:about="{$base}/xray_instrument/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_xray_instrument rdf:resource="{$base}/xray_instrument/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_311_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:xray_instrument>
      </BMRBo:has_xray_instrument>
  </xsl:template>


  <xsl:template match="BMRBx:datablock/BMRBx:xray_instrumentCategory/BMRBx:xray_instrument">
      <xsl:variable name="entry_id_truncated"><xsl:choose><xsl:when test="string-length(@entry_id)&lt;64"><xsl:value-of select="@entry_id"/></xsl:when><xsl:when test="contains(@entry_id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@entry_id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@entry_id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="entry_id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($entry_id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <xsl:variable name="id_truncated"><xsl:choose><xsl:when test="string-length(@id)&lt;64"><xsl:value-of select="@id"/></xsl:when><xsl:when test="contains(@id,',')"><xsl:call-template name="substring-before-last"><xsl:with-param name="str" select="substring(@id,1,64)"/><xsl:with-param name="substr">,</xsl:with-param></xsl:call-template></xsl:when><xsl:otherwise><xsl:value-of select="substring(@id,1,64)"/></xsl:otherwise></xsl:choose></xsl:variable>
      <xsl:variable name="id_encoded"><xsl:call-template name="url-encode"><xsl:with-param name="str" select="translate(normalize-space($id_truncated),' ^','__')"/></xsl:call-template></xsl:variable>
      <BMRBo:has_xray_instrument>
      <BMRBo:xray_instrument rdf:about="{$base}/xray_instrument/{$entry_id_encoded},{$id_encoded}">
      <BMRBo:of_datablock rdf:resource="{$base}"/>
      <xsl:if test="@entry_id!=''">
	<BMRBo:reference_to_entry>
	  <rdf:Description  rdf:about="{$base}/entry/">
	    <BMRBo:referenced_by_xray_instrument rdf:resource="{$base}/xray_instrument/{$entry_id_encoded},{$id_encoded}"/>
	  </rdf:Description>
	</BMRBo:reference_to_entry>
	    <!-- entryKeyref_0_0_311_0 -->
	
      </xsl:if>
      <xsl:apply-templates select="@*"/>
      <xsl:apply-templates select="@*" mode="linked"/>
      <xsl:apply-templates/>
      <xsl:apply-templates mode="linked"/>
      </BMRBo:xray_instrument>
      </BMRBo:has_xray_instrument>
  </xsl:template>


  <xsl:template match="*[@xsi:nil='true']"/>
  <xsl:template match="*|text()|@*"/>
  <xsl:template match="*|text()|@*" mode="linked"/>
 
</xsl:stylesheet>